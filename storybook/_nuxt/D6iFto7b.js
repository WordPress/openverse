import{r as S,w as I,c as J,G as Ae,n as Pe}from"./53SD24Bo.js";import{b as L,e as H,a as Ce,h as Re,c as ye,d as ne,i as xe,f as Oe}from"./CtCLusXQ.js";import"./ey6Ec0eW.js";import{t as W,h as ge,i as we}from"./7RO02bE1.js";import{w as Te}from"./D6STwiFZ.js";(function(){try{var r=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new r.Error().stack;e&&(r._sentryDebugIds=r._sentryDebugIds||{},r._sentryDebugIds[e]="dea03409-1a81-4e85-a62c-d636e5ae3365",r._sentryDebugIdIdentifier="sentry-dbid-dea03409-1a81-4e85-a62c-d636e5ae3365")}catch{}})();function Le({nodeRef:r,initialLocked:e=!1}){const t=S(e);let n=null;I(r,a=>{a&&t.value&&u()},{immediate:!0});const u=()=>{if(!r.value)return;t.value=!0;const a=L(r.value);n=window.scrollY,a.body.style.position="fixed",a.body.style.top=`-${n}px`,a.body.style.right="0",a.body.style.left="0"};return{locked:t,lock:u,unlock:()=>{if(!r.value)return;t.value=!1;const a=L(r.value);a.body.style.position="",a.body.style.top="",a.body.style.right="",a.body.style.left="",n&&(window.scrollTo(0,n),n=null)}}}const x=S([]),ae=()=>{const r=s=>{x.value.push(s)},e=()=>{x.value.pop()},t=()=>{x.value=[]},n=s=>x.value.indexOf(s),u=J(()=>x.value[x.value.length-1]);return{stack:x,push:r,pop:e,clear:t,indexOf:n,activeDialog:u}};function Ft({id:r,visibleRef:e,nodeRef:t,lockBodyScroll:n,emit:u,deactivateFocusTrap:s}){const c=typeof e>"u"?S(!1):e,f=Ae({"aria-expanded":!1,"aria-haspopup":"dialog"});I(c,(b,D,C)=>{f["aria-expanded"]=b,h.value&&(b?d():p()),u(b?"open":"close"),C(()=>{h.value&&p()})});let d=()=>{},p=()=>{};if(t){const b=Le({nodeRef:t});d=b.lock,p=b.unlock}const h=J(()=>W(n)??!1);I(h,b=>{b?c.value&&d():p()});const v=()=>{c.value=!0,k()},N=()=>{A();const b=W(s);b&&b(),c.value=!1},k=()=>{const{push:b}=ae(),D=W(r);D&&b(D)},A=()=>{const b=ae(),D=W(r);D&&b.indexOf(D)>-1&&b.pop()};return{close:N,open:v,onTriggerClick:()=>{c.value?N():v()},triggerA11yProps:f,visible:c}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var Fe=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],$=Fe.join(","),Ne=typeof Element>"u",B=Ne?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Z=!Ne&&Element.prototype.getRootNode?function(r){var e;return r==null||(e=r.getRootNode)===null||e===void 0?void 0:e.call(r)}:function(r){return r==null?void 0:r.ownerDocument},z=function r(e,t){var n;t===void 0&&(t=!0);var u=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"inert"),s=u===""||u==="true",a=s||t&&e&&r(e.parentNode);return a},Be=function(e){var t,n=e==null||(t=e.getAttribute)===null||t===void 0?void 0:t.call(e,"contenteditable");return n===""||n==="true"},Ee=function(e,t,n){if(z(e))return[];var u=Array.prototype.slice.apply(e.querySelectorAll($));return t&&B.call(e,$)&&u.unshift(e),u=u.filter(n),u},Se=function r(e,t,n){for(var u=[],s=Array.from(e);s.length;){var a=s.shift();if(!z(a,!1))if(a.tagName==="SLOT"){var c=a.assignedElements(),f=c.length?c:a.children,d=r(f,!0,n);n.flatten?u.push.apply(u,d):u.push({scopeParent:a,candidates:d})}else{var p=B.call(a,$);p&&n.filter(a)&&(t||!e.includes(a))&&u.push(a);var h=a.shadowRoot||typeof n.getShadowRoot=="function"&&n.getShadowRoot(a),v=!z(h,!1)&&(!n.shadowRootFilter||n.shadowRootFilter(a));if(h&&v){var N=r(h===!0?a.children:h.children,!0,n);n.flatten?u.push.apply(u,N):u.push({scopeParent:a,candidates:N})}else s.unshift.apply(s,a.children)}}return u},ke=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},O=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||Be(e))&&!ke(e)?0:e.tabIndex},Ke=function(e,t){var n=O(e);return n<0&&t&&!ke(e)?0:n},Me=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},De=function(e){return e.tagName==="INPUT"},je=function(e){return De(e)&&e.type==="hidden"},Ge=function(e){var t=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(n){return n.tagName==="SUMMARY"});return t},Ve=function(e,t){for(var n=0;n<e.length;n++)if(e[n].checked&&e[n].form===t)return e[n]},Ue=function(e){if(!e.name)return!0;var t=e.form||Z(e),n=function(c){return t.querySelectorAll('input[type="radio"][name="'+c+'"]')},u;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")u=n(window.CSS.escape(e.name));else try{u=n(e.name)}catch(a){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",a.message),!1}var s=Ve(u,e.form);return!s||s===e},qe=function(e){return De(e)&&e.type==="radio"},We=function(e){return qe(e)&&!Ue(e)},Ye=function(e){var t,n=e&&Z(e),u=(t=n)===null||t===void 0?void 0:t.host,s=!1;if(n&&n!==e){var a,c,f;for(s=!!((a=u)!==null&&a!==void 0&&(c=a.ownerDocument)!==null&&c!==void 0&&c.contains(u)||e!=null&&(f=e.ownerDocument)!==null&&f!==void 0&&f.contains(e));!s&&u;){var d,p,h;n=Z(u),u=(d=n)===null||d===void 0?void 0:d.host,s=!!((p=u)!==null&&p!==void 0&&(h=p.ownerDocument)!==null&&h!==void 0&&h.contains(u))}}return s},le=function(e){var t=e.getBoundingClientRect(),n=t.width,u=t.height;return n===0&&u===0},He=function(e,t){var n=t.displayCheck,u=t.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=B.call(e,"details>summary:first-of-type"),a=s?e.parentElement:e;if(B.call(a,"details:not([open]) *"))return!0;if(!n||n==="full"||n==="legacy-full"){if(typeof u=="function"){for(var c=e;e;){var f=e.parentElement,d=Z(e);if(f&&!f.shadowRoot&&u(f)===!0)return le(e);e.assignedSlot?e=e.assignedSlot:!f&&d!==e.ownerDocument?e=d.host:e=f}e=c}if(Ye(e))return!e.getClientRects().length;if(n!=="legacy-full")return!0}else if(n==="non-zero-area")return le(e);return!1},$e=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if(t.tagName==="FIELDSET"&&t.disabled){for(var n=0;n<t.children.length;n++){var u=t.children.item(n);if(u.tagName==="LEGEND")return B.call(t,"fieldset[disabled] *")?!0:!u.contains(e)}return!0}t=t.parentElement}return!1},X=function(e,t){return!(t.disabled||z(t)||je(t)||He(t,e)||Ge(t)||$e(t))},re=function(e,t){return!(We(t)||O(t)<0||!X(e,t))},Ze=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},ze=function r(e){var t=[],n=[];return e.forEach(function(u,s){var a=!!u.scopeParent,c=a?u.scopeParent:u,f=Ke(c,a),d=a?r(u.candidates):c;f===0?a?t.push.apply(t,d):t.push(c):n.push({documentOrder:s,tabIndex:f,item:u,isScope:a,content:d})}),n.sort(Me).reduce(function(u,s){return s.isScope?u.push.apply(u,s.content):u.push(s.content),u},[]).concat(t)},Xe=function(e,t){t=t||{};var n;return t.getShadowRoot?n=Se([e],t.includeContainer,{filter:re.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:Ze}):n=Ee(e,t.includeContainer,re.bind(null,t)),ze(n)},Je=function(e,t){t=t||{};var n;return t.getShadowRoot?n=Se([e],t.includeContainer,{filter:X.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):n=Ee(e,t.includeContainer,X.bind(null,t)),n},K=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return B.call(e,$)===!1?!1:re(t,e)},Qe=Fe.concat("iframe").join(","),te=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return B.call(e,Qe)===!1?!1:X(t,e)};/*!
* focus-trap 7.5.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function fe(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable})),t.push.apply(t,n)}return t}function de(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?fe(Object(t),!0).forEach(function(n){_e(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):fe(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function _e(r,e,t){return e=tt(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function et(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function tt(r){var e=et(r,"string");return typeof e=="symbol"?e:String(e)}var ve={activateTrap:function(e,t){if(e.length>0){var n=e[e.length-1];n!==t&&n.pause()}var u=e.indexOf(t);u===-1||e.splice(u,1),e.push(t)},deactivateTrap:function(e,t){var n=e.indexOf(t);n!==-1&&e.splice(n,1),e.length>0&&e[e.length-1].unpause()}},nt=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},at=function(e){return(e==null?void 0:e.key)==="Escape"||(e==null?void 0:e.key)==="Esc"||(e==null?void 0:e.keyCode)===27},q=function(e){return(e==null?void 0:e.key)==="Tab"||(e==null?void 0:e.keyCode)===9},rt=function(e){return q(e)&&!e.shiftKey},ut=function(e){return q(e)&&e.shiftKey},be=function(e){return setTimeout(e,0)},he=function(e,t){var n=-1;return e.every(function(u,s){return t(u)?(n=s,!1):!0}),n},U=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),u=1;u<t;u++)n[u-1]=arguments[u];return typeof e=="function"?e.apply(void 0,n):e},Y=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},it=[],ot=function(e,t){var n=(t==null?void 0:t.document)||document,u=(t==null?void 0:t.trapStack)||it,s=de({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:rt,isKeyBackward:ut},t),a={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},c,f=function(o,i,l){return o&&o[i]!==void 0?o[i]:s[l||i]},d=function(o,i){var l=typeof(i==null?void 0:i.composedPath)=="function"?i.composedPath():void 0;return a.containerGroups.findIndex(function(m){var y=m.container,w=m.tabbableNodes;return y.contains(o)||(l==null?void 0:l.includes(y))||w.find(function(T){return T===o})})},p=function(o){var i=s[o];if(typeof i=="function"){for(var l=arguments.length,m=new Array(l>1?l-1:0),y=1;y<l;y++)m[y-1]=arguments[y];i=i.apply(void 0,m)}if(i===!0&&(i=void 0),!i){if(i===void 0||i===!1)return i;throw new Error("`".concat(o,"` was specified but was not a node, or did not return a node"))}var w=i;if(typeof i=="string"&&(w=n.querySelector(i),!w))throw new Error("`".concat(o,"` as selector refers to no known node"));return w},h=function(){var o=p("initialFocus");if(o===!1)return!1;if(o===void 0||!te(o,s.tabbableOptions))if(d(n.activeElement)>=0)o=n.activeElement;else{var i=a.tabbableGroups[0],l=i&&i.firstTabbableNode;o=l||p("fallbackFocus")}if(!o)throw new Error("Your focus-trap needs to have at least one focusable element");return o},v=function(){if(a.containerGroups=a.containers.map(function(o){var i=Xe(o,s.tabbableOptions),l=Je(o,s.tabbableOptions),m=i.length>0?i[0]:void 0,y=i.length>0?i[i.length-1]:void 0,w=l.find(function(F){return K(F)}),T=l.slice().reverse().find(function(F){return K(F)}),E=!!i.find(function(F){return O(F)>0});return{container:o,tabbableNodes:i,focusableNodes:l,posTabIndexesFound:E,firstTabbableNode:m,lastTabbableNode:y,firstDomTabbableNode:w,lastDomTabbableNode:T,nextTabbableNode:function(R){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,P=i.indexOf(R);return P<0?G?l.slice(l.indexOf(R)+1).find(function(V){return K(V)}):l.slice(0,l.indexOf(R)).reverse().find(function(V){return K(V)}):i[P+(G?1:-1)]}}}),a.tabbableGroups=a.containerGroups.filter(function(o){return o.tabbableNodes.length>0}),a.tabbableGroups.length<=0&&!p("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(a.containerGroups.find(function(o){return o.posTabIndexesFound})&&a.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},N=function g(o){var i=o.activeElement;if(i)return i.shadowRoot&&i.shadowRoot.activeElement!==null?g(i.shadowRoot):i},k=function g(o){if(o!==!1&&o!==N(document)){if(!o||!o.focus){g(h());return}o.focus({preventScroll:!!s.preventScroll}),a.mostRecentlyFocusedNode=o,nt(o)&&o.select()}},A=function(o){var i=p("setReturnFocus",o);return i||(i===!1?!1:o)},M=function(o){var i=o.target,l=o.event,m=o.isBackward,y=m===void 0?!1:m;i=i||Y(l),v();var w=null;if(a.tabbableGroups.length>0){var T=d(i,l),E=T>=0?a.containerGroups[T]:void 0;if(T<0)y?w=a.tabbableGroups[a.tabbableGroups.length-1].lastTabbableNode:w=a.tabbableGroups[0].firstTabbableNode;else if(y){var F=he(a.tabbableGroups,function(_){var ee=_.firstTabbableNode;return i===ee});if(F<0&&(E.container===i||te(i,s.tabbableOptions)&&!K(i,s.tabbableOptions)&&!E.nextTabbableNode(i,!1))&&(F=T),F>=0){var R=F===0?a.tabbableGroups.length-1:F-1,G=a.tabbableGroups[R];w=O(i)>=0?G.lastTabbableNode:G.lastDomTabbableNode}else q(l)||(w=E.nextTabbableNode(i,!1))}else{var P=he(a.tabbableGroups,function(_){var ee=_.lastTabbableNode;return i===ee});if(P<0&&(E.container===i||te(i,s.tabbableOptions)&&!K(i,s.tabbableOptions)&&!E.nextTabbableNode(i))&&(P=T),P>=0){var V=P===a.tabbableGroups.length-1?0:P+1,ce=a.tabbableGroups[V];w=O(i)>=0?ce.firstTabbableNode:ce.firstDomTabbableNode}else q(l)||(w=E.nextTabbableNode(i))}}else w=p("fallbackFocus");return w},b=function(o){var i=Y(o);if(!(d(i,o)>=0)){if(U(s.clickOutsideDeactivates,o)){c.deactivate({returnFocus:s.returnFocusOnDeactivate});return}U(s.allowOutsideClick,o)||o.preventDefault()}},D=function(o){var i=Y(o),l=d(i,o)>=0;if(l||i instanceof Document)l&&(a.mostRecentlyFocusedNode=i);else{o.stopImmediatePropagation();var m,y=!0;if(a.mostRecentlyFocusedNode)if(O(a.mostRecentlyFocusedNode)>0){var w=d(a.mostRecentlyFocusedNode),T=a.containerGroups[w].tabbableNodes;if(T.length>0){var E=T.findIndex(function(F){return F===a.mostRecentlyFocusedNode});E>=0&&(s.isKeyForward(a.recentNavEvent)?E+1<T.length&&(m=T[E+1],y=!1):E-1>=0&&(m=T[E-1],y=!1))}}else a.containerGroups.some(function(F){return F.tabbableNodes.some(function(R){return O(R)>0})})||(y=!1);else y=!1;y&&(m=M({target:a.mostRecentlyFocusedNode,isBackward:s.isKeyBackward(a.recentNavEvent)})),k(m||a.mostRecentlyFocusedNode||h())}a.recentNavEvent=void 0},C=function(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;a.recentNavEvent=o;var l=M({event:o,isBackward:i});l&&(q(o)&&o.preventDefault(),k(l))},ue=function(o){if(at(o)&&U(s.escapeDeactivates,o)!==!1){o.preventDefault(),c.deactivate();return}(s.isKeyForward(o)||s.isKeyBackward(o))&&C(o,s.isKeyBackward(o))},ie=function(o){var i=Y(o);d(i,o)>=0||U(s.clickOutsideDeactivates,o)||U(s.allowOutsideClick,o)||(o.preventDefault(),o.stopImmediatePropagation())},oe=function(){if(a.active)return ve.activateTrap(u,c),a.delayInitialFocusTimer=s.delayInitialFocus?be(function(){k(h())}):k(h()),n.addEventListener("focusin",D,!0),n.addEventListener("mousedown",b,{capture:!0,passive:!1}),n.addEventListener("touchstart",b,{capture:!0,passive:!1}),n.addEventListener("click",ie,{capture:!0,passive:!1}),n.addEventListener("keydown",ue,{capture:!0,passive:!1}),c},se=function(){if(a.active)return n.removeEventListener("focusin",D,!0),n.removeEventListener("mousedown",b,!0),n.removeEventListener("touchstart",b,!0),n.removeEventListener("click",ie,!0),n.removeEventListener("keydown",ue,!0),c},Ie=function(o){var i=o.some(function(l){var m=Array.from(l.removedNodes);return m.some(function(y){return y===a.mostRecentlyFocusedNode})});i&&k(h())},Q=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(Ie):void 0,j=function(){Q&&(Q.disconnect(),a.active&&!a.paused&&a.containers.map(function(o){Q.observe(o,{subtree:!0,childList:!0})}))};return c={get active(){return a.active},get paused(){return a.paused},activate:function(o){if(a.active)return this;var i=f(o,"onActivate"),l=f(o,"onPostActivate"),m=f(o,"checkCanFocusTrap");m||v(),a.active=!0,a.paused=!1,a.nodeFocusedBeforeActivation=n.activeElement,i==null||i();var y=function(){m&&v(),oe(),j(),l==null||l()};return m?(m(a.containers.concat()).then(y,y),this):(y(),this)},deactivate:function(o){if(!a.active)return this;var i=de({onDeactivate:s.onDeactivate,onPostDeactivate:s.onPostDeactivate,checkCanReturnFocus:s.checkCanReturnFocus},o);clearTimeout(a.delayInitialFocusTimer),a.delayInitialFocusTimer=void 0,se(),a.active=!1,a.paused=!1,j(),ve.deactivateTrap(u,c);var l=f(i,"onDeactivate"),m=f(i,"onPostDeactivate"),y=f(i,"checkCanReturnFocus"),w=f(i,"returnFocus","returnFocusOnDeactivate");l==null||l();var T=function(){be(function(){w&&k(A(a.nodeFocusedBeforeActivation)),m==null||m()})};return w&&y?(y(A(a.nodeFocusedBeforeActivation)).then(T,T),this):(T(),this)},pause:function(o){if(a.paused||!a.active)return this;var i=f(o,"onPause"),l=f(o,"onPostPause");return a.paused=!0,i==null||i(),se(),j(),l==null||l(),this},unpause:function(o){if(!a.paused||!a.active)return this;var i=f(o,"onUnpause"),l=f(o,"onPostUnpause");return a.paused=!1,i==null||i(),v(),oe(),j(),l==null||l(),this},updateContainerElements:function(o){var i=[].concat(o).filter(Boolean);return a.containers=i.map(function(l){return typeof l=="string"?n.querySelector(l):l}),a.active&&v(),j(),this}},c.updateContainerElements(e),c};function st(r,e={}){let t;const{immediate:n,...u}=e,s=S(!1),a=S(!1),c=v=>t&&t.activate(v),f=v=>t&&t.deactivate(v),d=()=>{t&&(t.pause(),a.value=!0)},p=()=>{t&&(t.unpause(),a.value=!1)},h=I(()=>ge(r),v=>{v&&(t=ot(v,{...u,onActivate(){s.value=!0,e.onActivate&&e.onActivate()},onDeactivate(){s.value=!1,e.onDeactivate&&e.onDeactivate()}}),n&&c())},{flush:"post"});return we(()=>{h()}),{hasFocus:s,isPaused:a,activate:c,deactivate:f,pause:d,unpause:p}}const ct="It's recommended to have at least one tabbable element inside dialog. The dialog element has been automatically focused. If this is the intended behavior, pass `tabIndex={0}` to the dialog element to disable this warning.",lt=({dialogRef:r,visibleRef:e,autoFocusOnShowRef:t,trapFocusRef:n,hideOnClickOutsideRef:u,initialFocusElementRef:s})=>{let a=()=>{},c=()=>{},f;const d=S(null),p=J(()=>s.value||d.value);n.value&&(f=st(r,{initialFocus:!1,escapeDeactivates:!1,clickOutsideDeactivates:()=>u.value,fallbackFocus:()=>p.value}),a=f.activate,c=f.deactivate);const h=I([()=>ge(r),e,t,s],([v,N,k,A],M,b)=>{if(!v||!N){f!=null&&f.hasFocus&&c();return}k&&(Pe(()=>{const D=()=>Re(v);if(A)H(A,{preventScroll:!0,isActive:D});else{const C=Ce(v,!0);C?(H(C,{preventScroll:!0,isActive:D}),d.value=C):(H(v,{preventScroll:!0,isActive:D}),d.value=v,(v.tabIndex===void 0||v.tabIndex<0)&&Te(ct))}a()}),b(()=>{c()}))});return we(()=>{c(),h()}),{deactivateFocusTrap:c}};function ft(r){if(!r)return!1;const e=ye(r);return!e||ne(r,e)?!1:xe(e)?!0:e.getAttribute("data-popover")==="true"}const dt=({dialogRef:r,triggerElementRef:e,visibleRef:t,autoFocusOnHideRef:n})=>{I([r,e,t,n],([u,s,a,c],[,,f])=>{c&&!a&&a!==f&&(!u||ft(u)||s&&H(s))})},pe=({containerRef:r,triggerRef:e,eventType:t,listener:n,shouldListenRef:u})=>{const s=S();I([r,e,u||S(!1)],([a,c,f],d,p)=>{if(s.value&&!f&&L(a).removeEventListener(t,s.value),!f)return;s.value=v=>{if(!n||!a||!(v.target instanceof Element))return;const N=v.target;Oe(N)&&(ne(a,N)||c&&ne(c,N)||ae().activeDialog.value===a.id&&n(v))};const h=L(a);h.addEventListener(t,s.value),p(()=>{s.value&&(h.removeEventListener(t,s.value),s.value=void 0)})},{immediate:!0})};function vt({dialogRef:r,visibleRef:e,hideOnClickOutsideRef:t}){const n=S();return I([e,t,r],([u,s,a],c,f)=>{if(!(u&&s))return;const d=L(a),p=h=>n.value=h.target;d.addEventListener("mousedown",p),f(()=>{d.removeEventListener("mousedown",p)})},{immediate:!0}),n}function bt({dialogRef:r,visibleRef:e,hideOnClickOutsideRef:t,triggerElementRef:n,hideRef:u}){const s=vt({dialogRef:r,visibleRef:e,hideOnClickOutsideRef:t}),a=J(()=>e.value&&t.value);pe({containerRef:r,triggerRef:n,eventType:"click",listener:c=>{s.value===c.target&&u.value()},shouldListenRef:a}),pe({containerRef:r,triggerRef:n,eventType:"focusin",listener:c=>{const f=L(r.value);c.target!==f&&u.value()},shouldListenRef:a})}function me(r){if(!r)return!1;const e=r;return!!(e.tagName&&e.tagName!=="HTML"&&e!==L(e).body)}function ht(){const r=S(0);return[r,()=>r.value+=1]}function pt({dialogRef:r,visibleRef:e}){const[t,n]=ht();return I([t],([u])=>{var s;e.value&&u&&(me(ye(r.value))||(s=r.value)==null||s.focus())}),u=>{if(e.value)return;const s=u.relatedTarget;me(s)||n()}}function Nt({emit:r,attrs:e,visibleRef:t,hideRef:n,dialogOptions:u,dialogElements:{dialogRef:s,initialFocusElementRef:a,triggerElementRef:c}}){!e["aria-label"]&&!e["aria-labelledby"]&&Te("You should provide either `aria-label` or `aria-labelledby` props.");const f=(u==null?void 0:u.autoFocusOnShowRef)||S(!0),d=(u==null?void 0:u.trapFocusRef)||S(!0),p=(u==null?void 0:u.autoFocusOnHideRef)||S(!0),h=(u==null?void 0:u.hideOnClickOutsideRef)||S(!0),v=(u==null?void 0:u.hideOnEscRef)||S(!0),N=pt({dialogRef:s,visibleRef:t}),{deactivateFocusTrap:k}=lt({dialogRef:s,visibleRef:t,initialFocusElementRef:a,autoFocusOnShowRef:f,trapFocusRef:d,hideOnClickOutsideRef:h});return dt({dialogRef:s,triggerElementRef:c,visibleRef:t,autoFocusOnHideRef:p}),bt({dialogRef:s,triggerElementRef:c,hideOnClickOutsideRef:h,hideRef:n,visibleRef:t}),{onKeyDown:b=>{r("keydown",b),!b.defaultPrevented&&b.key==="Escape"&&v.value&&(b.stopPropagation(),n.value())},onBlur:b=>{r("blur",b),N(b)},deactivateFocusTrap:k}}export{Nt as a,Ft as u};
