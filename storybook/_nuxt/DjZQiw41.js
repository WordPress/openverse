import{I as S,A as F}from"./BSHtV9yS.js";import{c as q}from"./DUD5NJ41.js";import{u as P}from"./DZSCtjcm.js";import"./Bk8VSEei.js";import{d as k,k as d,K as V,L as I,F as h,Z as x,W as m,j as n,Q as _,e as y,r as v,w as U,f as L,I as A,l as N,U as j,O,P as K,R as C,a7 as B,u as W,c as D,M as T}from"./53SD24Bo.js";import{f as Z}from"./whaKyvbR.js";import{u as G}from"./BLjgfQlY.js";import{_ as Q}from"./Cbq1TCLb.js";import{V as H}from"./CQ3yco75.js";import{h as J}from"./C8lB5fex.js";import{u as X}from"./CKwrFVsl.js";import{_ as Y}from"./C0eb6efW.js";import{u as ee}from"./B9Cuo1Ro.js";import{u as te}from"./D1l3oJXo.js";import{u as se}from"./fL1fV1YB.js";import{_ as re}from"./DhTbjJlp.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},s=new e.Error().stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="25caef81-41a4-4eff-bea7-c6fb2c78fad2",e._sentryDebugIdIdentifier="sentry-dbid-25caef81-41a4-4eff-bea7-c6fb2c78fad2")}catch{}})();const oe=(e,s)=>e?e.split("/").length>1?e.split("/")[1]:e:s("mediaDetails.information.unknown"),ae=(e,s)=>{if(!e.alt_files)return e.filetype??s("mediaDetails.information.unknown");const t=e.alt_files.map(l=>l.filetype).filter(l=>l!==e.filetype),r=Array.from(new Set(t));return e.filetype&&r.unshift(e.filetype),[...r].join(", ")},Se=(e,s,t)=>{const r=[];e.source&&e.providerName!==e.sourceName&&r.push({name:"provider",label:"mediaDetails.providerLabel",value:e.providerName||e.provider});const l=P().getSourceUrl(e.source??e.provider,e.frontendMediaType),u=e.sourceName??e.providerName??e.provider;r.push({name:"source",label:"mediaDetails.sourceLabel",source:e.source??e.provider,url:l,value:u}),e.category&&r.push({label:"mediaDetails.information.category",value:s(`filters.${e.frontendMediaType}Categories.${e.category}`)});const p=e.frontendMediaType===S?oe(t==null?void 0:t.type,s):ae(e,s);return r.push({label:"mediaDetails.information.type",value:p.toUpperCase()}),e.frontendMediaType===S&&r.push({label:"imageDetails.information.dimensions",value:`${s("imageDetails.information.sizeInPixels",{width:t==null?void 0:t.width,height:t==null?void 0:t.height})}`}),e.frontendMediaType===F&&(e.audio_set&&r.unshift({label:"audioDetails.table.album",value:e.audio_set.title,url:e.audio_set.foreign_landing_url}),e.genres&&e.genres.length>0&&r.push({label:"audioDetails.table.genre",value:e.genres.map(b=>q(b)).join(", ")}),e.sample_rate&&r.push({label:"audioDetails.table.sampleRate",value:e.sample_rate.toString()})),r},ne={class:"label-bold flex justify-start overflow-hidden break-words p-1"},M=k({__name:"VMetadataValue",props:{datum:{}},emits:["click"],setup(e){return(s,t)=>(n(),d("dd",ne,[s.datum.url?(n(),V(Q,{key:0,href:s.datum.url,class:"flex text-link focus-visible:rounded-sm focus-visible:outline-none focus-visible:ring focus-visible:ring-focus focus-visible:ring-offset-1","send-external-link-click-event":!1,onClick:t[0]||(t[0]=r=>s.$emit("click",s.datum.source))},{default:I(()=>[_("span",null,[x(m(s.datum.value),1),y(H,{name:"external-link",size:4,class:"ms-1 inline-flex","rtl-flip":""})])]),_:1},8,["href"])):(n(),d(h,{key:1},[x(m(s.datum.value),1)],64))]))}});M.__docgenInfo={exportName:"default",displayName:"VMetadataValue",description:"",tags:{},props:[{name:"datum",required:!0,type:{name:"Metadata"}}],events:[{name:"click",type:{names:["union"],elements:[{name:"string"},{name:"undefined"}]}}],sourceFiles:["/home/runner/work/openverse/openverse/frontend/src/components/VMediaInfo/VMetadataValue.vue"]};const le=["id","aria-hidden"],R=k({__name:"VTooltip",props:{placement:{default:"bottom"},strategy:{default:"absolute"},describedBy:{},zIndex:{default:"popover"}},setup(e){const s=e,t=v(!1),r=v(null),l=()=>{c.value&&!J(c.value)&&(t.value=!1)},u=()=>{t.value=!0},p={mouseover:u,mouseout:l,focus:u,blur:l},b=i=>{c.value=i;for(const[g,E]of Object.entries(p))i.addEventListener(g,E)},c=v(null);U(r,i=>{i&&b(i.firstElementChild)}),L(()=>{if(c.value)for(const[i,g]of Object.entries(p))c.value.removeEventListener(i,g)});const a=v(null),f=A(s),{style:o}=X({floatingElRef:a,floatingPropsRefs:{placement:f.placement,strategy:f.strategy,clippable:v(!1),visible:t,triggerElement:c}}),w=()=>{t.value&&(t.value=!1)};return(i,g)=>(n(),d("div",null,[_("div",{ref_key:"triggerContainerRef",ref:r,class:"flex w-min items-stretch whitespace-nowrap",onKeydown:j(w,["esc"])},[N(i.$slots,"trigger",{open:u},()=>[y(Y,{label:i.describedBy,"aria-describedby":i.describedBy,variant:"bordered-white",size:"disabled",class:"h-4 w-4 hover:!border-tx","icon-props":{name:"info",size:4},onClick:u},null,8,["label","aria-describedby"])])],544),O(_("div",{id:i.describedBy,ref_key:"tooltipRef",ref:a,role:"tooltip",class:C(`z-${i.zIndex} w-max-content absolute left-0 top-0`),style:B({...W(o)}),"aria-hidden":!t.value},[N(i.$slots,"default")],14,le),[[K,t.value]])]))}});R.__docgenInfo={exportName:"default",displayName:"VTooltip",description:"",tags:{},props:[{name:"placement",description:"The placement of the tooltip relative to the trigger. Should be one of the options\nfor `placement` passed to floating-ui.",tags:{see:[{description:"https://floating-ui.com/docs/tutorial#placements",title:"see"}]},required:!1,type:{name:"Placement"},defaultValue:{func:!1,value:'"bottom"'}},{name:"strategy",description:`The positioning strategy of the tooltip. If your reference element is in a fixed container
use the fixed strategy; otherwise use the default, absolute strategy.`,tags:{see:[{description:"https://floating-ui.com/docs/computeposition#strategy",title:"see"}]},required:!1,type:{name:"Strategy"},defaultValue:{func:!1,value:'"absolute"'}},{name:"describedBy",description:"The id of the element labelling the popover content.\nThe owning element must have `aria-describedby` set to this value.",required:!0,type:{name:"string"}},{name:"zIndex",description:"the z-index to apply to the tooltip content",required:!1,type:{name:"ZIndex"},defaultValue:{func:!1,value:'"popover"'}}],slots:[{name:"trigger",scoped:!0,description:"The trigger, should be a button 99.99% of the time. If you need custom event handling on the trigger button, ensure bubbling is not prevented or else the tooltip will not open",bindings:[{name:"open",title:"binding"}]},{name:"default"}],sourceFiles:["/home/runner/work/openverse/openverse/frontend/src/components/VTooltip/VTooltip.vue"]};const ie={class:"caption-regular rounded-sm bg-tertiary px-2 py-1 text-over-dark"},$=k({__name:"VSourceProviderTooltip",props:{datum:{},describedBy:{}},setup(e){const s=e,{t}=ee({useScope:"global"}),r=D(()=>s.datum.name?t(s.datum.name==="source"?"mediaDetails.sourceDescription":"mediaDetails.providerDescription"):"");return(l,u)=>(n(),d("dt",null,[x(m(l.$t(l.datum.label))+" ",1),y(R,{placement:"top","described-by":l.describedBy,class:"ms-1"},{default:I(()=>[_("p",ie,m(r.value),1)]),_:1},8,["described-by"])]))}});$.__docgenInfo={exportName:"default",displayName:"VSourceProviderTooltip",description:"",tags:{},props:[{name:"datum",required:!0,type:{name:"Metadata"}},{name:"describedBy",required:!0,type:{name:"string"}}],sourceFiles:["/home/runner/work/openverse/openverse/frontend/src/components/VMediaInfo/VSourceProviderTooltip.vue"]};const ue={key:1,class:"label-regular mb-1 flex flex-row ps-1"},de={key:1,class:"grid grid-cols-[auto,1fr] gap-x-4 gap-y-2"},ce=["id"],z=k({__name:"VMetadata",props:{metadata:{}},setup(e){const s=e,t=se(),r=G(),l=D(()=>r.isBreakpoint("sm")),u=a=>a.name&&(a.name==="source"||a.name==="provider")?a.name:"",p=D(()=>({"--column-count":s.metadata.length})),{$sendCustomEvent:b}=te(),c=a=>{const f=Z(t==null?void 0:t.params.id);!a||!f||b("VISIT_SOURCE_LINK",{id:f,source:a})};return(a,f)=>l.value?(n(),d("dl",{key:0,class:"metadata grid gap-8",style:B(p.value)},[(n(!0),d(h,null,T(a.metadata,o=>(n(),d("div",{key:o.label},[u(o)?(n(),V($,{key:0,"described-by":u(o),class:"label-regular -ms-1 mb-1 flex flex-row items-center ps-1",datum:o},null,8,["described-by","datum"])):(n(),d("dt",ue,m(a.$t(o.label)),1)),y(M,{datum:o,class:C({"-ms-1":!!u(o)}),onClick:w=>c(o.source)},null,8,["datum","class","onClick"])]))),128))],4)):(n(),d("dl",de,[(n(!0),d(h,null,T(a.metadata,o=>(n(),d(h,{key:o.label},[u(o)?(n(),V($,{key:0,"described-by":u(o),class:"label-regular -ms-1 flex flex-row items-center p-1 sm:ms-0 sm:py-0 sm:pe-0",datum:o},null,8,["described-by","datum"])):(n(),d("dt",{id:o.label,key:o.label,class:"label-regular flex flex-row pt-1"},m(a.$t(o.label)),9,ce)),y(M,{datum:o,onClick:w=>c(o.source)},null,8,["datum","onClick"])],64))),128))]))}}),Ne=re(z,[["__scopeId","data-v-ec7c99a1"]]);z.__docgenInfo={exportName:"default",displayName:"VMetadata",description:"",tags:{},props:[{name:"metadata",required:!0,type:{name:"Array",elements:[{name:"Metadata"}]}}],sourceFiles:["/home/runner/work/openverse/openverse/frontend/src/components/VMediaInfo/VMetadata.vue"]};export{Ne as V,Se as g};
