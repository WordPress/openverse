import{c as n,r as d,w,d as C,j as p,K as f,L as g,u as I,N as P,Q as _,e as $}from"./53SD24Bo.js";import{u as S,a as V}from"./MJVc8exl.js";import{u as q}from"./ETC5RdxK.js";import"./ey6Ec0eW.js";import{u as N}from"./B9Cuo1Ro.js";import{u as k}from"./Bdn_xeD6.js";import{i as F}from"./CD1OwZH3.js";import{V as R}from"./F9zLRqSg.js";import{_ as T}from"./BeGEdgZS.js";import{_ as B}from"./BEZrMiU9.js";(function(){try{var r=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new r.Error().stack;e&&(r._sentryDebugIds=r._sentryDebugIds||{},r._sentryDebugIds[e]="7e5367b3-d8ec-432c-8a8e-04810c51e676",r._sentryDebugIdIdentifier="sentry-dbid-7e5367b3-d8ec-432c-8a8e-04810c51e676")}catch{}})();const O=({collectionParams:r,mediaType:e,t})=>({pageTitle:n(()=>{const o=r.value;if(o){if(o.collection==="creator")return`${o.creator} | Openverse`;if(o.collection==="source"){const a=q().getProviderName(o.source,e);return`${t(`collection.pageTitle.source.${e}`,{source:a})} | Openverse`}if(o.collection==="tag")return`${t(`collection.pageTitle.tag.${e}`,{tag:o.tag})} | Openverse`}return"Openly Licensed Images, Audio and More | Openverse"})}),X=({mediaType:r})=>{const e=S(),t=V(),s=n(()=>t.collectionParams),o=n(()=>e.isFetching),a=d(e.resultItems[r]),u=d(),{t:m}=N({useScope:"global"}),h=n(()=>{if(!s.value)return"";const{collection:l,...i}=s.value;return m(`collection.ariaLabel.${l}.image`,{...i})}),c=async({shouldPersistMedia:l}={shouldPersistMedia:!1})=>{const i=await e.fetchMedia({shouldPersistMedia:l});return a.value=i.items,u.value=a.value.length>0?a.value[0].creator_url:void 0,a.value},y=k(),b=n(()=>y.query);w(b,async()=>{await c()});const v=n(()=>e.canLoadMore),M=async()=>{await c({shouldPersistMedia:!0})},{pageTitle:L}=O({collectionParams:s,mediaType:r,t:m});return{collectionParams:s,pageTitle:L,collectionLabel:h,creatorUrl:u,isFetching:o,media:a,fetchMedia:c,loadMore:M,canLoadMore:v}},D={class:"mb-6 mt-4 lg:mb-10"},U=C({__name:"VCollectionResults",props:{collectionParams:{},collectionLabel:{},results:{},isFetching:{type:Boolean},searchTerm:{},creatorUrl:{},canLoadMore:{type:Boolean}},emits:["load-more"],setup(r){return(e,t)=>(p(),f(T,{results:e.results,"is-fetching":e.isFetching,"search-term":e.searchTerm,"collection-label":e.collectionLabel,kind:"collection"},{header:g(()=>[I(F)(e.results.type)?(p(),f(R,{key:0,class:"mb-2 md:mb-3","media-type":e.results.type,"collection-params":e.collectionParams,"creator-url":e.creatorUrl},null,8,["media-type","collection-params","creator-url"])):P("",!0)]),footer:g(()=>[_("footer",D,[$(B,{"can-load-more":e.canLoadMore,"search-type":e.results.type,kind:"collection","search-term":e.searchTerm,"is-fetching":e.isFetching,class:"mb-4",onLoadMore:t[0]||(t[0]=s=>e.$emit("load-more"))},null,8,["can-load-more","search-type","search-term","is-fetching"])])]),_:1},8,["results","is-fetching","search-term","collection-label"]))}});U.__docgenInfo={exportName:"default",displayName:"VCollectionResults",description:"",tags:{},props:[{name:"collectionParams",required:!0,type:{name:"CollectionParams"}},{name:"collectionLabel",required:!0,type:{name:"string"}},{name:"results",required:!0,type:{name:"union",elements:[{name:"ImageResults"},{name:"AudioResults"}]}},{name:"isFetching",required:!0,type:{name:"boolean"}},{name:"searchTerm",required:!0,type:{name:"string"}},{name:"creatorUrl",required:!1,type:{name:"string"}},{name:"canLoadMore",required:!0,type:{name:"boolean"}}],events:[{name:"load-more"}],sourceFiles:["/home/runner/work/openverse/openverse/frontend/src/components/VSearchResultsGrid/VCollectionResults.vue"]};export{U as _,X as u};
