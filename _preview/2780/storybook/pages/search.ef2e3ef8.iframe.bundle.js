(window.webpackJsonp=window.webpackJsonp||[]).push([[194,21],{"./src/components/VScrollButton.vue":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.regexp.to-string.js");var vue=__webpack_require__("../node_modules/.pnpm/vue@2.7.14/node_modules/vue/dist/vue.js"),emits=__webpack_require__("./src/types/emits.ts"),components_VScrollButtonvue_type_script_lang_ts_=Object(vue.defineComponent)({name:"VScrollButton",props:{isFilterSidebarVisible:{type:Boolean,default:!0}},emits:{tab:Object(emits.a)()},setup:function setup(props){return{hClass:Object(vue.computed)((function(){return props.isFilterSidebarVisible?"ltr:right-[22rem] rtl:left-[22rem]":"ltr:right-4 rtl:left-4"})),scrollToTop:function scrollToTop(e){var _a;((null===(_a=e.currentTarget)||void 0===_a?void 0:_a.closest("#main-page"))||window).scrollTo({top:0,left:0,behavior:"smooth"})}}}}),componentNormalizer=__webpack_require__("../node_modules/.pnpm/vue-loader@15.10.0_uhs2gfg5l6piymj36axgkhxosy/node_modules/vue-loader/lib/runtime/componentNormalizer.js");const __vuedocgen_export_0=Object(componentNormalizer.a)(components_VScrollButtonvue_type_script_lang_ts_,(function render(){var _vm=this,_c=_vm._self._c;_vm._self._setupProxy;return _c("button",{staticClass:"scroll fixed bottom-4 mb-4 ms-auto h-14 w-14 rounded-full bg-pink text-center text-white transition-all duration-100 ease-linear hover:bg-dark-pink hover:shadow-md",class:_vm.hClass,attrs:{"aria-label":_vm.$t("browsePage.aria.scroll").toString(),type:"button"},on:{click:_vm.scrollToTop,keydown:function keydown($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"tab",9,$event.key,"Tab")||$event.ctrlKey||$event.shiftKey||$event.altKey||$event.metaKey?null:_vm.$emit("tab",$event)}}},[_c("svg",{staticClass:"h-full w-full fill-curr",attrs:{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false"}},[_c("path",{attrs:{d:"M6.5 12.4L12 8l5.5 4.4-.9 1.2L12 10l-4.5 3.6-1-1.2z"}})])])}),[],!1,null,null,null).exports;__webpack_exports__.default=__vuedocgen_export_0;__vuedocgen_export_0.__docgenInfo={displayName:"VScrollButton",exportName:"default",description:"",tags:{},props:[{name:"isFilterSidebarVisible",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}}],events:[{name:"tab"}]}},"./src/pages/search.vue":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var asyncToGenerator=__webpack_require__("../node_modules/.pnpm/@babel+runtime@7.18.9/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");__webpack_require__("../node_modules/.pnpm/regenerator-runtime@0.13.11/node_modules/regenerator-runtime/runtime.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.array.includes.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.string.includes.js");function isShallowEqualObjects(a,b){if(a===b)return!0;const aKeys=Object.keys(a),bKeys=Object.keys(b);if(aKeys.length!==bKeys.length)return!1;let i=0;for(;i<aKeys.length;){const key=aKeys[i],aValue=a[key];if(void 0===aValue&&!b.hasOwnProperty(key)||aValue!==b[key])return!1;i++}return!0}var vue=__webpack_require__("../node_modules/.pnpm/vue@2.7.14/node_modules/vue/dist/vue.js"),pinia=__webpack_require__("../node_modules/.pnpm/pinia@2.0.33_hwpzsh6pnvsm3pjf2zi526hnzq/node_modules/pinia/dist/pinia.mjs"),dist_runtime=__webpack_require__("../node_modules/.pnpm/@nuxtjs+composition-api@0.33.1_2fbzhtyog7bmybvhyeifufnl3a/node_modules/@nuxtjs/composition-api/dist/runtime/index.mjs"),search=__webpack_require__("./src/middleware/search.ts"),media=__webpack_require__("./src/stores/media/index.ts"),stores_search=__webpack_require__("./src/stores/search.ts"),errors=__webpack_require__("./src/constants/errors.ts"),constants_window=__webpack_require__("./src/constants/window.ts"),provides=__webpack_require__("./src/types/provides.ts"),VSearchGrid=__webpack_require__("./src/components/VSearchGrid.vue"),VScrollButton=__webpack_require__("./src/components/VScrollButton.vue"),searchvue_type_script_lang_ts_=Object(dist_runtime.b)({name:"BrowsePage",components:{VScrollButton:VScrollButton.default,VSearchGrid:VSearchGrid.default},layout:"search-layout",middleware:search.searchMiddleware,fetchOnServer:!1,setup:function setup(){var showScrollButton=Object(vue.inject)(provides.c),isSidebarVisible=Object(vue.inject)(provides.b),mediaStore=Object(media.a)(),searchStore=Object(stores_search.b)(),route=Object(dist_runtime.k)();searchStore.refreshRecentSearches();var _storeToRefs=Object(pinia.e)(searchStore),searchTerm=_storeToRefs.searchTerm,searchType=_storeToRefs.searchType,query=_storeToRefs.searchQueryParams,supported=_storeToRefs.searchTypeIsSupported,_storeToRefs2=Object(pinia.e)(mediaStore),resultCount=_storeToRefs2.resultCount,fetchState=_storeToRefs2.fetchState,resultItems=_storeToRefs2.resultItems,needsFetching=Object(vue.computed)((function(){return Boolean(supported.value&&!resultCount.value&&""!==searchTerm.value)}));Object(dist_runtime.j)({title:"".concat(searchTerm.value," | Openverse"),meta:[{hid:"robots",name:"robots",content:"all"}]});var nuxtError=Object(dist_runtime.h)().error,fetchMedia=function(){var _ref=Object(asyncToGenerator.a)(regeneratorRuntime.mark((function _callee(){var payload,_a,error,_args=arguments;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(payload=_args.length>0&&void 0!==_args[0]?_args[0]:{},!((null===(_a=mediaStore.fetchState.fetchingError)||void 0===_a?void 0:_a.message)&&mediaStore.fetchState.hasStarted)){_context.next=4;break}return _context.abrupt("return");case 4:return _context.next=6,mediaStore.fetchMedia(payload);case 6:if(_context.sent){_context.next=11;break}if(!(null==(error=mediaStore.fetchState.fetchingError)?void 0:error.statusCode)||(null==error?void 0:error.message.includes(errors.a))){_context.next=11;break}return _context.abrupt("return",nuxtError(mediaStore.fetchState.fetchingError));case 11:case"end":return _context.stop()}}),_callee)})));return function fetchMedia(){return _ref.apply(this,arguments)}}();return Object(vue.watch)(route,function(){var _ref2=Object(asyncToGenerator.a)(regeneratorRuntime.mark((function _callee2(newRoute,oldRoute){var _a,urlQuery,path;return regeneratorRuntime.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(newRoute.path===oldRoute.path&&isShallowEqualObjects(newRoute.query,oldRoute.query)){_context2.next=6;break}return urlQuery=newRoute.query,path=newRoute.path,searchStore.setSearchStateFromUrl({urlQuery:urlQuery,path:path}),null===(_a=document.getElementById("main-page"))||void 0===_a||_a.scroll(0,0),_context2.next=6,fetchMedia();case 6:case"end":return _context2.stop()}}),_callee2)})));return function(_x,_x2){return _ref2.apply(this,arguments)}}()),Object(dist_runtime.i)(Object(asyncToGenerator.a)(regeneratorRuntime.mark((function _callee3(){return regeneratorRuntime.wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(!needsFetching.value){_context3.next=3;break}return _context3.next=3,fetchMedia();case 3:case"end":return _context3.stop()}}),_callee3)})))),{showScrollButton:showScrollButton,searchTerm:searchTerm,searchType:searchType,supported:supported,query:query,resultCount:resultCount,fetchState:fetchState,resultItems:resultItems,needsFetching:needsFetching,isSidebarVisible:isSidebarVisible,skipToContentTargetId:constants_window.b}},head:{}}),pages_searchvue_type_script_lang_ts_=searchvue_type_script_lang_ts_,componentNormalizer=__webpack_require__("../node_modules/.pnpm/vue-loader@15.10.0_uhs2gfg5l6piymj36axgkhxosy/node_modules/vue-loader/lib/runtime/componentNormalizer.js"),component=Object(componentNormalizer.a)(pages_searchvue_type_script_lang_ts_,(function render(){var _vm=this,_c=_vm._self._c;_vm._self._setupProxy;return _c("div",{staticClass:"browse-page flex w-full flex-col px-6 lg:px-10",attrs:{id:_vm.skipToContentTargetId,tabindex:"-1"}},[_c("VSearchGrid",{attrs:{"fetch-state":_vm.fetchState,query:_vm.query,supported:_vm.supported,"search-type":_vm.searchType,"results-count":_vm.resultCount,"data-testid":"search-grid"},scopedSlots:_vm._u([{key:"media",fn:function fn(){return[_c("NuxtChild",{key:_vm.$route.path,attrs:{results:_vm.resultItems[_vm.searchType],"fetch-state":_vm.fetchState,"search-term":_vm.query.q,supported:_vm.supported,"data-testid":"search-results"}})]},proxy:!0}])}),_vm._v(" "),_c("VScrollButton",{directives:[{name:"show",rawName:"v-show",value:_vm.showScrollButton,expression:"showScrollButton"}],attrs:{"is-filter-sidebar-visible":_vm.isSidebarVisible,"data-testid":"scroll-button"}})],1)}),[],!1,null,null,null);const __vuedocgen_export_0=component.exports;__webpack_exports__.default=__vuedocgen_export_0;installComponents(component,{VSearchGrid:__webpack_require__("./src/components/VSearchGrid.vue").default,VScrollButton:__webpack_require__("./src/components/VScrollButton.vue").default}),__vuedocgen_export_0.__docgenInfo={displayName:"BrowsePage",exportName:"default",description:"",tags:{}}}}]);