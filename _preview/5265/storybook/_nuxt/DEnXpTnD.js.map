{"version":3,"file":"DEnXpTnD.js","sources":["../../src/composables/use-pages.ts","../../src/components/VHeader/VPageLinks.vue"],"sourcesContent":["import { useLocalePath, useRoute } from \"#imports\"\nimport { computed } from \"vue\"\n\nimport { getRouteNameString } from \"#shared/utils/route-utils\"\n\nexport default function usePages() {\n  const localePath = useLocalePath()\n\n  const pages = [\n    {\n      id: \"about\",\n      name: \"navigation.about\",\n      link: localePath(\"/about\"),\n    },\n    {\n      id: \"licenses\",\n      name: \"navigation.licenses\",\n      link: \"https://creativecommons.org/about/cclicenses/\",\n    },\n    {\n      id: \"sources\",\n      name: \"navigation.sources\",\n      link: localePath(\"/sources\"),\n    },\n    {\n      id: \"search-help\",\n      name: \"navigation.searchHelp\",\n      link: localePath(\"/search-help\"),\n    },\n    {\n      id: \"get-involved\",\n      name: \"navigation.getInvolved\",\n      link: \"https://make.wordpress.org/openverse/handbook/\",\n    },\n    {\n      id: \"api\",\n      name: \"navigation.api\",\n      link: \"https://api.openverse.org/v1/\",\n    },\n    {\n      id: \"terms\",\n      name: \"navigation.terms\",\n      link: \"https://docs.openverse.org/terms_of_service.html\",\n    },\n    {\n      id: \"privacy\",\n      name: \"navigation.privacy\",\n      link: localePath(\"/privacy\"),\n    },\n    {\n      id: \"feedback\",\n      name: \"navigation.feedback\",\n      link: localePath(\"/feedback\"),\n    },\n  ]\n\n  const route = useRoute()\n  /**\n   * The route name of the current page is localized, so it looks like `index__en`.\n   * We need to remove the locale suffix to match the page id.\n   */\n  const currentPageId = computed<string>(\n    () => getRouteNameString(route).split(\"__\")[0] ?? \"\"\n  )\n\n  return { all: pages, current: currentPageId }\n}\n","<script setup lang=\"ts\">\nimport { computed } from \"vue\"\n\nimport usePages from \"~/composables/use-pages\"\n\nimport VItemGroup from \"~/components/VItemGroup/VItemGroup.vue\"\nimport VItem from \"~/components/VItemGroup/VItem.vue\"\nimport VIcon from \"~/components/VIcon/VIcon.vue\"\nimport VLink from \"~/components/VLink.vue\"\n\nconst props = withDefaults(\n  defineProps<{\n    /**\n     * In `dark` mode (in the modal), the links are white and the background is dark charcoal.\n     * In `light` mode, the links are dark charcoal and the background is transparent.\n     */\n    mode?: \"light\" | \"dark\"\n    /**\n     * Pass the tailwind classes to style the nav links.\n     */\n    navLinkClasses?: string\n    variant?: \"links\" | \"itemgroup\"\n    isInModal?: boolean\n  }>(),\n  {\n    mode: \"light\",\n    navLinkClasses: \"\",\n    variant: \"links\",\n    isInModal: false,\n  }\n)\nconst emit = defineEmits<{\n  close: []\n}>()\n\nconst { all: allPages, current: currentPage } = usePages()\n\n// The modal isn't closed if we click on the current page link,\n// so we need to close it manually.\nconst onClick = () => emit(\"close\")\n\nconst isLinkExternal = (item: (typeof allPages)[number]) =>\n  !item.link.startsWith(\"/\")\n\nconst externalIconSize = computed(() => (props.isInModal ? 6 : 4))\n</script>\n\n<template>\n  <VItemGroup\n    v-if=\"variant === 'itemgroup'\"\n    class=\"my-2 min-w-50 gap-y-2\"\n    :bordered=\"false\"\n    :show-check=\"false\"\n  >\n    <VItem\n      v-for=\"(page, i) of allPages\"\n      :key=\"i\"\n      as=\"VLink\"\n      :is-first=\"i === 0\"\n      :selected=\"currentPage === page.id\"\n      :href=\"page.link\"\n      class=\"w-full\"\n      @click=\"onClick\"\n    >\n      <div class=\"flex w-full flex-row justify-between\">\n        <span class=\"pe-2\">{{ $t(page.name) }}</span>\n        <VIcon\n          v-if=\"isLinkExternal(page)\"\n          name=\"external-link\"\n          :size=\"4\"\n          class=\"self-center\"\n          rtl-flip\n        />\n      </div>\n    </VItem>\n  </VItemGroup>\n  <ul v-else>\n    <li v-for=\"page in allPages\" :key=\"page.id\">\n      <VLink\n        class=\"flex flex-row rounded-sm hover:underline disabled:text-disabled\"\n        :class=\"[\n          { 'font-semibold': currentPage === page.id },\n          { 'text-default': mode === 'light' },\n          navLinkClasses,\n        ]\"\n        :href=\"page.link\"\n        @click=\"onClick\"\n        >{{ $t(page.name)\n        }}<VIcon\n          v-if=\"isLinkExternal(page)\"\n          name=\"external-link\"\n          :size=\"externalIconSize\"\n          class=\"ms-2 self-center\"\n          rtl-flip\n      /></VLink>\n    </li>\n  </ul>\n</template>\n"],"names":["usePages","localePath","useLocalePath","pages","route","useRoute","currentPageId","computed","getRouteNameString","props","__props","emit","__emit","allPages","currentPage","onClick","isLinkExternal","item","externalIconSize"],"mappings":"+sBAKA,SAAwBA,GAAW,CACjC,MAAMC,EAAaC,EAAc,EAE3BC,EAAQ,CACZ,CACE,GAAI,QACJ,KAAM,mBACN,KAAMF,EAAW,QAAQ,CAC3B,EACA,CACE,GAAI,WACJ,KAAM,sBACN,KAAM,+CACR,EACA,CACE,GAAI,UACJ,KAAM,qBACN,KAAMA,EAAW,UAAU,CAC7B,EACA,CACE,GAAI,cACJ,KAAM,wBACN,KAAMA,EAAW,cAAc,CACjC,EACA,CACE,GAAI,eACJ,KAAM,yBACN,KAAM,gDACR,EACA,CACE,GAAI,MACJ,KAAM,iBACN,KAAM,+BACR,EACA,CACE,GAAI,QACJ,KAAM,mBACN,KAAM,kDACR,EACA,CACE,GAAI,UACJ,KAAM,qBACN,KAAMA,EAAW,UAAU,CAC7B,EACA,CACE,GAAI,WACJ,KAAM,sBACN,KAAMA,EAAW,WAAW,CAAA,CAEhC,EAEMG,EAAQC,EAAS,EAKjBC,EAAgBC,EACpB,IAAMC,EAAmBJ,CAAK,EAAE,MAAM,IAAI,EAAE,CAAC,GAAK,EACpD,EAEA,MAAO,CAAE,IAAKD,EAAO,QAASG,CAAc,CAC9C,uQCxDA,MAAMG,EAAQC,EAqBRC,EAAOC,EAIP,CAAE,IAAKC,EAAU,QAASC,CAAA,EAAgBd,EAAS,EAInDe,EAAU,IAAMJ,EAAK,OAAO,EAE5BK,EAAkBC,GACtB,CAACA,EAAK,KAAK,WAAW,GAAG,EAErBC,EAAmBX,EAAS,IAAOE,EAAM,UAAY,EAAI,CAAE"}