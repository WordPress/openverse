{"version":3,"file":"DJyfWqgd.js","sources":["../../src/composables/use-icon-names.ts"],"sourcesContent":["import { computed, onMounted, ref, watch } from \"vue\"\n\nimport type { License } from \"#shared/constants/license\"\nimport { getElements } from \"#shared/utils/license\"\nimport { useDarkMode } from \"~/composables/use-dark-mode\"\n\n/**\n * Generate the names for `VIcon` components based on the license and color mode.\n * The value is updated on mounted and when the color mode changes.\n *\n * This is necessary to prevent client-server mismatch: the server does not have access\n * to media queries, so the `system` color mode always defaults to \"light\".\n * @param license - the license to generate icons for\n * @param filterOutCc - whether to filter out the `cc` from the list of icons\n */\nexport const useIconNames = ({\n  license,\n  filterOutCc,\n}: {\n  license: License\n  filterOutCc: boolean\n}) => {\n  const getIconNames = (elements: string[], colorMode: \"dark\" | \"light\") => {\n    return elements.map((element) => `licenses/${element}-${colorMode}`)\n  }\n  const { effectiveColorMode, serverColorMode } = useDarkMode()\n\n  const icons = computed(() => {\n    const elements = getElements(license)\n    return filterOutCc\n      ? elements.filter((element) => element !== \"cc\")\n      : elements\n  })\n\n  const iconNames = ref(getIconNames(icons.value, serverColorMode.value))\n\n  onMounted(() => {\n    watch(\n      effectiveColorMode,\n      () => {\n        iconNames.value = getIconNames(icons.value, effectiveColorMode.value)\n      },\n      { immediate: true }\n    )\n  })\n\n  return { iconNames }\n}\n"],"names":["useIconNames","license","filterOutCc","getIconNames","elements","colorMode","element","effectiveColorMode","serverColorMode","useDarkMode","icons","computed","getElements","iconNames","ref","onMounted","watch"],"mappings":"0cAeO,MAAMA,EAAe,CAAC,CAC3B,QAAAC,EACA,YAAAC,CACF,IAGM,CACE,MAAAC,EAAe,CAACC,EAAoBC,IACjCD,EAAS,IAAKE,GAAY,YAAYA,CAAO,IAAID,CAAS,EAAE,EAE/D,CAAE,mBAAAE,EAAoB,gBAAAC,CAAgB,EAAIC,EAAY,EAEtDC,EAAQC,EAAS,IAAM,CACrB,MAAAP,EAAWQ,EAAYX,CAAO,EACpC,OAAOC,EACHE,EAAS,OAAQE,GAAYA,IAAY,IAAI,EAC7CF,CAAA,CACL,EAEKS,EAAYC,EAAIX,EAAaO,EAAM,MAAOF,EAAgB,KAAK,CAAC,EAEtE,OAAAO,EAAU,IAAM,CACdC,EACET,EACA,IAAM,CACJM,EAAU,MAAQV,EAAaO,EAAM,MAAOH,EAAmB,KAAK,CACtE,EACA,CAAE,UAAW,EAAK,CACpB,CAAA,CACD,EAEM,CAAE,UAAAM,CAAU,CACrB"}