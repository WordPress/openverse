{"version":3,"file":"BHjeR4Hq.js","sources":["../../src/components/VRecentSearches/VRecentSearches.vue"],"sourcesContent":["<script setup lang=\"ts\">\n/**\n * List the recent searches of the user allowing them to go back to a previous\n * search. These searches are saved locally and never shared with the server.\n */\nimport VButton from \"~/components/VButton.vue\"\nimport VIcon from \"~/components/VIcon/VIcon.vue\"\nimport VIconButton from \"~/components/VIconButton/VIconButton.vue\"\n\nconst props = withDefaults(\n  defineProps<{\n    /**\n     * the list of saved past searches\n     */\n    entries?: string[]\n    /**\n     * the index of the currently selected entry\n     */\n    selectedIdx?: number\n    /**\n     * the desktop popover is bordered, and the mobile element is not\n     */\n    bordered?: boolean\n  }>(),\n  {\n    entries: () => [],\n    selectedIdx: undefined,\n    bordered: true,\n  }\n)\n\nconst emit = defineEmits<{\n  select: [number]\n  clear: [string?]\n  \"last-tab\": []\n}>()\n\nconst handleClick = (idx: number) => {\n  emit(\"select\", idx)\n}\nconst handleClear = (entry?: string) => {\n  emit(\"clear\", entry)\n}\nconst handleTab = (idx: number) => {\n  if (idx === props.entries.length - 1) {\n    emit(\"last-tab\")\n  }\n}\n</script>\n\n<template>\n  <div\n    class=\"flex flex-col rounded-sm bg-default\"\n    :class=\"{ 'border border-default p-2 shadow-el-2': bordered }\"\n    data-testid=\"recent-searches\"\n  >\n    <div\n      class=\"flex h-10 flex-row items-center justify-between ps-3\"\n      :class=\"{ 'pe-1': !bordered }\"\n    >\n      <!-- Left margin to align with the text of recent searches. -->\n      <span class=\"category\">\n        {{ $t(\"recentSearches.heading\") }}\n      </span>\n      <VButton\n        v-show=\"entries.length\"\n        variant=\"transparent-gray\"\n        class=\"label-bold\"\n        size=\"small\"\n        :aria-label=\"$t('recentSearches.clear.label')\"\n        @click=\"handleClear()\"\n      >\n        {{ $t(\"recentSearches.clear.text\") }}\n      </VButton>\n    </div>\n\n    <ul\n      v-if=\"entries.length\"\n      id=\"recent-searches-list\"\n      role=\"listbox\"\n      :aria-label=\"$t('recentSearches.heading')\"\n    >\n      <!-- eslint-disable vuejs-accessibility/interactive-supports-focus Combobox descendants only have visual focus. -->\n      <!-- eslint-disable vuejs-accessibility/click-events-have-key-events Key events handled by input field of combobox. -->\n      <li\n        v-for=\"(entry, idx) in entries\"\n        :id=\"`option-${idx}`\"\n        :key=\"entry\"\n        role=\"option\"\n        class=\"group/entry label-regular flex h-10 flex-row items-center gap-2 rounded-sm border-1.5 pe-1 ps-2 hover:bg-secondary\"\n        :class=\"idx === selectedIdx ? 'border-focus' : 'border-tx'\"\n        :aria-selected=\"idx === selectedIdx\"\n        @click=\"handleClick(idx)\"\n      >\n        <VIcon name=\"search\" />\n        {{ entry }}\n        <VIconButton\n          variant=\"transparent-gray\"\n          :icon-props=\"{ name: 'close-small' }\"\n          size=\"small\"\n          :label=\"$t('recentSearches.clearSingle.label', { entry })\"\n          class=\"ms-auto group-hover/entry:flex\"\n          :class=\"{ hidden: bordered }\"\n          @click.stop=\"handleClear(entry)\"\n          @keydown.tab.exact=\"handleTab(idx)\"\n        />\n      </li>\n      <!-- eslint-enable -->\n    </ul>\n    <span\n      v-else\n      class=\"description-regular flex h-10 flex-row items-center ps-3\"\n      :class=\"{ 'pe-1': !bordered }\"\n    >\n      {{ $t(\"recentSearches.none\") }}\n    </span>\n\n    <span\n      class=\"mt-auto p-3 text-sm leading-close text-secondary lg:leading-snug\"\n    >\n      {{ $t(\"recentSearches.disclaimer\") }}\n    </span>\n  </div>\n</template>\n"],"names":["props","__props","emit","__emit","handleClick","idx","handleClear","entry","handleTab"],"mappings":"o3BASA,MAAMA,EAAQC,EAsBRC,EAAOC,EAMPC,EAAeC,GAAgB,CACnCH,EAAK,SAAUG,CAAG,CACpB,EACMC,EAAeC,GAAmB,CACtCL,EAAK,QAASK,CAAK,CACrB,EACMC,EAAaH,GAAgB,CAC7BA,IAAQL,EAAM,QAAQ,OAAS,GACjCE,EAAK,UAAU,CAEnB"}