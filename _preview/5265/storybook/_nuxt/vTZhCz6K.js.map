{"version":3,"file":"vTZhCz6K.js","sources":["../../src/components/VSafeBrowsing/VSafeBrowsing.vue"],"sourcesContent":["<script setup lang=\"ts\">\n/**\n * Contains toggles to determine the users preferences towards fetching results\n * that may contain sensitive content and subsequently blurring them to prevent\n * accidental exposure or showing them directly.\n */\nimport { useLocalePath, useNuxtApp } from \"#imports\"\nimport { computed } from \"vue\"\n\nimport { ON, OFF } from \"#shared/constants/feature-flag\"\nimport { useFeatureFlagStore } from \"~/stores/feature-flag\"\nimport { useUiStore } from \"~/stores/ui\"\n\nimport VCheckbox, { CheckboxAttrs } from \"~/components/VCheckbox/VCheckbox.vue\"\nimport VLink from \"~/components/VLink.vue\"\n\nconst localePath = useLocalePath()\n\nconst sensitivityPath = computed(() => localePath(\"/sensitive-content\"))\n\nconst featureFlagStore = useFeatureFlagStore()\nconst { $sendCustomEvent } = useNuxtApp()\n\nconst fetchSensitive = computed(() => featureFlagStore.isOn(\"fetch_sensitive\"))\nconst setFetchSensitive = (data: Omit<CheckboxAttrs, \"disabled\">) => {\n  const checked = data.checked ?? false\n  featureFlagStore.toggleFeature(\"fetch_sensitive\", checked ? ON : OFF)\n  $sendCustomEvent(\"TOGGLE_FETCH_SENSITIVE\", { checked })\n\n  if (!checked) {\n    // If sensitive content is not fetched, there is nothing to blur/unblur.\n    // In this case, we reset blurring to its default value.\n    setBlurSensitive({ checked: true })\n  }\n}\n\nconst uiStore = useUiStore()\nconst blurSensitive = computed(() => uiStore.shouldBlurSensitive)\nconst setBlurSensitive = (data: { checked?: boolean }) => {\n  const checked = data.checked ?? false\n  uiStore.setShouldBlurSensitive(checked)\n  $sendCustomEvent(\"TOGGLE_BLUR_SENSITIVE\", { checked })\n}\n\nconst toggles = computed(() => [\n  {\n    name: \"fetchSensitive\",\n    state: fetchSensitive.value,\n    switchFn: setFetchSensitive,\n  },\n  {\n    name: \"blurSensitive\",\n    state: blurSensitive.value,\n    switchFn: setBlurSensitive,\n  },\n])\n\nconst isDisabled = (name: string) =>\n  name === \"blurSensitive\" && !fetchSensitive.value\n</script>\n\n<template>\n  <section id=\"safe-browsing\" aria-labelledby=\"safe-browsing-heading\">\n    <header class=\"relative mb-6 flex items-center justify-between\">\n      <h4 id=\"safe-browsing-heading\" class=\"caption-bold uppercase\">\n        {{ $t(\"filters.safeBrowsing.title\") }}\n      </h4>\n    </header>\n    <i18n-t\n      scope=\"global\"\n      tag=\"p\"\n      keypath=\"filters.safeBrowsing.desc\"\n      class=\"label-regular\"\n    >\n      <template #sensitive>\n        <VLink :href=\"sensitivityPath\">{{\n          $t(\"filters.safeBrowsing.sensitive\")\n        }}</VLink>\n      </template>\n    </i18n-t>\n    <form class=\"safe-browsing-form\">\n      <fieldset class=\"mb-10 mt-8 flex flex-col gap-8\">\n        <div v-for=\"toggle in toggles\" :key=\"toggle.name\">\n          <VCheckbox\n            :id=\"toggle.name\"\n            class=\"flex-row-reverse justify-between\"\n            :value=\"toggle.name\"\n            :checked=\"toggle.state\"\n            :disabled=\"isDisabled(toggle.name)\"\n            is-switch\n            @change=\"toggle.switchFn\"\n          >\n            <span class=\"label-bold\">{{\n              $t(`filters.safeBrowsing.toggles.${toggle.name}.title`)\n            }}</span>\n          </VCheckbox>\n          <p\n            class=\"label-regular mt-2\"\n            :class=\"{ 'text-disabled': isDisabled(toggle.name) }\"\n          >\n            {{ $t(`filters.safeBrowsing.toggles.${toggle.name}.desc`) }}\n          </p>\n        </div>\n      </fieldset>\n    </form>\n  </section>\n</template>\n"],"names":["localePath","useLocalePath","sensitivityPath","computed","featureFlagStore","useFeatureFlagStore","$sendCustomEvent","useNuxtApp","fetchSensitive","setFetchSensitive","data","checked","ON","OFF","setBlurSensitive","uiStore","useUiStore","blurSensitive","toggles","isDisabled","name"],"mappings":"g9BAgBA,MAAMA,EAAaC,EAAc,EAE3BC,EAAkBC,EAAS,IAAMH,EAAW,oBAAoB,CAAC,EAEjEI,EAAmBC,EAAoB,EACvC,CAAE,iBAAAC,CAAiB,EAAIC,EAAW,EAElCC,EAAiBL,EAAS,IAAMC,EAAiB,KAAK,iBAAiB,CAAC,EACxEK,EAAqBC,GAA0C,CAC7D,MAAAC,EAAUD,EAAK,SAAW,GAChCN,EAAiB,cAAc,kBAAmBO,EAAUC,EAAKC,CAAG,EACnDP,EAAA,yBAA0B,CAAE,QAAAK,EAAS,EAEjDA,GAGcG,EAAA,CAAE,QAAS,GAAM,CAEtC,EAEMC,EAAUC,EAAW,EACrBC,EAAgBd,EAAS,IAAMY,EAAQ,mBAAmB,EAC1DD,EAAoBJ,GAAgC,CAClD,MAAAC,EAAUD,EAAK,SAAW,GAChCK,EAAQ,uBAAuBJ,CAAO,EACrBL,EAAA,wBAAyB,CAAE,QAAAK,EAAS,CACvD,EAEMO,EAAUf,EAAS,IAAM,CAC7B,CACE,KAAM,iBACN,MAAOK,EAAe,MACtB,SAAUC,CACZ,EACA,CACE,KAAM,gBACN,MAAOQ,EAAc,MACrB,SAAUH,CAAA,CACZ,CACD,EAEKK,EAAcC,GAClBA,IAAS,iBAAmB,CAACZ,EAAe"}