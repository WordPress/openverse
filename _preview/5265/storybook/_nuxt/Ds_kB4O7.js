import{d as Ae}from"./Z8zkSHZ1.js";import{I as D,A as k,V as Pe,M as _e,b as T,c as Ce,m as zt,g as Jt,e as ct,a as F}from"./CAa63J2U.js";import{c as Wt,N as Y}from"./BAdCBbtP.js";import{r as lt,h as pe}from"./Dl1S6mqo.js";import"./CWoQmekT.js";import{l as Kt,d as Be,w as ut}from"./TLA9Fm80.js";import{f as ae}from"./Ck0CgHQL.js";import{a as Qt}from"./aHnQ5-ra.js";import{g as Gt}from"./ghAvikQd.js";import{f as Xt,m as Q}from"./Bkc2CSET.js";import{u as ft}from"./D8qJDlnG.js";import{u as xe}from"./I6oWuQE1.js";import{c as Yt}from"./Cyc9srVp.js";import{a as dt,u as V}from"./VcnMPoS3.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="02f9b0d3-b0b5-4bce-baca-3044dc5ea2f3",e._sentryDebugIdIdentifier="sentry-dbid-02f9b0d3-b0b5-4bce-baca-3044dc5ea2f3")}catch{}})();const Zt=[429,500,404],ht=e=>e&&Zt.includes(e),er=e=>{const{statusCode:t,code:r}=e;return!(ht(t)||r===Y)},Tn=e=>!ht(e.statusCode)&&Wt.includes(e.code);function U(e){const t=Object.getOwnPropertyNames(e);for(const r of t){const s=e[r];s&&typeof s=="object"&&U(s)}return Object.freeze(e)}const me=U({[D]:["licenseTypes","licenses","imageCategories","imageExtensions","aspectRatios","sizes","imageProviders"],[k]:["licenseTypes","licenses","audioCategories","audioExtensions","lengths","audioProviders"],[Pe]:[],[_e]:[],[T]:["licenseTypes","licenses"]}),tr=U({[T]:[],[D]:["imageCategories","imageExtensions","aspectRatios","sizes","imageProviders"],[k]:["audioCategories","audioExtensions","lengths","audioProviders"],[Pe]:[],[_e]:[]}),rr=U({licenses:[...Qt],licenseTypes:["commercial","modification"],audioCategories:["audiobook","music","news","podcast","pronunciation","sound_effect"],imageCategories:["photograph","illustration","digitized_artwork"],audioExtensions:["flac","mid","mp3","oga","ogg","opus","wav","webm"],imageExtensions:["jpg","png","gif","svg"],aspectRatios:["tall","wide","square"],lengths:["shortest","short","medium","long"],sizes:["small","medium","large"],audioProviders:[],imageProviders:[]}),sr=()=>Object.entries(rr).reduce((e,[t,r])=>({...e,[t]:r.map(s=>({code:s,name:`filters.${t}.${s}`,checked:!1}))}),{}),Ue=U(sr()),pt="user_reported_sensitive",mt="provider_supplied_sensitive",gt="sensitive_text",On=[pt,mt,gt],Ne="unstable__include_sensitive_results",nr="unstable__sensitivity";var ce,qe;function ir(){if(qe)return ce;qe=1,ce=t;function e(s){return s instanceof Buffer?Buffer.from(s):new s.constructor(s.buffer.slice(),s.byteOffset,s.length)}function t(s){if(s=s||{},s.circles)return r(s);const n=new Map;if(n.set(Date,l=>new Date(l)),n.set(Map,(l,f)=>new Map(o(Array.from(l),f))),n.set(Set,(l,f)=>new Set(o(Array.from(l),f))),s.constructorHandlers)for(const l of s.constructorHandlers)n.set(l[0],l[1]);let i=null;return s.proto?h:c;function o(l,f){const a=Object.keys(l),d=new Array(a.length);for(let y=0;y<a.length;y++){const p=a[y],g=l[p];typeof g!="object"||g===null?d[p]=g:g.constructor!==Object&&(i=n.get(g.constructor))?d[p]=i(g,f):ArrayBuffer.isView(g)?d[p]=e(g):d[p]=f(g)}return d}function c(l){if(typeof l!="object"||l===null)return l;if(Array.isArray(l))return o(l,c);if(l.constructor!==Object&&(i=n.get(l.constructor)))return i(l,c);const f={};for(const a in l){if(Object.hasOwnProperty.call(l,a)===!1)continue;const d=l[a];typeof d!="object"||d===null?f[a]=d:d.constructor!==Object&&(i=n.get(d.constructor))?f[a]=i(d,c):ArrayBuffer.isView(d)?f[a]=e(d):f[a]=c(d)}return f}function h(l){if(typeof l!="object"||l===null)return l;if(Array.isArray(l))return o(l,h);if(l.constructor!==Object&&(i=n.get(l.constructor)))return i(l,h);const f={};for(const a in l){const d=l[a];typeof d!="object"||d===null?f[a]=d:d.constructor!==Object&&(i=n.get(d.constructor))?f[a]=i(d,h):ArrayBuffer.isView(d)?f[a]=e(d):f[a]=h(d)}return f}}function r(s){const n=[],i=[],o=new Map;if(o.set(Date,a=>new Date(a)),o.set(Map,(a,d)=>new Map(h(Array.from(a),d))),o.set(Set,(a,d)=>new Set(h(Array.from(a),d))),s.constructorHandlers)for(const a of s.constructorHandlers)o.set(a[0],a[1]);let c=null;return s.proto?f:l;function h(a,d){const y=Object.keys(a),p=new Array(y.length);for(let g=0;g<y.length;g++){const m=y[g],b=a[m];if(typeof b!="object"||b===null)p[m]=b;else if(b.constructor!==Object&&(c=o.get(b.constructor)))p[m]=c(b,d);else if(ArrayBuffer.isView(b))p[m]=e(b);else{const R=n.indexOf(b);R!==-1?p[m]=i[R]:p[m]=d(b)}}return p}function l(a){if(typeof a!="object"||a===null)return a;if(Array.isArray(a))return h(a,l);if(a.constructor!==Object&&(c=o.get(a.constructor)))return c(a,l);const d={};n.push(a),i.push(d);for(const y in a){if(Object.hasOwnProperty.call(a,y)===!1)continue;const p=a[y];if(typeof p!="object"||p===null)d[y]=p;else if(p.constructor!==Object&&(c=o.get(p.constructor)))d[y]=c(p,l);else if(ArrayBuffer.isView(p))d[y]=e(p);else{const g=n.indexOf(p);g!==-1?d[y]=i[g]:d[y]=l(p)}}return n.pop(),i.pop(),d}function f(a){if(typeof a!="object"||a===null)return a;if(Array.isArray(a))return h(a,f);if(a.constructor!==Object&&(c=o.get(a.constructor)))return c(a,f);const d={};n.push(a),i.push(d);for(const y in a){const p=a[y];if(typeof p!="object"||p===null)d[y]=p;else if(p.constructor!==Object&&(c=o.get(p.constructor)))d[y]=c(p,f);else if(ArrayBuffer.isView(p))d[y]=e(p);else{const g=n.indexOf(p);g!==-1?d[y]=i[g]:d[y]=f(p)}}return n.pop(),i.pop(),d}}return ce}var or=ir();const ar=Gt(or),ge=ar();function cr(e,t){if(e===t)return!0;const r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;let n=0;for(;n<r.length;){const i=r[n],o=e[i];if(o===void 0&&!t.hasOwnProperty(i)||o!==t[i])return!1;n++}return!0}function lr(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0,s=e.length;r<s;r++)if(e[r]!==t[r])return!1;return!0}function ur(e,t){if(e&&t){if(e.constructor===Object&&t.constructor===Object)return cr(e,t);if(Array.isArray(e)&&Array.isArray(t))return lr(e,t)}return e===t}const ye={licenses:"license",licenseTypes:"license_type",audioCategories:"category",imageCategories:"category",audioExtensions:"extension",imageExtensions:"extension",lengths:"length",aspectRatios:"aspect_ratio",sizes:"size",audioProviders:"source",imageProviders:"source"},yt=e=>Ce.includes(e)?[...me[e]]:[],fr=e=>{const t=e.filter(r=>r.checked).map(r=>r.code).join(",");return t===Ne?"true":t},dr=(e,t=T,r=!0)=>yt(t).reduce((n,i)=>{const o=ye[i],c=fr(e[i]);return(c||!r)&&(n[o]=c),n},{}),hr=e=>{const t=new RegExp(`/search/(${zt.join("|")})`),r=e.match(t);return r===null?T:r[1]},pr=(e,t)=>(e!==""&&e.split(",").forEach(s=>{const n=t.findIndex(i=>i.code===s);n>-1&&(t[n]={...t[n],checked:!0})}),t),mr=({query:e,searchType:t="image",defaultFilters:r})=>{const s=ge(r),n=yt(t),i=["audioProviders","imageProviders","audioExtensions","imageExtensions","audioCategories","imageCategories"];return n.forEach(o=>{if(i.includes(o)){if(o.startsWith(t)){const c=e[ye[o]];c&&(s[o]=pr(c,s[o]))}}else{const c=ye[o];e[c]&&(c===Ne&&e[c].length>0?s[o][0].checked=!0:e[c].split(",").forEach(l=>{const f=s[o].findIndex(a=>a.code===l);f>=0&&(s[o][f].checked=!0)}))}}),s},Fn=(e,t)=>(delete e.q,delete t.q,ur(e,t)),gr=e=>{const t={};return Object.keys(e).forEach(r=>{const s=Xt(e[r]);s&&(t[r]=s)}),t},B=e=>Ce.includes(e);function St(e){return e==="frontend"?{}:xe().isOn("fetch_sensitive")?{[Ne]:"true"}:{}}function le(e,t,r,s){const n=r.trim();return B(e)?{q:n,...dr(t,e),...St(s)}:{q:n}}function yr(e){const{collection:t,...r}=e,s={collection:t,unstable__collection:t,...r,...St("API")};return"tag"in s&&(s.unstable__tag=s.tag),s}const He=Ae("search",{state:()=>({searchType:T,searchTerm:"",strategy:"default",collectionParams:null,backToSearchPath:"",localSearchTerm:"",recentSearches:ae("recent-searches",[]),filters:ge(Ue),savedSearchCount:dt().public.savedSearchCount}),hydrate(e){const t=ae("recent-searches",[]);e.searchTerm&&(t.value=[e.searchTerm,...t.value.filter(r=>r!==e.searchTerm)].slice(0,e.savedSearchCount)),e.recentSearches=t.value},getters:{filterCategories(e){return Object.keys(e.filters)},apiSearchQueryParams(e){return le(e.searchType,e.filters,e.searchTerm,"API")},appliedFilterCount(e){return me[e.searchType].reduce((r,s)=>r+e.filters[s].filter(n=>n.checked).length,0)},searchFilters(e){return me[e.searchType].reduce((t,r)=>(t[r]=this.filters[r],t),{})},isAnyFilterApplied(){return Object.entries(this.searchFilters).some(([,t])=>t.some(r=>r.checked))},searchTypeIsSupported(e){return B(e.searchType)},collectionValue(){if(this.collectionParams===null)return null;switch(this.collectionParams.collection){case"creator":return`${this.collectionParams.source}/${this.collectionParams.creator}`;case"source":return this.collectionParams.source;case"tag":return this.collectionParams.tag}},searchParamsForEvent(){var e;return{kind:this.strategy==="default"?"search":"collection",query:this.strategy==="default"?this.searchTerm:this.collectionValue??"",searchType:B(this.searchType)?this.searchType:T,collectionType:((e=this.collectionParams)==null?void 0:e.collection)??"null"}}},actions:{getApiRequestQuery(e){return this.collectionParams===null?le(e,this.filters,this.searchTerm,"API"):yr(this.collectionParams)},setBackToSearchPath(e){this.backToSearchPath=e},updateSearchPath({type:e,searchTerm:t}={}){return e&&this.setSearchType(e),t&&this.setSearchTerm(t),this.getSearchPath()},getSearchPath({type:e,query:t}={}){const r=e??this.searchType,s=t??le(r,this.filters,this.searchTerm,"frontend");return V().$localePath({path:Jt(r),query:s})},getCollectionPath({type:e,collectionParams:t}){const r=`/${e}/collection`,{collection:s,...n}=t;return V().$localePath({path:r,query:n})},setSearchType(e){if(!xe().isOn("additional_search_types")&&ct(e))throw new Error(`Please enable the 'additional_search_types' flag to use the ${e}`);this.searchType=e,this.clearOtherMediaTypeFilters(e)},setSearchTerm(e){const t=e?e.trim():"";this.searchTerm!==t&&(this.searchTerm=t,this.localSearchTerm=t,this.collectionParams=null,this.strategy="default",this.addRecentSearch(t))},setCollectionState(e,t){this.collectionParams=e,this.strategy=e.collection,this.setSearchType(t),this.clearFilters(),at().clearMedia()},setSearchStateFromUrl({path:e,urlQuery:t}){const r=gr(t);if(this.strategy="default",this.collectionParams=null,at().clearMedia(),this.setSearchTerm(r.q),this.searchType=hr(e),!B(this.searchType))return;const n=mr({query:r,searchType:this.searchType,defaultFilters:this.getBaseFiltersWithProviders()});this.replaceFilters(n)},updateRecentSearches(e){ae("recent-searches",e).value=e,this.recentSearches=e},addRecentSearch(e){const t=[e,...this.recentSearches.filter(r=>r!==e)].slice(0,this.savedSearchCount);this.updateRecentSearches(t)},clearRecentSearches(e){const t=e?this.recentSearches.filter(r=>r!==e):[];this.updateRecentSearches(t)},getBaseFiltersWithProviders(){const e=t=>this.filters[`${t}Providers`].map(r=>({...r,checked:!1}));return{...ge(Ue),audioProviders:e(k),imageProviders:e(D)}},async initProviderFilters(){const e=ft();for(const t of F)this.updateProviderFilters({mediaType:t,providers:e.providers[t]})},updateProviderFilters({mediaType:e,providers:t}){const r=`${e}Providers`,s=this.filters[r]?[...this.filters[r]]:[];this.filters[r]=t.map(n=>{const i=s.findIndex(c=>c.code===n.source_name),o=i>=0?s[i].checked:!1;return{code:n.source_name,name:n.display_name,checked:o}})},toggleFilter({filterType:e,codeIdx:t,code:r}){return this.setFilter({filterType:e,codeIdx:t,code:r,toggle:!0})},setFilter({filterType:e,codeIdx:t,code:r,value:s=!0,toggle:n=!1}){if(typeof t>"u"&&typeof r>"u")throw new Error(`Cannot update filter of type ${e}. Use code or codeIdx parameter`);const i=this.filters[e],o=t??i.findIndex(c=>c.code===r);return this.filters[e][o].checked=n?!this.filters[e][o].checked:s,this.filters[e][o].checked},clearFilters(){for(const e of this.filterCategories)for(const t of this.filters[e])t.checked=!1},clearOtherMediaTypeFilters(e){const r=Ce.filter(s=>s!==e).reduce((s,n)=>[...s,...tr[n]],[]);this.filterCategories.forEach(s=>{r.includes(s)&&(this.filters[s]=this.filters[s].map(n=>({...n,checked:!1})))})},replaceFilters(e){this.filterCategories.forEach(t=>{this.filters[t]=e[t]})},isFilterDisabled(e,t){if(!["licenseTypes","licenses"].includes(t))return!1;if(e.code==="commercial"||e.code==="modification"){const r={commercial:"nc",modification:"nd"}[e.code];return this.filters.licenses.some(s=>s.code.includes(r)&&s.checked)}else{const r=[];return e.code.includes("nc")&&r.push("commercial"),e.code.includes("nd")&&r.push("modification"),this.filters.licenseTypes.some(s=>r.includes(s.code)&&s.checked)}}}});function Et(e,t){return function(){return e.apply(t,arguments)}}const{toString:Sr}=Object.prototype,{getPrototypeOf:ke}=Object,te=(e=>t=>{const r=Sr.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),C=e=>(e=e.toLowerCase(),t=>te(t)===e),re=e=>t=>typeof t===e,{isArray:q}=Array,z=re("undefined");function Er(e){return e!==null&&!z(e)&&e.constructor!==null&&!z(e.constructor)&&A(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const bt=C("ArrayBuffer");function br(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&bt(e.buffer),t}const wr=re("string"),A=re("function"),wt=re("number"),se=e=>e!==null&&typeof e=="object",Rr=e=>e===!0||e===!1,G=e=>{if(te(e)!=="object")return!1;const t=ke(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Tr=C("Date"),Or=C("File"),Fr=C("Blob"),Ar=C("FileList"),Pr=e=>se(e)&&A(e.pipe),_r=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||A(e.append)&&((t=te(e))==="formdata"||t==="object"&&A(e.toString)&&e.toString()==="[object FormData]"))},Cr=C("URLSearchParams"),[xr,Nr,kr,Ir]=["ReadableStream","Request","Response","Headers"].map(C),Dr=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function J(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let s,n;if(typeof e!="object"&&(e=[e]),q(e))for(s=0,n=e.length;s<n;s++)t.call(null,e[s],s,e);else{const i=r?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let c;for(s=0;s<o;s++)c=i[s],t.call(null,e[c],c,e)}}function Rt(e,t){t=t.toLowerCase();const r=Object.keys(e);let s=r.length,n;for(;s-- >0;)if(n=r[s],t===n.toLowerCase())return n;return null}const j=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Tt=e=>!z(e)&&e!==j;function Se(){const{caseless:e}=Tt(this)&&this||{},t={},r=(s,n)=>{const i=e&&Rt(t,n)||n;G(t[i])&&G(s)?t[i]=Se(t[i],s):G(s)?t[i]=Se({},s):q(s)?t[i]=s.slice():t[i]=s};for(let s=0,n=arguments.length;s<n;s++)arguments[s]&&J(arguments[s],r);return t}const Lr=(e,t,r,{allOwnKeys:s}={})=>(J(t,(n,i)=>{r&&A(n)?e[i]=Et(n,r):e[i]=n},{allOwnKeys:s}),e),jr=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Mr=(e,t,r,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},vr=(e,t,r,s)=>{let n,i,o;const c={};if(t=t||{},e==null)return t;do{for(n=Object.getOwnPropertyNames(e),i=n.length;i-- >0;)o=n[i],(!s||s(o,e,t))&&!c[o]&&(t[o]=e[o],c[o]=!0);e=r!==!1&&ke(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},Br=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const s=e.indexOf(t,r);return s!==-1&&s===r},Ur=e=>{if(!e)return null;if(q(e))return e;let t=e.length;if(!wt(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},qr=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&ke(Uint8Array)),Hr=(e,t)=>{const s=(e&&e[Symbol.iterator]).call(e);let n;for(;(n=s.next())&&!n.done;){const i=n.value;t.call(e,i[0],i[1])}},$r=(e,t)=>{let r;const s=[];for(;(r=e.exec(t))!==null;)s.push(r);return s},Vr=C("HTMLFormElement"),zr=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,s,n){return s.toUpperCase()+n}),$e=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),Jr=C("RegExp"),Ot=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),s={};J(r,(n,i)=>{let o;(o=t(n,i,e))!==!1&&(s[i]=o||n)}),Object.defineProperties(e,s)},Wr=e=>{Ot(e,(t,r)=>{if(A(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const s=e[r];if(A(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Kr=(e,t)=>{const r={},s=n=>{n.forEach(i=>{r[i]=!0})};return q(e)?s(e):s(String(e).split(t)),r},Qr=()=>{},Gr=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t,ue="abcdefghijklmnopqrstuvwxyz",Ve="0123456789",Ft={DIGIT:Ve,ALPHA:ue,ALPHA_DIGIT:ue+ue.toUpperCase()+Ve},Xr=(e=16,t=Ft.ALPHA_DIGIT)=>{let r="";const{length:s}=t;for(;e--;)r+=t[Math.random()*s|0];return r};function Yr(e){return!!(e&&A(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const Zr=e=>{const t=new Array(10),r=(s,n)=>{if(se(s)){if(t.indexOf(s)>=0)return;if(!("toJSON"in s)){t[n]=s;const i=q(s)?[]:{};return J(s,(o,c)=>{const h=r(o,n+1);!z(h)&&(i[c]=h)}),t[n]=void 0,i}}return s};return r(e,0)},es=C("AsyncFunction"),ts=e=>e&&(se(e)||A(e))&&A(e.then)&&A(e.catch),At=((e,t)=>e?setImmediate:t?((r,s)=>(j.addEventListener("message",({source:n,data:i})=>{n===j&&i===r&&s.length&&s.shift()()},!1),n=>{s.push(n),j.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",A(j.postMessage)),rs=typeof queueMicrotask<"u"?queueMicrotask.bind(j):typeof process<"u"&&process.nextTick||At,u={isArray:q,isArrayBuffer:bt,isBuffer:Er,isFormData:_r,isArrayBufferView:br,isString:wr,isNumber:wt,isBoolean:Rr,isObject:se,isPlainObject:G,isReadableStream:xr,isRequest:Nr,isResponse:kr,isHeaders:Ir,isUndefined:z,isDate:Tr,isFile:Or,isBlob:Fr,isRegExp:Jr,isFunction:A,isStream:Pr,isURLSearchParams:Cr,isTypedArray:qr,isFileList:Ar,forEach:J,merge:Se,extend:Lr,trim:Dr,stripBOM:jr,inherits:Mr,toFlatObject:vr,kindOf:te,kindOfTest:C,endsWith:Br,toArray:Ur,forEachEntry:Hr,matchAll:$r,isHTMLForm:Vr,hasOwnProperty:$e,hasOwnProp:$e,reduceDescriptors:Ot,freezeMethods:Wr,toObjectSet:Kr,toCamelCase:zr,noop:Qr,toFiniteNumber:Gr,findKey:Rt,global:j,isContextDefined:Tt,ALPHABET:Ft,generateString:Xr,isSpecCompliantForm:Yr,toJSONObject:Zr,isAsyncFn:es,isThenable:ts,setImmediate:At,asap:rs};function S(e,t,r,s,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),s&&(this.request=s),n&&(this.response=n)}u.inherits(S,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:u.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Pt=S.prototype,_t={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{_t[e]={value:e}});Object.defineProperties(S,_t);Object.defineProperty(Pt,"isAxiosError",{value:!0});S.from=(e,t,r,s,n,i)=>{const o=Object.create(Pt);return u.toFlatObject(e,o,function(h){return h!==Error.prototype},c=>c!=="isAxiosError"),S.call(o,e.message,t,r,s,n),o.cause=e,o.name=e.name,i&&Object.assign(o,i),o};const ss=null;function Ee(e){return u.isPlainObject(e)||u.isArray(e)}function Ct(e){return u.endsWith(e,"[]")?e.slice(0,-2):e}function ze(e,t,r){return e?e.concat(t).map(function(n,i){return n=Ct(n),!r&&i?"["+n+"]":n}).join(r?".":""):t}function ns(e){return u.isArray(e)&&!e.some(Ee)}const is=u.toFlatObject(u,{},null,function(t){return/^is[A-Z]/.test(t)});function ne(e,t,r){if(!u.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=u.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,m){return!u.isUndefined(m[g])});const s=r.metaTokens,n=r.visitor||f,i=r.dots,o=r.indexes,h=(r.Blob||typeof Blob<"u"&&Blob)&&u.isSpecCompliantForm(t);if(!u.isFunction(n))throw new TypeError("visitor must be a function");function l(p){if(p===null)return"";if(u.isDate(p))return p.toISOString();if(!h&&u.isBlob(p))throw new S("Blob is not supported. Use a Buffer instead.");return u.isArrayBuffer(p)||u.isTypedArray(p)?h&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function f(p,g,m){let b=p;if(p&&!m&&typeof p=="object"){if(u.endsWith(g,"{}"))g=s?g:g.slice(0,-2),p=JSON.stringify(p);else if(u.isArray(p)&&ns(p)||(u.isFileList(p)||u.endsWith(g,"[]"))&&(b=u.toArray(p)))return g=Ct(g),b.forEach(function(E,P){!(u.isUndefined(E)||E===null)&&t.append(o===!0?ze([g],P,i):o===null?g:g+"[]",l(E))}),!1}return Ee(p)?!0:(t.append(ze(m,g,i),l(p)),!1)}const a=[],d=Object.assign(is,{defaultVisitor:f,convertValue:l,isVisitable:Ee});function y(p,g){if(!u.isUndefined(p)){if(a.indexOf(p)!==-1)throw Error("Circular reference detected in "+g.join("."));a.push(p),u.forEach(p,function(b,R){(!(u.isUndefined(b)||b===null)&&n.call(t,b,u.isString(R)?R.trim():R,g,d))===!0&&y(b,g?g.concat(R):[R])}),a.pop()}}if(!u.isObject(e))throw new TypeError("data must be an object");return y(e),t}function Je(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function Ie(e,t){this._pairs=[],e&&ne(e,this,t)}const xt=Ie.prototype;xt.append=function(t,r){this._pairs.push([t,r])};xt.toString=function(t){const r=t?function(s){return t.call(this,s,Je)}:Je;return this._pairs.map(function(n){return r(n[0])+"="+r(n[1])},"").join("&")};function os(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Nt(e,t,r){if(!t)return e;const s=r&&r.encode||os,n=r&&r.serialize;let i;if(n?i=n(t,r):i=u.isURLSearchParams(t)?t.toString():new Ie(t,r).toString(s),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class We{constructor(){this.handlers=[]}use(t,r,s){return this.handlers.push({fulfilled:t,rejected:r,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){u.forEach(this.handlers,function(s){s!==null&&t(s)})}}const kt={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},as=typeof URLSearchParams<"u"?URLSearchParams:Ie,cs=typeof FormData<"u"?FormData:null,ls=typeof Blob<"u"?Blob:null,us={isBrowser:!0,classes:{URLSearchParams:as,FormData:cs,Blob:ls},protocols:["http","https","file","blob","url","data"]},De=typeof window<"u"&&typeof document<"u",fs=(e=>De&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),ds=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",hs=De&&window.location.href||"http://localhost",ps=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:De,hasStandardBrowserEnv:fs,hasStandardBrowserWebWorkerEnv:ds,origin:hs},Symbol.toStringTag,{value:"Module"})),_={...ps,...us};function ms(e,t){return ne(e,new _.classes.URLSearchParams,Object.assign({visitor:function(r,s,n,i){return _.isNode&&u.isBuffer(r)?(this.append(s,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}function gs(e){return u.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function ys(e){const t={},r=Object.keys(e);let s;const n=r.length;let i;for(s=0;s<n;s++)i=r[s],t[i]=e[i];return t}function It(e){function t(r,s,n,i){let o=r[i++];if(o==="__proto__")return!0;const c=Number.isFinite(+o),h=i>=r.length;return o=!o&&u.isArray(n)?n.length:o,h?(u.hasOwnProp(n,o)?n[o]=[n[o],s]:n[o]=s,!c):((!n[o]||!u.isObject(n[o]))&&(n[o]=[]),t(r,s,n[o],i)&&u.isArray(n[o])&&(n[o]=ys(n[o])),!c)}if(u.isFormData(e)&&u.isFunction(e.entries)){const r={};return u.forEachEntry(e,(s,n)=>{t(gs(s),n,r,0)}),r}return null}function Ss(e,t,r){if(u.isString(e))try{return(t||JSON.parse)(e),u.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(0,JSON.stringify)(e)}const W={transitional:kt,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const s=r.getContentType()||"",n=s.indexOf("application/json")>-1,i=u.isObject(t);if(i&&u.isHTMLForm(t)&&(t=new FormData(t)),u.isFormData(t))return n?JSON.stringify(It(t)):t;if(u.isArrayBuffer(t)||u.isBuffer(t)||u.isStream(t)||u.isFile(t)||u.isBlob(t)||u.isReadableStream(t))return t;if(u.isArrayBufferView(t))return t.buffer;if(u.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let c;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return ms(t,this.formSerializer).toString();if((c=u.isFileList(t))||s.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return ne(c?{"files[]":t}:t,h&&new h,this.formSerializer)}}return i||n?(r.setContentType("application/json",!1),Ss(t)):t}],transformResponse:[function(t){const r=this.transitional||W.transitional,s=r&&r.forcedJSONParsing,n=this.responseType==="json";if(u.isResponse(t)||u.isReadableStream(t))return t;if(t&&u.isString(t)&&(s&&!this.responseType||n)){const o=!(r&&r.silentJSONParsing)&&n;try{return JSON.parse(t)}catch(c){if(o)throw c.name==="SyntaxError"?S.from(c,S.ERR_BAD_RESPONSE,this,null,this.response):c}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:_.classes.FormData,Blob:_.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};u.forEach(["delete","get","head","post","put","patch"],e=>{W.headers[e]={}});const Es=u.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),bs=e=>{const t={};let r,s,n;return e&&e.split(`
`).forEach(function(o){n=o.indexOf(":"),r=o.substring(0,n).trim().toLowerCase(),s=o.substring(n+1).trim(),!(!r||t[r]&&Es[r])&&(r==="set-cookie"?t[r]?t[r].push(s):t[r]=[s]:t[r]=t[r]?t[r]+", "+s:s)}),t},Ke=Symbol("internals");function $(e){return e&&String(e).trim().toLowerCase()}function X(e){return e===!1||e==null?e:u.isArray(e)?e.map(X):String(e)}function ws(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=r.exec(e);)t[s[1]]=s[2];return t}const Rs=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function fe(e,t,r,s,n){if(u.isFunction(s))return s.call(this,t,r);if(n&&(t=r),!!u.isString(t)){if(u.isString(s))return t.indexOf(s)!==-1;if(u.isRegExp(s))return s.test(t)}}function Ts(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,s)=>r.toUpperCase()+s)}function Os(e,t){const r=u.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+r,{value:function(n,i,o){return this[s].call(this,t,n,i,o)},configurable:!0})})}class O{constructor(t){t&&this.set(t)}set(t,r,s){const n=this;function i(c,h,l){const f=$(h);if(!f)throw new Error("header name must be a non-empty string");const a=u.findKey(n,f);(!a||n[a]===void 0||l===!0||l===void 0&&n[a]!==!1)&&(n[a||h]=X(c))}const o=(c,h)=>u.forEach(c,(l,f)=>i(l,f,h));if(u.isPlainObject(t)||t instanceof this.constructor)o(t,r);else if(u.isString(t)&&(t=t.trim())&&!Rs(t))o(bs(t),r);else if(u.isHeaders(t))for(const[c,h]of t.entries())i(h,c,s);else t!=null&&i(r,t,s);return this}get(t,r){if(t=$(t),t){const s=u.findKey(this,t);if(s){const n=this[s];if(!r)return n;if(r===!0)return ws(n);if(u.isFunction(r))return r.call(this,n,s);if(u.isRegExp(r))return r.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=$(t),t){const s=u.findKey(this,t);return!!(s&&this[s]!==void 0&&(!r||fe(this,this[s],s,r)))}return!1}delete(t,r){const s=this;let n=!1;function i(o){if(o=$(o),o){const c=u.findKey(s,o);c&&(!r||fe(s,s[c],c,r))&&(delete s[c],n=!0)}}return u.isArray(t)?t.forEach(i):i(t),n}clear(t){const r=Object.keys(this);let s=r.length,n=!1;for(;s--;){const i=r[s];(!t||fe(this,this[i],i,t,!0))&&(delete this[i],n=!0)}return n}normalize(t){const r=this,s={};return u.forEach(this,(n,i)=>{const o=u.findKey(s,i);if(o){r[o]=X(n),delete r[i];return}const c=t?Ts(i):String(i).trim();c!==i&&delete r[i],r[c]=X(n),s[c]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return u.forEach(this,(s,n)=>{s!=null&&s!==!1&&(r[n]=t&&u.isArray(s)?s.join(", "):s)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const s=new this(t);return r.forEach(n=>s.set(n)),s}static accessor(t){const s=(this[Ke]=this[Ke]={accessors:{}}).accessors,n=this.prototype;function i(o){const c=$(o);s[c]||(Os(n,o),s[c]=!0)}return u.isArray(t)?t.forEach(i):i(t),this}}O.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);u.reduceDescriptors(O.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[r]=s}}});u.freezeMethods(O);function de(e,t){const r=this||W,s=t||r,n=O.from(s.headers);let i=s.data;return u.forEach(e,function(c){i=c.call(r,i,n.normalize(),t?t.status:void 0)}),n.normalize(),i}function Dt(e){return!!(e&&e.__CANCEL__)}function H(e,t,r){S.call(this,e??"canceled",S.ERR_CANCELED,t,r),this.name="CanceledError"}u.inherits(H,S,{__CANCEL__:!0});function Lt(e,t,r){const s=r.config.validateStatus;!r.status||!s||s(r.status)?e(r):t(new S("Request failed with status code "+r.status,[S.ERR_BAD_REQUEST,S.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Fs(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function As(e,t){e=e||10;const r=new Array(e),s=new Array(e);let n=0,i=0,o;return t=t!==void 0?t:1e3,function(h){const l=Date.now(),f=s[i];o||(o=l),r[n]=h,s[n]=l;let a=i,d=0;for(;a!==n;)d+=r[a++],a=a%e;if(n=(n+1)%e,n===i&&(i=(i+1)%e),l-o<t)return;const y=f&&l-f;return y?Math.round(d*1e3/y):void 0}}function Ps(e,t){let r=0,s=1e3/t,n,i;const o=(l,f=Date.now())=>{r=f,n=null,i&&(clearTimeout(i),i=null),e.apply(null,l)};return[(...l)=>{const f=Date.now(),a=f-r;a>=s?o(l,f):(n=l,i||(i=setTimeout(()=>{i=null,o(n)},s-a)))},()=>n&&o(n)]}const Z=(e,t,r=3)=>{let s=0;const n=As(50,250);return Ps(i=>{const o=i.loaded,c=i.lengthComputable?i.total:void 0,h=o-s,l=n(h),f=o<=c;s=o;const a={loaded:o,total:c,progress:c?o/c:void 0,bytes:h,rate:l||void 0,estimated:l&&c&&f?(c-o)/l:void 0,event:i,lengthComputable:c!=null,[t?"download":"upload"]:!0};e(a)},r)},Qe=(e,t)=>{const r=e!=null;return[s=>t[0]({lengthComputable:r,total:e,loaded:s}),t[1]]},Ge=e=>(...t)=>u.asap(()=>e(...t)),_s=_.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");let s;function n(i){let o=i;return t&&(r.setAttribute("href",o),o=r.href),r.setAttribute("href",o),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return s=n(window.location.href),function(o){const c=u.isString(o)?n(o):o;return c.protocol===s.protocol&&c.host===s.host}}():function(){return function(){return!0}}(),Cs=_.hasStandardBrowserEnv?{write(e,t,r,s,n,i){const o=[e+"="+encodeURIComponent(t)];u.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),u.isString(s)&&o.push("path="+s),u.isString(n)&&o.push("domain="+n),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function xs(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Ns(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function jt(e,t){return e&&!xs(t)?Ns(e,t):t}const Xe=e=>e instanceof O?{...e}:e;function v(e,t){t=t||{};const r={};function s(l,f,a){return u.isPlainObject(l)&&u.isPlainObject(f)?u.merge.call({caseless:a},l,f):u.isPlainObject(f)?u.merge({},f):u.isArray(f)?f.slice():f}function n(l,f,a){if(u.isUndefined(f)){if(!u.isUndefined(l))return s(void 0,l,a)}else return s(l,f,a)}function i(l,f){if(!u.isUndefined(f))return s(void 0,f)}function o(l,f){if(u.isUndefined(f)){if(!u.isUndefined(l))return s(void 0,l)}else return s(void 0,f)}function c(l,f,a){if(a in t)return s(l,f);if(a in e)return s(void 0,l)}const h={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c,headers:(l,f)=>n(Xe(l),Xe(f),!0)};return u.forEach(Object.keys(Object.assign({},e,t)),function(f){const a=h[f]||n,d=a(e[f],t[f],f);u.isUndefined(d)&&a!==c||(r[f]=d)}),r}const Mt=e=>{const t=v({},e);let{data:r,withXSRFToken:s,xsrfHeaderName:n,xsrfCookieName:i,headers:o,auth:c}=t;t.headers=o=O.from(o),t.url=Nt(jt(t.baseURL,t.url),e.params,e.paramsSerializer),c&&o.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):"")));let h;if(u.isFormData(r)){if(_.hasStandardBrowserEnv||_.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((h=o.getContentType())!==!1){const[l,...f]=h?h.split(";").map(a=>a.trim()).filter(Boolean):[];o.setContentType([l||"multipart/form-data",...f].join("; "))}}if(_.hasStandardBrowserEnv&&(s&&u.isFunction(s)&&(s=s(t)),s||s!==!1&&_s(t.url))){const l=n&&i&&Cs.read(i);l&&o.set(n,l)}return t},ks=typeof XMLHttpRequest<"u",Is=ks&&function(e){return new Promise(function(r,s){const n=Mt(e);let i=n.data;const o=O.from(n.headers).normalize();let{responseType:c,onUploadProgress:h,onDownloadProgress:l}=n,f,a,d,y,p;function g(){y&&y(),p&&p(),n.cancelToken&&n.cancelToken.unsubscribe(f),n.signal&&n.signal.removeEventListener("abort",f)}let m=new XMLHttpRequest;m.open(n.method.toUpperCase(),n.url,!0),m.timeout=n.timeout;function b(){if(!m)return;const E=O.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders()),L={data:!c||c==="text"||c==="json"?m.responseText:m.response,status:m.status,statusText:m.statusText,headers:E,config:e,request:m};Lt(function(N){r(N),g()},function(N){s(N),g()},L),m=null}"onloadend"in m?m.onloadend=b:m.onreadystatechange=function(){!m||m.readyState!==4||m.status===0&&!(m.responseURL&&m.responseURL.indexOf("file:")===0)||setTimeout(b)},m.onabort=function(){m&&(s(new S("Request aborted",S.ECONNABORTED,e,m)),m=null)},m.onerror=function(){s(new S("Network Error",S.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let P=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const L=n.transitional||kt;n.timeoutErrorMessage&&(P=n.timeoutErrorMessage),s(new S(P,L.clarifyTimeoutError?S.ETIMEDOUT:S.ECONNABORTED,e,m)),m=null},i===void 0&&o.setContentType(null),"setRequestHeader"in m&&u.forEach(o.toJSON(),function(P,L){m.setRequestHeader(L,P)}),u.isUndefined(n.withCredentials)||(m.withCredentials=!!n.withCredentials),c&&c!=="json"&&(m.responseType=n.responseType),l&&([d,p]=Z(l,!0),m.addEventListener("progress",d)),h&&m.upload&&([a,y]=Z(h),m.upload.addEventListener("progress",a),m.upload.addEventListener("loadend",y)),(n.cancelToken||n.signal)&&(f=E=>{m&&(s(!E||E.type?new H(null,e,m):E),m.abort(),m=null)},n.cancelToken&&n.cancelToken.subscribe(f),n.signal&&(n.signal.aborted?f():n.signal.addEventListener("abort",f)));const R=Fs(n.url);if(R&&_.protocols.indexOf(R)===-1){s(new S("Unsupported protocol "+R+":",S.ERR_BAD_REQUEST,e));return}m.send(i||null)})},Ds=(e,t)=>{let r=new AbortController,s;const n=function(h){if(!s){s=!0,o();const l=h instanceof Error?h:this.reason;r.abort(l instanceof S?l:new H(l instanceof Error?l.message:l))}};let i=t&&setTimeout(()=>{n(new S(`timeout ${t} of ms exceeded`,S.ETIMEDOUT))},t);const o=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach(h=>{h&&(h.removeEventListener?h.removeEventListener("abort",n):h.unsubscribe(n))}),e=null)};e.forEach(h=>h&&h.addEventListener&&h.addEventListener("abort",n));const{signal:c}=r;return c.unsubscribe=o,[c,()=>{i&&clearTimeout(i),i=null}]},Ls=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let s=0,n;for(;s<r;)n=s+t,yield e.slice(s,n),s=n},js=async function*(e,t,r){for await(const s of e)yield*Ls(ArrayBuffer.isView(s)?s:await r(String(s)),t)},Ye=(e,t,r,s,n)=>{const i=js(e,t,n);let o=0,c,h=l=>{c||(c=!0,s&&s(l))};return new ReadableStream({async pull(l){try{const{done:f,value:a}=await i.next();if(f){h(),l.close();return}let d=a.byteLength;if(r){let y=o+=d;r(y)}l.enqueue(new Uint8Array(a))}catch(f){throw h(f),f}},cancel(l){return h(l),i.return()}},{highWaterMark:2})},ie=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",vt=ie&&typeof ReadableStream=="function",be=ie&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Bt=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Ms=vt&&Bt(()=>{let e=!1;const t=new Request(_.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),Ze=64*1024,we=vt&&Bt(()=>u.isReadableStream(new Response("").body)),ee={stream:we&&(e=>e.body)};ie&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!ee[t]&&(ee[t]=u.isFunction(e[t])?r=>r[t]():(r,s)=>{throw new S(`Response type '${t}' is not supported`,S.ERR_NOT_SUPPORT,s)})})})(new Response);const vs=async e=>{if(e==null)return 0;if(u.isBlob(e))return e.size;if(u.isSpecCompliantForm(e))return(await new Request(e).arrayBuffer()).byteLength;if(u.isArrayBufferView(e)||u.isArrayBuffer(e))return e.byteLength;if(u.isURLSearchParams(e)&&(e=e+""),u.isString(e))return(await be(e)).byteLength},Bs=async(e,t)=>{const r=u.toFiniteNumber(e.getContentLength());return r??vs(t)},Us=ie&&(async e=>{let{url:t,method:r,data:s,signal:n,cancelToken:i,timeout:o,onDownloadProgress:c,onUploadProgress:h,responseType:l,headers:f,withCredentials:a="same-origin",fetchOptions:d}=Mt(e);l=l?(l+"").toLowerCase():"text";let[y,p]=n||i||o?Ds([n,i],o):[],g,m;const b=()=>{!g&&setTimeout(()=>{y&&y.unsubscribe()}),g=!0};let R;try{if(h&&Ms&&r!=="get"&&r!=="head"&&(R=await Bs(f,s))!==0){let x=new Request(t,{method:"POST",body:s,duplex:"half"}),N;if(u.isFormData(s)&&(N=x.headers.get("content-type"))&&f.setContentType(N),x.body){const[oe,K]=Qe(R,Z(Ge(h)));s=Ye(x.body,Ze,oe,K,be)}}u.isString(a)||(a=a?"include":"omit"),m=new Request(t,{...d,signal:y,method:r.toUpperCase(),headers:f.normalize().toJSON(),body:s,duplex:"half",credentials:a});let E=await fetch(m);const P=we&&(l==="stream"||l==="response");if(we&&(c||P)){const x={};["status","statusText","headers"].forEach(ve=>{x[ve]=E[ve]});const N=u.toFiniteNumber(E.headers.get("content-length")),[oe,K]=c&&Qe(N,Z(Ge(c),!0))||[];E=new Response(Ye(E.body,Ze,oe,()=>{K&&K(),P&&b()},be),x)}l=l||"text";let L=await ee[u.findKey(ee,l)||"text"](E,e);return!P&&b(),p&&p(),await new Promise((x,N)=>{Lt(x,N,{data:L,headers:O.from(E.headers),status:E.status,statusText:E.statusText,config:e,request:m})})}catch(E){throw b(),E&&E.name==="TypeError"&&/fetch/i.test(E.message)?Object.assign(new S("Network Error",S.ERR_NETWORK,e,m),{cause:E.cause||E}):S.from(E,E&&E.code,e,m)}}),Re={http:ss,xhr:Is,fetch:Us};u.forEach(Re,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const et=e=>`- ${e}`,qs=e=>u.isFunction(e)||e===null||e===!1,Ut={getAdapter:e=>{e=u.isArray(e)?e:[e];const{length:t}=e;let r,s;const n={};for(let i=0;i<t;i++){r=e[i];let o;if(s=r,!qs(r)&&(s=Re[(o=String(r)).toLowerCase()],s===void 0))throw new S(`Unknown adapter '${o}'`);if(s)break;n[o||"#"+i]=s}if(!s){const i=Object.entries(n).map(([c,h])=>`adapter ${c} `+(h===!1?"is not supported by the environment":"is not available in the build"));let o=t?i.length>1?`since :
`+i.map(et).join(`
`):" "+et(i[0]):"as no adapter specified";throw new S("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return s},adapters:Re};function he(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new H(null,e)}function tt(e){return he(e),e.headers=O.from(e.headers),e.data=de.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Ut.getAdapter(e.adapter||W.adapter)(e).then(function(s){return he(e),s.data=de.call(e,e.transformResponse,s),s.headers=O.from(s.headers),s},function(s){return Dt(s)||(he(e),s&&s.response&&(s.response.data=de.call(e,e.transformResponse,s.response),s.response.headers=O.from(s.response.headers))),Promise.reject(s)})}const qt="1.7.4",Le={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Le[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const rt={};Le.transitional=function(t,r,s){function n(i,o){return"[Axios v"+qt+"] Transitional option '"+i+"'"+o+(s?". "+s:"")}return(i,o,c)=>{if(t===!1)throw new S(n(o," has been removed"+(r?" in "+r:"")),S.ERR_DEPRECATED);return r&&!rt[o]&&(rt[o]=!0,console.warn(n(o," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,o,c):!0}};function Hs(e,t,r){if(typeof e!="object")throw new S("options must be an object",S.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let n=s.length;for(;n-- >0;){const i=s[n],o=t[i];if(o){const c=e[i],h=c===void 0||o(c,i,e);if(h!==!0)throw new S("option "+i+" must be "+h,S.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new S("Unknown option "+i,S.ERR_BAD_OPTION)}}const Te={assertOptions:Hs,validators:Le},I=Te.validators;class M{constructor(t){this.defaults=t,this.interceptors={request:new We,response:new We}}async request(t,r){try{return await this._request(t,r)}catch(s){if(s instanceof Error){let n;Error.captureStackTrace?Error.captureStackTrace(n={}):n=new Error;const i=n.stack?n.stack.replace(/^.+\n/,""):"";try{s.stack?i&&!String(s.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+i):s.stack=i}catch{}}throw s}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=v(this.defaults,r);const{transitional:s,paramsSerializer:n,headers:i}=r;s!==void 0&&Te.assertOptions(s,{silentJSONParsing:I.transitional(I.boolean),forcedJSONParsing:I.transitional(I.boolean),clarifyTimeoutError:I.transitional(I.boolean)},!1),n!=null&&(u.isFunction(n)?r.paramsSerializer={serialize:n}:Te.assertOptions(n,{encode:I.function,serialize:I.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=i&&u.merge(i.common,i[r.method]);i&&u.forEach(["delete","get","head","post","put","patch","common"],p=>{delete i[p]}),r.headers=O.concat(o,i);const c=[];let h=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(h=h&&g.synchronous,c.unshift(g.fulfilled,g.rejected))});const l=[];this.interceptors.response.forEach(function(g){l.push(g.fulfilled,g.rejected)});let f,a=0,d;if(!h){const p=[tt.bind(this),void 0];for(p.unshift.apply(p,c),p.push.apply(p,l),d=p.length,f=Promise.resolve(r);a<d;)f=f.then(p[a++],p[a++]);return f}d=c.length;let y=r;for(a=0;a<d;){const p=c[a++],g=c[a++];try{y=p(y)}catch(m){g.call(this,m);break}}try{f=tt.call(this,y)}catch(p){return Promise.reject(p)}for(a=0,d=l.length;a<d;)f=f.then(l[a++],l[a++]);return f}getUri(t){t=v(this.defaults,t);const r=jt(t.baseURL,t.url);return Nt(r,t.params,t.paramsSerializer)}}u.forEach(["delete","get","head","options"],function(t){M.prototype[t]=function(r,s){return this.request(v(s||{},{method:t,url:r,data:(s||{}).data}))}});u.forEach(["post","put","patch"],function(t){function r(s){return function(i,o,c){return this.request(v(c||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}M.prototype[t]=r(),M.prototype[t+"Form"]=r(!0)});class je{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const s=this;this.promise.then(n=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](n);s._listeners=null}),this.promise.then=n=>{let i;const o=new Promise(c=>{s.subscribe(c),i=c}).then(n);return o.cancel=function(){s.unsubscribe(i)},o},t(function(i,o,c){s.reason||(s.reason=new H(i,o,c),r(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}static source(){let t;return{token:new je(function(n){t=n}),cancel:t}}}function $s(e){return function(r){return e.apply(null,r)}}function Vs(e){return u.isObject(e)&&e.isAxiosError===!0}const Oe={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Oe).forEach(([e,t])=>{Oe[t]=e});function Ht(e){const t=new M(e),r=Et(M.prototype.request,t);return u.extend(r,M.prototype,t,{allOwnKeys:!0}),u.extend(r,t,null,{allOwnKeys:!0}),r.create=function(n){return Ht(v(e,n))},r}const w=Ht(W);w.Axios=M;w.CanceledError=H;w.CancelToken=je;w.isCancel=Dt;w.VERSION=qt;w.toFormData=ne;w.AxiosError=S;w.Cancel=w.CanceledError;w.all=function(t){return Promise.all(t)};w.spread=$s;w.isAxiosError=Vs;w.mergeConfig=v;w.AxiosHeaders=O;w.formToJSON=e=>It(u.isHTMLForm(e)?new FormData(e):e);w.getAdapter=Ut.getAdapter;w.HttpStatusCode=Oe;w.default=w;const zs=/(\\x)([\da-f]{2})|(\\u)([\da-f]{4})/gi,Js=new RegExp("(?<!\\\\)(u)([\\da-f]{4})","gi"),st=(e,t)=>{try{const r=String.fromCharCode(parseInt(t,16));return encodeURIComponent(r),decodeURI(r)}catch{return e+t}},Me=(e="")=>{if(!e)return"";const t=e.replace(zs,(r,s,n,i,o)=>st(s||i,n||o));return t===e?e.replace(Js,(r,s,n)=>st(s,n)):t},Ws=(e,t=.5)=>{const r=lt(pe(e))();if(r>t)return[];const s=Math.floor(r*7/t)+1,n=[];return s&4&&n.push(pt),s&2&&n.push(mt),s&1&&n.push(gt),Kt("Fake sensitive",e,n),n},$t={[D]:["jpg","jpeg","png","gif","svg"],[k]:["mp3","wav","ogg","flac","aac","aiff","mp32"],[Pe]:["mp4","webm","mkv","avi","mov","wmv","flv","mpg","mpeg"],[_e]:["fbx","obj","stl","dae","3ds","blend","max","obj","ply"]},Ks=[/jpe?g$/i,/tiff?$/i,/mp32?$/i],Qs=(e,t)=>t===e?!0:t?Ks.some(r=>!!(t.match(r)&&e.match(r))):!1,Gs=e=>{var t;return!e||e.lastIndexOf(".")===-1?"":((t=e.split(".").pop())==null?void 0:t.toLowerCase())??""},Xs=(e,t,r)=>{const s=r.filetype??Gs(r.url),n=e.lastIndexOf("."),[i,o]=[e.slice(0,n),e.slice(n+1)];return $t[t].includes(s)&&Qs(o,s)?i:e},Ys=(e,t)=>{var s;if(e.lastIndexOf(".")===-1)return null;const r=(s=e.split(".").pop())==null?void 0:s.toLowerCase();return r&&$t[t].includes(r)?r:null},Zs=(e,t)=>{const r=Me(e.title)||Yt(t);return{originalTitle:r,title:Xs(r,t,e)}},en=e=>e.filter(t=>!!t).map(t=>({...t,name:Me(t.name)})),Fe=(e,t,r=!1)=>{if(!e)throw new Error("Media is undefined or null");const s=r?Ws(e.id):e[nr]??[];s.sort();const n=s.length>0,i=ft(),o=i.getProviderName(e.source,t),c=i.getProviderName(e.provider,t),h=e.filetype??Ys(e.url,t)??"Unknown";return{...e,...Zs(e,t),frontendMediaType:t,creator:Me(e.creator),tags:e.tags?en(e.tags):[],filetype:h,sourceName:o,providerName:c,sensitivity:s,isSensitive:n}},nt=3e4,it=(e,t,r)=>{e&&ut(`There is a problem with the request url: ${t}.
Please check the url: ${r.baseURL}${r.url}`)};function tn(e,t,r){const s=t.results??[];return{...t,results:s.reduce((n,i)=>(n[i.id]=Fe(i,e,r),n),{})}}const rn=(e,t,r)=>{var f,a,d;const s=["date","cf-cache-status","cf-ray"],n=e.headers;if(!s.every(y=>y in n))return;const i=new Date(n.date);if(i<t)return;const o=n["cf-ray"].split("-")[1];if(o===void 0)return;const c=Math.floor((i.getTime()-t.getTime())/1e3),h=((f=e.request)==null?void 0:f.responseURL)??((d=(a=e.request)==null?void 0:a.res)==null?void 0:d.responseUrl);if(!h)return;const l=new URL(h);return{cfCacheStatus:n["cf-cache-status"].toString(),cfRayIATA:o.toString(),elapsedTime:c,queryString:l.search,mediaType:r}},sn=({accessToken:e=void 0,isVersioned:t=!0,fakeSensitive:r=!1}={})=>{const s=dt().public.apiUrl??"https://api.openverse.org/",n={...e?{Authorization:`Bearer ${e}`}:{}},i={baseURL:t?`${s}v1/`:s,timeout:nt,headers:n},o=w.create(i);return o.interceptors.request.use(function(a){var d,y;return it(!((d=a.url)!=null&&d.endsWith("/")),"API request urls should have a trailing slash",a),it(((y=a.url)==null?void 0:y.includes("//"))??!1,"API request urls should not have two slashes",a),a}),o.interceptors.response.use(a=>{var d;return Be(((d=a.request.res)==null?void 0:d.responseUrl)??a.request.responseURL,a.status),a},a=>(a.code==="ECONNABORTED"&&(a.message=`timeout of ${nt/1e3} seconds exceeded`),Be("error:",a.message),Promise.reject(a))),{client:o,search:async(a,d)=>{a===k&&(d.peaks="true");const y=new Date,p=await o.get(`${Q(a)}/`,{params:d});return{eventPayload:rn(p,y,a),data:tn(a,p.data,r)}},getSingleMedia:async(a,d)=>{const y=await o.get(`${Q(a)}/${d}/`);return Fe(y.data,a)},getRelatedMedia:async(a,d)=>{const y=a===k?{peaks:"true"}:{};return(await o.get(`${Q(a)}/${d}/related/`,{params:y})).data.results.map(g=>Fe(g,a))},stats:async a=>(await o.get(`${Q(a)}/stats/`)).data}};function Vt(){const{$openverseApiToken:e}=V(),t=xe(),r=t.isOn("fake_sensitive")&&t.isOn("fetch_sensitive");return sn({accessToken:e,fakeSensitive:r})}const nn=Ae("related-media",{state:()=>({mainMediaId:null,fetchState:{isFetching:!1,hasStarted:!1,fetchingError:null},media:[]}),getters:{getItemById:e=>t=>e.media.find(r=>r.id===t)},actions:{_endFetching(e){this.fetchState.fetchingError=e||null,this.fetchState.hasStarted=!0,this.fetchState.isFetching=!1},_startFetching(){this.fetchState.isFetching=!0,this.fetchState.hasStarted=!0,this.fetchState.fetchingError=null},_resetFetching(){this.fetchState.isFetching=!1,this.fetchState.hasStarted=!1,this.fetchState.fetchingError=null},async fetchMedia(e,t){if(this.mainMediaId===t&&this.media.length>0)return this.media;this._resetFetching(),this.mainMediaId=t,this._startFetching(),this.media=[];const r=Vt();try{return this.media=await r.getRelatedMedia(e,t),this._endFetching(),this.media}catch(s){const{$processFetchingError:n}=V(),i=n(s,e,"related",{id:t});return this._endFetching(i),null}}}}),ot=U({count:0,page:0,pageCount:0,items:{}}),at=Ae("media",{state:()=>({results:{[k]:{...ot},[D]:{...ot}},mediaFetchState:{[k]:{isFetching:!1,hasStarted:!1,isFinished:!1,fetchingError:null},[D]:{isFetching:!1,hasStarted:!1,isFinished:!1,fetchingError:null}},currentPage:0}),getters:{_searchType(){const e=He().searchType;return ct(e)?T:e},getItemById:e=>(t,r)=>{const s=e.results[t].items[r];return s||nn().getItemById(r)},resultItems(e){return F.reduce((t,r)=>({...t,[r]:Object.values(e.results[r].items)}),{})},resultCountsPerMediaType(){return F.map(e=>[e,this.results[e].count])},resultCount(e){return(this._searchType===T||!B(this._searchType)?F:[this._searchType]).reduce((r,s)=>r+e.results[s].count,0)},fetchState(){if(this._searchType===T){const e=r=>F.some(s=>this.mediaFetchState[s][r]),t=()=>{const r=on(this.mediaFetchState);if(!r.length)return null;const s=an(r);if(s!==null)return s.searchType=T,s;const n=cn(r);if(n)return n;const i=r.filter(o=>o.code!==Y);return i.length?i[0]:null};return{isFetching:e("isFetching"),fetchingError:t(),hasStarted:e("hasStarted"),isFinished:F.every(r=>this.mediaFetchState[r].isFinished)}}else return B(this._searchType)?this.mediaFetchState[this._searchType]:{isFetching:!1,fetchingError:null,hasStarted:!1,isFinished:!1}},allMedia(e){var l,f;const t=this.resultItems,r=(l=t[D][0])==null?void 0:l.id;let s;if(typeof r=="string")s=pe(r);else{let a="string";for(const d of F.slice(1))if(typeof((f=t[d][0])==null?void 0:f.id)=="string"){a=t[d][0].id;break}s=pe(a)}const n=lt(s),i=(a,d)=>Math.floor(n()*(d-a+1))+a,[o]=F.map(a=>[a,e.results[a].count]).sort(([,a],[,d])=>d-a)[0],c=t[o];let h=1;for(const a of F.filter(d=>d!==o))for(const d of t[a])if(c.splice(h,0,d),h=i(h+1,h+6),h>c.length)break;return c},_fetchableMediaTypes(){return(this._searchType!==T?[this._searchType]:[D,k]).filter(e=>!this.mediaFetchState[e].fetchingError&&!this.mediaFetchState[e].isFetching&&!this.mediaFetchState[e].isFinished)},canLoadMore(){return this.fetchState.hasStarted&&!this.fetchState.fetchingError&&!this.fetchState.isFinished&&this.resultCount>0}},actions:{_startFetching(e){this.mediaFetchState[e].isFetching=!0,this.mediaFetchState[e].hasStarted=!0,this.mediaFetchState[e].isFinished=!1,this.mediaFetchState[e].fetchingError=null},_endFetching(e,t){this.mediaFetchState[e].fetchingError=t||null,this.mediaFetchState[e].hasStarted=!0,this.mediaFetchState[e].isFetching=!1,t&&!er(t)&&(this.mediaFetchState[e].isFinished=!0)},_finishFetchingForQuery(e){this.mediaFetchState[e].isFinished=!0,this.mediaFetchState[e].hasStarted=!0,this.mediaFetchState[e].isFetching=!1},_resetFetchState(){for(const e of F)this.mediaFetchState[e].isFetching=!1,this.mediaFetchState[e].hasStarted=!1,this.mediaFetchState[e].isFinished=!1,this.mediaFetchState[e].fetchingError=null},_updateFetchState(e,t,r){switch(t){case"reset":{this._resetFetchState();break}case"start":{this._startFetching(e);break}case"end":{this._endFetching(e,r);break}case"finish":{this._finishFetchingForQuery(e);break}}},setMedia(e){const{mediaType:t,media:r,mediaCount:s,page:n,pageCount:i,shouldPersistMedia:o}=e;let c;o?c={...this.results[t].items,...r}:c=r;const h=n||1;this.results[t].items=c,this.results[t].count=s||0,this.results[t].page=s===0?0:h,this.results[t].pageCount=i,h>=i&&this._updateFetchState(t,"finish")},resetMedia(e){this.results[e].items={},this.results[e].count=0,this.results[e].page=0,this.results[e].pageCount=0},async fetchMedia(e={}){const t=this._searchType,r=!!e.shouldPersistMedia,s=this._fetchableMediaTypes;return await Promise.allSettled(s.map(n=>this.fetchSingleMediaType({mediaType:n,shouldPersistMedia:r}))),this.currentPage=t===T?this.currentPage+1:this.results[t].page,t===T?this.allMedia:this.resultItems[t]},clearMedia(){F.forEach(e=>{this.resetMedia(e),this._resetFetchState()}),this.currentPage=0},async fetchSingleMediaType({mediaType:e,shouldPersistMedia:t}){const r=He(),s=r.getApiRequestQuery(e);let n=this.results[e].page+1;t&&(s.page=`${n}`),this._updateFetchState(e,"start");const{$sendCustomEvent:i,$processFetchingError:o}=V(),c=Vt();try{const{eventPayload:h,data:l}=await c.search(e,s);h&&i("SEARCH_RESPONSE_TIME",h);const f=l.result_count;let a;return n==1&&i("GET_SEARCH_RESULTS",{...r.searchParamsForEvent,mediaType:e,resultsCount:f}),f||(n=1,a={message:`No results found for ${s.q}`,code:Y,requestKind:"search",searchType:e,details:{searchTerm:s.q??""}}),this._updateFetchState(e,"end",a),this.setMedia({mediaType:e,media:l.results,mediaCount:f,pageCount:l.page_count,shouldPersistMedia:t,page:n}),f}catch(h){const l=o(h,e,"search",{searchTerm:s.q??""});return this._updateFetchState(e,"end",l),null}},setMediaProperties(e,t,r){const s=this.getItemById(e,t);s?Object.assign(s,r):ut(`Attempted to update media item ${e} ${t} but could not find it.`)}}}),on=e=>F.map(t=>e[t].fetchingError).filter(t=>t!==null),an=e=>e.find(({statusCode:t})=>t===429)??null,cn=e=>e.length===F.length&&e.every(({code:t})=>t===Y)?{...e[0],searchType:T}:null;export{On as S,He as a,Fn as b,er as c,w as d,nn as e,Ue as f,Vt as g,Tn as h,B as i,cr as j,me as m,gr as q,at as u};
