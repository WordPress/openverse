{"version":3,"file":"Dll-msnB.js","sources":["../../src/layouts/search-layout.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { computed, onMounted, provide, ref, watch } from \"vue\"\n\nimport { useScroll } from \"@vueuse/core\"\n\nimport {\n  IsHeaderScrolledKey,\n  IsSidebarVisibleKey,\n  ShowScrollButtonKey,\n} from \"#shared/types/provides\"\nimport { useUiStore } from \"~/stores/ui\"\nimport { isSearchTypeSupported, useSearchStore } from \"~/stores/search\"\n\nimport VFooter from \"~/components/VFooter/VFooter.vue\"\nimport VSearchGridFilter from \"~/components/VFilters/VSearchGridFilter.vue\"\nimport VSafeBrowsing from \"~/components/VSafeBrowsing/VSafeBrowsing.vue\"\nimport VHeader from \"~/components/VHeader/VHeader.vue\"\nimport VScrollButton from \"~/components/VScrollButton.vue\"\n\ndefineOptions({\n  name: \"SearchLayout\",\n})\n\n/**\n * This is the SearchLayout: the search page that has a sidebar.\n * It has white background.\n */\nconst uiStore = useUiStore()\nconst searchStore = useSearchStore()\n\nconst isDesktopLayout = computed(() => uiStore.isDesktopLayout)\nconst supported = computed(() => isSearchTypeSupported(searchStore.searchType))\n\n/**\n * Filters sidebar is visible only on desktop layouts\n * on search result pages for supported search types.\n */\nconst isSidebarVisible = computed(\n  () => supported.value && uiStore.isFilterVisible && isDesktopLayout.value\n)\n\nconst isHeaderScrolled = ref(false)\nconst showScrollButton = ref(false)\n\n/**\n * Update the `isHeaderScrolled` and `showScrollButton` values on `main-page` scroll.\n *\n * Note: template refs do not work in a Nuxt layout, so we get the `main-page` element using `document.getElementById`.\n */\nconst mainPageElement = ref<HTMLElement | null>(null)\n\nconst { y: mainPageY } = useScroll(mainPageElement)\nwatch(mainPageY, (y) => {\n  isHeaderScrolled.value = y > 0\n  showScrollButton.value = y > 70\n})\n\nonMounted(() => {\n  mainPageElement.value = document.getElementById(\"main-page\")\n})\n\nprovide(IsHeaderScrolledKey, isHeaderScrolled)\nprovide(IsSidebarVisibleKey, isSidebarVisible)\nprovide(ShowScrollButtonKey, showScrollButton)\n</script>\n\n<template>\n  <div\n    class=\"app h-dyn-screen min-h-dyn-screen grid grid-rows-[auto,1fr] bg-default\"\n    :class=\"[\n      isSidebarVisible\n        ? 'has-sidebar grid-cols-[1fr_var(--filter-sidebar-width)]'\n        : 'grid-cols-1',\n    ]\"\n  >\n    <VHeader\n      class=\"header-el\"\n      :kind=\"isDesktopLayout ? 'search-desktop' : 'search-mobile'\"\n      :show-bottom-border=\"isHeaderScrolled || isSidebarVisible\"\n    />\n\n    <aside\n      v-if=\"isSidebarVisible\"\n      class=\"sidebar end-0 z-10 h-full overflow-y-auto border-s border-default bg-surface\"\n    >\n      <VSearchGridFilter class=\"px-10 py-8\" />\n      <VSafeBrowsing class=\"border-t border-default px-10 py-8\" />\n    </aside>\n\n    <div\n      id=\"main-page\"\n      class=\"main-page flex h-full w-full min-w-0 flex-col justify-between overflow-y-auto\"\n    >\n      <slot />\n      <VFooter mode=\"content\" class=\"border-t border-default bg-default\" />\n    </div>\n\n    <VScrollButton\n      v-show=\"showScrollButton\"\n      :is-filter-sidebar-visible=\"isSidebarVisible\"\n      data-testid=\"scroll-button\"\n    />\n  </div>\n</template>\n\n<style scoped>\n.has-sidebar .sidebar {\n  width: var(--filter-sidebar-width);\n}\n.app {\n  grid-template-areas: \"header\" \"main\";\n  /* This is used by some elements. */\n  --color-bg-curr-page: var(--color-bg);\n}\n.header-el {\n  grid-area: header;\n}\n.main-page {\n  grid-area: main;\n}\n.sidebar {\n  grid-area: sidebar;\n}\n.has-sidebar.app {\n  grid-template-areas: \"header header\" \"main sidebar\";\n}\n</style>\n"],"names":["uiStore","useUiStore","searchStore","useSearchStore","isDesktopLayout","computed","supported","isSearchTypeSupported","isSidebarVisible","isHeaderScrolled","ref","showScrollButton","mainPageElement","mainPageY","useScroll","watch","y","onMounted","provide","IsHeaderScrolledKey","IsSidebarVisibleKey","ShowScrollButtonKey"],"mappings":"u5FA2BA,MAAMA,EAAUC,EAAW,EACrBC,EAAcC,EAAe,EAE7BC,EAAkBC,EAAS,IAAML,EAAQ,eAAe,EACxDM,EAAYD,EAAS,IAAME,EAAsBL,EAAY,UAAU,CAAC,EAMxEM,EAAmBH,EACvB,IAAMC,EAAU,OAASN,EAAQ,iBAAmBI,EAAgB,KACtE,EAEMK,EAAmBC,EAAI,EAAK,EAC5BC,EAAmBD,EAAI,EAAK,EAO5BE,EAAkBF,EAAwB,IAAI,EAE9C,CAAEG,GAAiBC,EAAUF,CAAe,EAC5C,OAAAG,EAAAF,EAAYG,GAAM,CACtBP,EAAiB,MAAQO,EAAI,EAC7BL,EAAiB,MAAQK,EAAI,EAAA,CAC9B,EAEDC,EAAU,IAAM,CACEL,EAAA,MAAQ,SAAS,eAAe,WAAW,CAAA,CAC5D,EAEDM,EAAQC,EAAqBV,CAAgB,EAC7CS,EAAQE,EAAqBZ,CAAgB,EAC7CU,EAAQG,EAAqBV,CAAgB"}