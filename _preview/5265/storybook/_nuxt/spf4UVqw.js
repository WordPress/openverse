import{d as S,r as n,c as r,o as M,w as m,k as L,J as R,K as V,e as k,E as D,j as I,U as T,Q as P}from"./DwwldUEF.js";import{s as B}from"./Z8zkSHZ1.js";import{b as F}from"./Ck0CgHQL.js";import{u as N,a as x}from"./Ds_kB4O7.js";import{V as C}from"./Dhs1Or-2.js";import{u as A}from"./D93TPuWH.js";import{u as U}from"./VcnMPoS3.js";import{u as O}from"./BtS8wA1z.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},o=new e.Error().stack;o&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[o]="123eeab1-0bfa-470b-a4eb-2233c8540f2c",e._sentryDebugIdIdentifier="sentry-dbid-123eeab1-0bfa-470b-a4eb-2233c8540f2c")}catch{}})();const j=S({__name:"VLoadMore",props:{kind:{},searchTerm:{},relatedTo:{},position:{},searchType:{},isFetching:{type:Boolean}},emits:["load-more"],setup(e,{emit:o}){const a=e,p=o,l=n(null),b=O(),{t:i}=A({useScope:"global"}),c=N(),g=x(),{$sendCustomEvent:d}=U(),{currentPage:v}=B(c),u=r(()=>({...g.searchParamsForEvent,resultPage:v.value||1})),h=r(()=>c.canLoadMore),t=n(!1),y=async()=>{a.isFetching||(t.value=!1,d("LOAD_MORE_RESULTS",u.value),p("load-more"))},_=()=>{d("REACH_RESULT_END",u.value)},E=r(()=>a.isFetching?i("browsePage.loading"):i("browsePage.load")),f=n(null);M(()=>{f.value=document.getElementById("main-page")});const w=F(l,{scrollTarget:f});return m(b,()=>{t.value=!1}),m(w,s=>{if(s){if(t.value)return;_(),t.value=!0}}),(s,z)=>(I(),L("div",{ref_key:"loadMoreSectionRef",ref:l,class:"w-full"},[R(k(C,{class:"label-bold lg:description-bold h-16 w-full lg:h-18",variant:"filled-gray",size:"disabled",disabled:s.isFetching,"data-testid":"load-more",onClick:y},{default:D(()=>[T(P(E.value),1)]),_:1},8,["disabled"]),[[V,h.value]])],512))}});j.__docgenInfo={exportName:"default",displayName:"VLoadMore",description:"",tags:{},events:[{name:"load-more"}],sourceFiles:["/home/runner/work/openverse/openverse/frontend/src/components/VLoadMore.vue"]};export{j as _};
