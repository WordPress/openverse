{"version":3,"file":"BaLH0huz.js","sources":["../../src/components/VFooter/VFooter.vue"],"sourcesContent":["<script setup lang=\"ts\">\n/**\n * The footer is the section displayed at the bottom of a page. It can contain\n * some branding, links to other pages and an option to change the language.\n */\nimport { computed, ref } from \"vue\"\n\nimport { SCREEN_SIZES } from \"#shared/constants/screens\"\nimport { useUiStore } from \"~/stores/ui\"\nimport { useFeatureFlagStore } from \"~/stores/feature-flag\"\nimport usePages from \"~/composables/use-pages\"\nimport useResizeObserver from \"~/composables/use-resize-observer\"\n\nimport type { SelectFieldProps } from \"~/components/VSelectField/VSelectField.vue\"\nimport VLink from \"~/components/VLink.vue\"\nimport VBrand from \"~/components/VBrand/VBrand.vue\"\nimport VLanguageSelect from \"~/components/VLanguageSelect/VLanguageSelect.vue\"\nimport VThemeSelect from \"~/components/VThemeSelect/VThemeSelect.vue\"\nimport VPageLinks from \"~/components/VHeader/VPageLinks.vue\"\nimport VWordPressLink from \"~/components/VHeader/VWordPressLink.vue\"\n\ntype FooterMode = \"internal\" | \"content\"\n\nconst props = withDefaults(\n  defineProps<{\n    /**\n     * whether the footer is being rendered on a search page or an internal\n     * page (about, feedback, etc.); This determines whether the Openverse\n     * logo and other links are displayed.\n     * Search pages use \"content\" footer.\n     */\n    mode: FooterMode\n    languageProps?: SelectFieldProps\n  }>(),\n  {\n    languageProps: () => ({}),\n  }\n)\n\nconst uiStore = useUiStore()\nconst { all: allPages } = usePages()\n\nconst isContentMode = computed(() => props.mode === \"content\")\n\nconst featureFlagStore = useFeatureFlagStore()\nconst showThemeSwitcher = computed(() =>\n  featureFlagStore.isOn(\"dark_mode_ui_toggle\")\n)\n\n/** JS-based responsiveness */\nconst footerEl = ref<HTMLElement | null>(null)\nconst initialWidth = SCREEN_SIZES[uiStore.breakpoint]\nconst { dimens: footerDimens } = useResizeObserver(footerEl, {\n  initialWidth,\n})\n\n/**\n * Return a list of all breakpoints that are smaller than the current screen width. This allows us to use the smallest variant class to target CSS styles.\n *\n * I.e., with a width at 1200, the footer will have `footer-2xl footer-lg`. Using `footer-lg`, we can apply styles to both `footer-2xl` and `footer-lg`.\n */\nconst variantNames = computed(() =>\n  Object.entries(SCREEN_SIZES)\n    .filter(([, val]) => footerDimens.value.width >= val)\n    .map(([key]) => `footer-${key}`)\n)\n\nconst linkColumnHeight = computed(() => ({\n  \"--link-col-height\": Math.ceil(Object.keys(allPages).length / 2),\n}))\n</script>\n\n<template>\n  <footer\n    ref=\"footerEl\"\n    class=\"footer flex flex-col gap-10 px-6\"\n    :class=\"[\n      ...variantNames,\n      isContentMode ? 'footer-content' : 'footer-internal',\n    ]\"\n  >\n    <!-- Logo and links -->\n    <div v-if=\"isContentMode\" class=\"logo-and-links flex flex-col gap-y-10\">\n      <VLink href=\"/\" class=\"logo text-default\" aria-label=\"Openverse\">\n        <VBrand class=\"text-[18px]\" />\n      </VLink>\n      <nav>\n        <VPageLinks\n          class=\"nav-list label-regular\"\n          :style=\"linkColumnHeight\"\n          nav-link-classes=\"py-2\"\n        />\n      </nav>\n    </div>\n\n    <!-- Locale chooser and WordPress affiliation graphic -->\n    <div class=\"locale-and-wp flex flex-col justify-between\">\n      <template v-if=\"showThemeSwitcher\">\n        <VWordPressLink />\n        <div class=\"flex flex-row items-center gap-6\">\n          <VLanguageSelect\n            v-bind=\"languageProps\"\n            class=\"language max-w-full border-secondary\"\n          />\n          <VThemeSelect class=\"border-secondary\" />\n        </div>\n      </template>\n      <template v-else>\n        <VLanguageSelect\n          v-bind=\"languageProps\"\n          class=\"language max-w-full border-secondary\"\n        />\n        <VWordPressLink />\n      </template>\n    </div>\n  </footer>\n</template>\n\n<style>\n/* wrapper element styles */\n.footer-lg {\n  @apply gap-y-8 px-10;\n}\n\n.footer-internal {\n  @apply py-6;\n}\n\n.footer-content,\n.footer-interal.footer-lg {\n  @apply py-10;\n}\n\n/* footer > logo-and-links styles */\n.footer-sm .logo-and-links {\n  @apply grid grid-flow-col grid-cols-2;\n}\n\n.footer-lg .logo-and-links {\n  @apply flex flex-row items-center justify-between;\n}\n\n/* logo-and-links > nav-list styles */\n\n.nav-list {\n  @apply grid grid-flow-col grid-cols-2 items-center gap-x-10 gap-y-2;\n  /*\n  We set the number of rows in JS to have 2 equally distributed link columns.\n  */\n  grid-template-rows: repeat(var(--link-col-height, 4), auto);\n}\n\n.footer-lg .nav-list {\n  @apply flex gap-x-6;\n}\n\n/* locale-and-wp locale chooser and WordPress affiliation graphic styles */\n.footer-content .locale-and-wp {\n  @apply gap-y-10;\n}\n\n.footer-internal .locale-and-wp {\n  @apply gap-y-4;\n}\n\n.footer-content.footer-sm .locale-and-wp {\n  @apply grid grid-cols-2 items-center;\n}\n\n.footer-content.footer-lg .locale-and-wp,\n.footer-internal.footer-sm .locale-and-wp {\n  @apply flex flex-row items-center;\n}\n\n/* element styles */\n.footer-sm .logo {\n  @apply self-start pt-2;\n}\n.footer .language {\n  width: 100% !important;\n}\n.footer-sm .language {\n  @apply max-w-[12.5rem];\n}\n</style>\n"],"names":["props","__props","uiStore","useUiStore","allPages","usePages","isContentMode","computed","featureFlagStore","useFeatureFlagStore","showThemeSwitcher","footerEl","ref","initialWidth","SCREEN_SIZES","footerDimens","useResizeObserver","variantNames","val","key","linkColumnHeight"],"mappings":"87BAuBA,MAAMA,EAAQC,EAgBRC,EAAUC,EAAW,EACrB,CAAE,IAAKC,CAAS,EAAIC,EAAS,EAE7BC,EAAgBC,EAAS,IAAMP,EAAM,OAAS,SAAS,EAEvDQ,EAAmBC,EAAoB,EACvCC,EAAoBH,EAAS,IACjCC,EAAiB,KAAK,qBAAqB,CAC7C,EAGMG,EAAWC,EAAwB,IAAI,EACvCC,EAAeC,EAAaZ,EAAQ,UAAU,EAC9C,CAAE,OAAQa,GAAiBC,EAAkBL,EAAU,CAC3D,aAAAE,CAAA,CACD,EAOKI,EAAeV,EAAS,IAC5B,OAAO,QAAQO,CAAY,EACxB,OAAO,CAAC,CAAG,CAAAI,CAAG,IAAMH,EAAa,MAAM,OAASG,CAAG,EACnD,IAAI,CAAC,CAACC,CAAG,IAAM,UAAUA,CAAG,EAAE,CACnC,EAEMC,EAAmBb,EAAS,KAAO,CACvC,oBAAqB,KAAK,KAAK,OAAO,KAAKH,CAAQ,EAAE,OAAS,CAAC,CAAA,EAC/D;;;"}