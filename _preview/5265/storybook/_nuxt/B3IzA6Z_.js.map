{"version":3,"file":"B3IzA6Z_.js","sources":["../../src/components/VErrorSection/VErrorImage.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { useI18n } from \"#imports\"\nimport { computed } from \"vue\"\n\nimport type { License, LicenseVersion } from \"#shared/constants/license\"\nimport {\n  AttributableMedia,\n  getAttribution,\n} from \"#shared/utils/attribution-html\"\n\nimport imageInfo from \"~/assets/error_images.json\"\n\ninterface ErrorImage extends AttributableMedia {\n  src: string\n  alt: string\n}\n\n/**\n * Displays a sad image to convey the negative outcome such as absence of\n * results or a server error.\n */\nconst props = defineProps<{\n  /**\n   * the code of the error, used to identify and render the appropriate image\n   */\n  errorCode: \"NO_RESULT\" | \"SERVER_TIMEOUT\"\n}>()\n\nconst { t } = useI18n({ useScope: \"global\" })\n\nconst images = Object.fromEntries(\n  imageInfo.errors.map((errorItem) => {\n    const image = errorItem.image\n    const errorImage: ErrorImage = {\n      ...image,\n      originalTitle: image.title,\n      src: `/error_images/${image.file}.jpg`,\n      alt: `errorImages.${image.id}`,\n      license: image.license as License,\n      license_version: image.license_version as LicenseVersion,\n      frontendMediaType: \"image\",\n    }\n    errorImage.attribution = getAttribution(errorImage, t)\n    return [errorItem.error, errorImage]\n  })\n)\nconst image = computed(() => images[props.errorCode])\n</script>\n\n<template>\n  <figure class=\"error-image\">\n    <img :src=\"image.src\" :alt=\"$t(image.alt)\" :title=\"$t(image.alt)\" />\n    <!-- Disable reason: We control the attribution HTML generation so this is safe and will not lead to XSS attacks -->\n    <!-- eslint-disable-next-line vue/no-v-html -->\n    <figcaption class=\"attribution\" v-html=\"image.attribution\" />\n  </figure>\n</template>\n\n<style scoped>\n::v-deep(.attribution) {\n  @apply mt-4 text-sr text-secondary;\n}\n::v-deep(.attribution a) {\n  @apply text-current underline;\n}\n/* license icons should match the text color */\n::v-deep(.attribution img) {\n  @apply opacity-70;\n}\n</style>\n"],"names":["props","__props","t","useI18n","images","imageInfo","errorItem","image","errorImage","getAttribution","computed"],"mappings":"48DAqBA,MAAMA,EAAQC,EAOR,CAAE,EAAAC,CAAE,EAAIC,EAAQ,CAAE,SAAU,SAAU,EAEtCC,EAAS,OAAO,YACpBC,EAAU,OAAO,IAAKC,GAAc,CAClC,MAAMC,EAAQD,EAAU,MAClBE,EAAyB,CAC7B,GAAGD,EACH,cAAeA,EAAM,MACrB,IAAK,iBAAiBA,EAAM,IAAI,OAChC,IAAK,eAAeA,EAAM,EAAE,GAC5B,QAASA,EAAM,QACf,gBAAiBA,EAAM,gBACvB,kBAAmB,OACrB,EACW,OAAAC,EAAA,YAAcC,EAAeD,EAAYN,CAAC,EAC9C,CAACI,EAAU,MAAOE,CAAU,CACpC,CAAA,CACH,EACMD,EAAQG,EAAS,IAAMN,EAAOJ,EAAM,SAAS,CAAC"}