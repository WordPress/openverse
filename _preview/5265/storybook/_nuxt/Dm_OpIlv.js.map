{"version":3,"file":"Dm_OpIlv.js","sources":["../../src/components/VSelectField/VSelectField.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { computed, useAttrs } from \"vue\"\n\nimport type { ProperlyExtractPropTypes } from \"#shared/types/prop-extraction\"\n\nimport VIcon from \"~/components/VIcon/VIcon.vue\"\n\n/**\n * Represents a singular valid option of the dropdown.\n */\nexport interface Choice {\n  /** the programmatic value of this option */\n  key: string\n  /** the text to show to the user corresponding to this option */\n  text: string\n}\n\nexport type SelectFieldProps = ProperlyExtractPropTypes<\n  NonNullable<typeof props>\n>\n\ndefineOptions({\n  inheritAttrs: false,\n})\n/**\n * This field present many viable choices of which any one may be selected.\n */\n\nconst props = withDefaults(\n  defineProps<{\n    modelValue?: string\n    blankText?: string\n    fieldId: string\n    labelText: string\n    choices: Choice[]\n    showSelected?: boolean\n    /** whether to show a glowing pink outline, indicating a new feature */\n    showNewHighlight?: boolean\n  }>(),\n  {\n    modelValue: \"\",\n    blankText: \"\",\n    showSelected: true,\n    showHighlight: false,\n  }\n)\n\nconst emit = defineEmits<{ \"update:modelValue\": [string] }>()\n\nconst attrs = useAttrs()\nconst slots = defineSlots<{\n  start?: () => unknown[]\n}>()\n\nconst fieldName = computed(() => (attrs[\"name\"] as string) ?? props.fieldId)\nconst selectValue = computed<string>({\n  get: () => {\n    return props.modelValue\n  },\n  set: (value: string) => {\n    emit(\"update:modelValue\", value)\n  },\n})\n\nconst hasStartContent = computed(() => {\n  return slots && slots.start && slots.start().length !== 0\n})\n\nconst splitAttrs = computed(() => {\n  const { class: classAttrs, ...rest } = attrs\n  return {\n    classAttrs,\n    nonClassAttrs: rest,\n  }\n})\n</script>\n\n<template>\n  <div\n    class=\"group/select relative m-0.5px box-content block w-fit rounded-sm border text-sm focus-within:m-0 focus-within:border-1.5 focus-within:border-focus hover:border-hover focus-within:hover:border-focus\"\n    :class=\"[\n      splitAttrs.classAttrs,\n      showNewHighlight ? 'border-tx' : 'border-default',\n    ]\"\n  >\n    <div\n      v-if=\"showNewHighlight\"\n      class=\"new-highlight pointer-events-none absolute -inset-1.5px animate-new-highlight rounded-sm border-1.5 border-tx group-focus-within/select:hidden group-hover/select:hidden\"\n      aria-hidden=\"true\"\n    />\n    <div class=\"pointer-events-none absolute inset-y-0 start-2 my-auto h-fit\">\n      <slot name=\"start\" />\n    </div>\n    <div class=\"pointer-events-none absolute inset-y-0 end-2 my-auto h-fit\">\n      <VIcon name=\"caret-down\" />\n    </div>\n    <select\n      :id=\"fieldId\"\n      v-model=\"selectValue\"\n      class=\"outline-style-none flex h-[calc(theme(spacing.10)_-_2_*_theme(borderWidth.DEFAULT))] appearance-none truncate bg-tx pe-10\"\n      :class=\"[\n        showSelected ? 'w-full' : 'w-0 max-w-0',\n        hasStartContent ? 'ps-10' : 'ps-2',\n      ]\"\n      :name=\"fieldName\"\n      v-bind=\"splitAttrs.nonClassAttrs\"\n      :aria-label=\"labelText\"\n    >\n      <option v-if=\"blankText\" class=\"bg-overlay\" disabled value=\"\">\n        {{ blankText }}\n      </option>\n      <option\n        v-for=\"choice in choices\"\n        :key=\"choice.key\"\n        class=\"bg-overlay\"\n        :value=\"choice.key\"\n        :selected=\"choice.key === selectValue ? true : undefined\"\n      >\n        {{ choice.text }}\n      </option>\n    </select>\n  </div>\n</template>\n\n<style>\n@property --deg {\n  syntax: \"<angle>\";\n  initial-value: 0deg;\n  inherits: false;\n}\n\n.new-highlight {\n  background:\n    linear-gradient(var(--color-bg-curr-page), var(--color-bg-curr-page))\n      content-box,\n    linear-gradient(\n        var(--deg),\n        var(--color-gray-new-highlight),\n        var(--color-new-highlight)\n      )\n      border-box;\n}\n</style>\n"],"names":["props","__props","emit","__emit","attrs","useAttrs","slots","_useSlots","fieldName","computed","selectValue","value","hasStartContent","splitAttrs","classAttrs","rest"],"mappings":"qrCA4BA,MAAMA,EAAQC,EAmBRC,EAAOC,EAEPC,EAAQC,EAAS,EACjBC,EAAQC,EAAA,EAIRC,EAAYC,EAAS,IAAOL,EAAM,MAAsBJ,EAAM,OAAO,EACrEU,EAAcD,EAAiB,CACnC,IAAK,IACIT,EAAM,WAEf,IAAMW,GAAkB,CACtBT,EAAK,oBAAqBS,CAAK,CAAA,CACjC,CACD,EAEKC,EAAkBH,EAAS,IACxBH,GAASA,EAAM,OAASA,EAAM,MAAA,EAAQ,SAAW,CACzD,EAEKO,EAAaJ,EAAS,IAAM,CAChC,KAAM,CAAE,MAAOK,EAAY,GAAGC,CAAS,EAAAX,EAChC,MAAA,CACL,WAAAU,EACA,cAAeC,CACjB,CAAA,CACD"}