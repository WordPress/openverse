import{r as I,c as n,d as D,k as _,e as x,E as W,M as u,a7 as j,u as l,j as b,L as c,Q as R,F as q,U as N,D as U}from"./DwwldUEF.js";import{I as H}from"./CAa63J2U.js";import{s as M}from"./Bkc2CSET.js";import{a as P}from"./Ds_kB4O7.js";import"./CWoQmekT.js";import{u as F}from"./BbQZ5Ga4.js";import{V as Q}from"./DoSYsHAz.js";import{V as G}from"./DJXVTcEq.js";import{_ as O}from"./DqyB4W5h.js";import"./tAHCZdDM.js";import{u as J}from"./D93TPuWH.js";import{u as K}from"./VcnMPoS3.js";(function(){try{var s=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new s.Error().stack;e&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[e]="4956e171-9840-4c81-a31a-6a5e93b45b7c",s._sentryDebugIdIdentifier="sentry-dbid-4956e171-9840-4c81-a31a-6a5e93b45b7c")}catch{}})();const k=3/4,w=16/9,X=21/9,Y=250,Z=Y/w,S=250,V=100,ee=s=>s>w?w:s<k?k:s,te=({imageSize:s,isSquare:e})=>{const r=I(e.value?S:s.height||V),i=I(e.value?S:s.width||V),m=n(()=>i.value/r.value),d=n(()=>m.value>X),v=n(()=>{const h={};if(e.value)return h;const f=m.value,p=ee(f),g=Math.round(p*Z);return{"--container-width":`${g}px`,"--container-grow":g,"--img-aspect-ratio":p}});return{imgHeight:r,imgWidth:i,isPanorama:d,styles:v}},se=""+new URL("image_not_available_placeholder.BTm11Bgh.png",import.meta.url).href,ae=["alt","src","width","height"],ie={class:"sr-only"},oe={class:"label-regular leading-none text-secondary group-hover:text-default group-focus-visible:text-default sm:text-default"},le=D({__name:"VImageResult",props:{kind:{default:"search"},searchTerm:{},relatedTo:{default:"null"},position:{default:-1},image:{},aspectRatio:{default:"square"}},setup(s){const e=s,r=(t,a="https://")=>t.startsWith("http://")||t.startsWith("https://")?t:`${a}${t}`,i=n(()=>e.aspectRatio==="square"),{imgHeight:m,imgWidth:d,isPanorama:v,styles:h}=te({imageSize:{width:e.image.width,height:e.image.height},isSquare:i}),{t:f}=J({useScope:"global"}),p=n(()=>{if(v.value)return r(e.image.url);const t=e.image.thumbnail||e.image.url;return r(t)}),g=n(()=>`/image/${e.image.id}/${M(e.searchTerm,e.position)}`),T=t=>{const a=t.target;a.src=a.src===e.image.url?se:e.image.url},E=t=>{if(e.aspectRatio==="square")return;const a=t.target;m.value=a.naturalHeight,d.value=a.naturalWidth},y=f("browsePage.aria.imageTitle",{title:e.image.title}),$=n(()=>o.value?f("sensitiveContent.title.image"):y),C=n(()=>o.value?void 0:y),{$sendCustomEvent:A}=K(),B=P(),L=t=>{var a;t.button===0&&A("SELECT_SEARCH_RESULT",{...B.searchParamsForEvent,id:e.image.id,kind:e.kind,mediaType:H,provider:e.image.provider,position:e.position,relatedTo:e.relatedTo??"null",sensitivities:((a=e.image.sensitivity)==null?void 0:a.join(","))??"",isBlurred:o.value??"null"})},{isHidden:o}=F(e.image);return(t,a)=>(b(),_("li",{style:j(l(h)),class:u(["container w-full max-w-full",i.value?"square":"intrinsic sm:w-[--container-width] sm:flex-grow-[--container-grow]"])},[x(O,{itemprop:"contentUrl",title:C.value,href:g.value,class:u(["image-link group relative block w-full overflow-hidden rounded-sm text-gray-2 hover:no-underline",i.value?"focus-visible:focus-bold-filled":"focus-visible:-m-2 focus-visible:w-[calc(100%+theme(spacing.4))] focus-visible:p-2 focus-visible:focus-slim-tx sm:focus-visible:m-0 sm:focus-visible:w-full sm:focus-visible:p-0 focus-visible:sm:focus-bold-filled"]),"aria-label":$.value,onMousedown:L},{default:W(()=>[c("figure",{itemprop:"image",itemscope:"",itemtype:"https://schema.org/ImageObject",class:u(["grid w-full rounded-sm",{"aspect-square":i.value}])},[c("img",{loading:"lazy",class:u(["image col-span-full row-span-full block w-full overflow-hidden rounded-sm object-cover",[i.value?"h-full":"margin-auto sm:aspect-[--img-aspect-ratio]"]]),alt:l(o)?`${t.$t("sensitiveContent.title.image")}`:t.image.title,src:p.value,width:l(d),height:l(m),itemprop:"thumbnailUrl",onLoad:E,onError:a[0]||(a[0]=z=>T(z))},null,42,ae),c("span",{class:u(["col-span-full row-span-full flex items-center justify-center bg-blur text-default backdrop-blur-xl duration-200 motion-safe:transition-opacity",l(o)?"opacity-100":"opacity-0"]),"data-testid":"blur-overlay","aria-hidden":"true"},[x(Q,{name:"eye-closed"})],2),c("figcaption",{class:u(["z-10 col-span-full mt-2 self-end justify-self-start rounded-sm text-default group-hover:visible group-focus-visible:visible sm:mb-2",[i.value?"invisible row-span-full p-2":"sm:invisible sm:row-span-full sm:p-2",l(o)?"sm:w-full sm:text-center":"bg-default",!l(o)&&(i.value?"mx-2":"sm:mx-2")]])},[c("h2",ie,R(l(o)?`${t.$t("sensitiveContent.title.image")}`:t.image.title),1),c("div",oe,[l(o)?(b(),_(q,{key:0},[N(R(t.$t("sensitiveContent.singleResult.title")),1)],64)):(b(),U(G,{key:1,license:t.image.license,"hide-name":!0},null,8,["license"]))])],2)],2)]),_:1},8,["title","href","class","aria-label"])],6))}});le.__docgenInfo={exportName:"default",displayName:"VImageResult",description:"",tags:{},props:[{name:"aspectRatio",defaultValue:{func:!1,value:'"square"'}},{name:"kind",defaultValue:{func:!1,value:'"search"'}},{name:"relatedTo",defaultValue:{func:!1,value:'"null"'}},{name:"position",defaultValue:{func:!1,value:"-1"}}],sourceFiles:["/home/runner/work/openverse/openverse/frontend/src/components/VImageResult/VImageResult.vue"]};export{le as _,se as e};
