import j from"./DaYT2vHs.js";import{i as k,a as L,g as D}from"./DOn4i9uW.js";import"./CWoQmekT.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},r=new e.Error().stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="f0d2b202-9457-49ff-b13c-6fd213b417e9",e._sentryDebugIdIdentifier="sentry-dbid-f0d2b202-9457-49ff-b13c-6fd213b417e9")}catch{}})();const _=e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),d=(e,r,n=null)=>{const c=["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"],l=Object.entries(r).map(([s,o])=>`${s}="${o}"`).join(" ");if(c.includes(e))return l?`<${e} ${l} />`:`<${e} />`;const f=l?`<${e} ${l}>`:`<${e}>`,u=`</${e}>`;return`${f}${(n??[]).join(`
`)}${u}`},h=(e,r)=>(Object.entries(r).forEach(([n,c])=>{e=e.replace(`{${n}}`,c)}),e),T=e=>typeof e=="object"&&e!==null,E=e=>T(e)&&"loc"in e&&T(e.loc)&&"source"in e.loc&&typeof e.loc.source=="string",v=(e,r={})=>{const n=j[e];return E(n)?h(n.loc.source,r):typeof n=="string"?h(n,r):""},x=e=>{const n=`https://mirrors.creativecommons.org/presskit/icons/${e.replace("-",".")}.svg`;return d("img",{src:n,style:"height: 1em; margin-right: 0.125em; display: inline;"})},b=(e,r)=>d("a",{rel:"noopener noreferrer",href:e},[r]),A=e=>`<attribution xmlns:dc="http://purl.org/dc/elements/1.1/">
	<dc:creator>${e.creator}</dc:creator>
	<dc:title>${e.title}</dc:title>
	<dc:rights>${e.license_url}</dc:rights>
	<dc:identifier>${e.foreign_landing_url}</dc:identifier>
	<dc:type>${e.type}</dc:type>
</attribution>`,C=(e,r=null,{includeIcons:n,isPlaintext:c,isXml:l}={isPlaintext:!1,includeIcons:!0,isXml:!1})=>{if(!e)return"";const f=k(e.license),u="mediaDetails.reuse.credit",s=r?(t,i)=>i?r(`${u}.${t}`,i):r(`${u}.${t}`):(t,i)=>v(`${u}.${t}`,i);let o=e.originalTitle||s("genericTitle");c||(o=_(o)),!c&&e.foreign_landing_url&&(o=b(e.foreign_landing_url,o)),e.originalTitle&&(o=s("actualTitle",{title:o}));const w=L(e.license,e.license_version,r);let $="";if(n&&e.license){const i=D(e.license).map(p=>x(p));i.includes("")||($=i.join(""))}let a=`${w} ${$}`.trim();!c&&e.license_url&&(a=b(`${e.license_url}?ref=openverse`,a));const g={title:o,markedLicensed:s(f?"marked":"licensed"),license:a,viewLegal:"",creator:""};if(c&&e.license_url&&(g.viewLegal=s("viewLegalText",{termsCopy:s(f?"termsText":"copyText"),url:`${e.license_url}?ref=openverse`})),e.creator){let t=e.creator;c||(t=_(t)),!c&&e.creator_url&&(t=b(e.creator_url,t)),g.creator=s("creatorText",{creatorName:t})}const y=s("text",g).replace(/\s{2}/g," ").trim();if(l){const{frontendMediaType:t,...i}=e,p={...i,type:t==="audio"?"Sound":"StillImage"};return A(p)}else return c?y:d("p",{class:"attribution"},[y])};export{C as g};
