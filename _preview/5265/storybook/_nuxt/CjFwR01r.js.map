{"version":3,"file":"CjFwR01r.js","sources":["../../src/components/VMediaInfo/VRelatedMedia.vue","../../src/components/VMediaInfo/VCollapsibleTagSection.vue","../../src/components/VMediaInfo/VMediaTags.vue","../../src/components/VMediaInfo/VMediaDetails.vue","../../src/components/VHideButton.vue","../../src/components/VSingleResultControls.vue","../../shared/utils/og.ts","../../src/composables/use-single-result-page-meta.ts"],"sourcesContent":["<script setup lang=\"ts\">\nimport { useRoute, useI18n } from \"#imports\"\nimport { computed, watch } from \"vue\"\n\nimport type { SupportedMediaType } from \"#shared/constants/media\"\nimport { firstParam } from \"#shared/utils/query-utils\"\nimport type { AudioResults, ImageResults } from \"#shared/types/result\"\nimport { useRelatedMediaStore } from \"~/stores/media/related-media\"\n\nimport VMediaCollection from \"~/components/VSearchResultsGrid/VMediaCollection.vue\"\n\nconst props = defineProps<{\n  mediaType: SupportedMediaType\n  relatedTo: string\n}>()\n\nconst relatedMediaStore = useRelatedMediaStore()\n\nconst route = useRoute()\n\nconst results = computed(() => {\n  const media = relatedMediaStore.media ?? []\n  return { type: props.mediaType, items: media } as ImageResults | AudioResults\n})\nwatch(\n  route,\n  async (newRoute) => {\n    const mediaId = firstParam(newRoute?.params.id)\n    if (mediaId && mediaId !== relatedMediaStore.mainMediaId) {\n      await relatedMediaStore.fetchMedia(props.mediaType, mediaId)\n    }\n  },\n  { immediate: true }\n)\n\nconst isFetching = computed(() => relatedMediaStore.fetchState.isFetching)\nconst showRelated = computed(\n  () => results.value.items.length > 0 || isFetching.value\n)\n\nconst searchTerm = computed(() => {\n  return firstParam(route?.query.q) ?? \"\"\n})\n\nconst { t } = useI18n({ useScope: \"global\" })\n\nconst collectionLabel = computed(() => {\n  const key =\n    props.mediaType === \"audio\"\n      ? \"audioDetails.relatedAudios\"\n      : \"imageDetails.relatedImages\"\n  return t(key)\n})\n</script>\n\n<template>\n  <VMediaCollection\n    v-if=\"showRelated\"\n    :results=\"results\"\n    :is-fetching=\"isFetching\"\n    :collection-label=\"collectionLabel\"\n    kind=\"related\"\n    :related-to=\"relatedTo\"\n    :search-term=\"searchTerm\"\n    :aria-label=\"collectionLabel\"\n  >\n    <template #header>\n      <h2 id=\"related-heading\" class=\"heading-6 md:heading-5 mb-6\">\n        {{ collectionLabel }}\n      </h2>\n    </template>\n  </VMediaCollection>\n</template>\n","<script setup lang=\"ts\">\nimport { useI18n, useNuxtApp } from \"#imports\"\nimport { computed, nextTick, onMounted, ref } from \"vue\"\n\nimport { useResizeObserver, watchDebounced } from \"@vueuse/core\"\n\nimport type { SupportedMediaType } from \"#shared/constants/media\"\nimport type { Tag } from \"#shared/types/media\"\nimport { focusElement } from \"~/utils/focus-management\"\nimport { useSearchStore } from \"~/stores/search\"\n\nimport VTag from \"~/components/VTag/VTag.vue\"\nimport VButton from \"~/components/VButton.vue\"\nimport VIcon from \"~/components/VIcon/VIcon.vue\"\n\n// The number of rows to display before collapsing the tags\nconst ROWS_TO_DISPLAY = 3\n\nconst props = defineProps<{\n  tags: Tag[]\n  mediaType: SupportedMediaType\n}>()\n\nconst tagsContainerRef = ref<HTMLElement>()\n\nconst searchStore = useSearchStore()\nconst { $sendCustomEvent } = useNuxtApp()\n\nconst localizedTagPath = (tag: string) => {\n  return searchStore.getCollectionPath({\n    type: props.mediaType,\n    collectionParams: { collection: \"tag\", tag },\n  })\n}\n\nconst normalizedTags = computed(() => {\n  return Array.from(new Set(props.tags.map((tag) => tag.name)))\n})\n\nconst collapsibleRowsStartAt = ref<number>()\nconst { localeProperties } = useI18n({ useScope: \"global\" })\nconst dir = computed(() => {\n  return localeProperties.value.dir\n})\n\nfunction isFurtherInline(previous: HTMLElement, current: HTMLElement) {\n  if (dir.value === \"rtl\") {\n    return previous.offsetLeft < current.offsetLeft\n  }\n  return previous.offsetLeft > current.offsetLeft\n}\n\nfunction findRowStartsAt(parent: HTMLElement) {\n  const children = Array.from(parent.children)\n  if (!children.length) {\n    return 0\n  }\n  let rowCount = 0\n  for (let i = 0; i < children.length; i++) {\n    const child = children[i] as HTMLElement\n    const previous = child.previousElementSibling as HTMLElement\n    if (!previous) {\n      rowCount++\n    } else if (isFurtherInline(previous, child)) {\n      rowCount++\n    }\n    if (rowCount === ROWS_TO_DISPLAY + 1) {\n      return i\n    }\n  }\n  return children.length\n}\n\n/**\n * Only the first 3 rows of tags are visible by default.\n * If we hide the tags using CSS only, they will be tabbable,\n * even though they are not visible.\n */\nconst visibleTags = computed<string[]>(() => {\n  return collapsibleRowsStartAt.value && buttonStatus.value === \"show\"\n    ? normalizedTags.value.slice(0, collapsibleRowsStartAt.value)\n    : normalizedTags.value\n})\n\nconst hasOverflow = computed(() => {\n  return (\n    collapsibleRowsStartAt.value &&\n    collapsibleRowsStartAt.value < normalizedTags.value.length\n  )\n})\n\nonMounted(() => {\n  /**\n   * Find the index of the first item after the third row of tags. This is used\n   * to determine which tags to hide.\n   */\n  if (tagsContainerRef.value) {\n    collapsibleRowsStartAt.value = findRowStartsAt(tagsContainerRef.value)\n  }\n})\n\nconst buttonStatus = ref<\"show\" | \"hide\">(\"show\")\n/**\n * Toggles the text for the \"Show more\" button. When showing more tags, we also\n * focus the first tag in the newly-opened row for a11y.\n */\nconst handleClick = () => {\n  buttonStatus.value = buttonStatus.value === \"show\" ? \"hide\" : \"show\"\n  $sendCustomEvent(\"TOGGLE_TAG_EXPANSION\", {\n    toState: buttonStatus.value === \"show\" ? \"collapsed\" : \"expanded\",\n  })\n  if (buttonStatus.value === \"hide\" && collapsibleRowsStartAt.value) {\n    nextTick(() => {\n      if (!collapsibleRowsStartAt.value) {\n        return\n      }\n      const firstTagInFourthRow = tagsContainerRef.value?.children.item(\n        collapsibleRowsStartAt.value\n      ) as HTMLElement\n      focusElement(firstTagInFourthRow?.querySelector(\"a\"))\n    })\n  }\n}\n\nconst heightClass = computed(() => {\n  if (!hasOverflow.value) {\n    return \"max-h-none\"\n  }\n  /**\n   * Height is 3 rows of tags, gaps, and a padding for the focus rings.\n   * 3 * 2rem (tags) + 2 * 0.75rem (2 gaps) + 0.1875rem (margin for the focus ring)\n   */\n  return buttonStatus.value === \"show\" ? \"max-h-[7.6875rem]\" : \"mah-h-none\"\n})\n\nconst listWidth = ref<number>()\nuseResizeObserver(tagsContainerRef, (entries) => {\n  listWidth.value = entries[0].contentRect.width\n})\n\nwatchDebounced(\n  listWidth,\n  (newWidth, oldWidth) => {\n    if (!tagsContainerRef.value) {\n      return\n    }\n    const isWidening = oldWidth && newWidth && newWidth > oldWidth\n\n    if (isWidening) {\n      collapsibleRowsStartAt.value = normalizedTags.value.length\n    }\n    nextTick(() => {\n      if (tagsContainerRef.value) {\n        collapsibleRowsStartAt.value = findRowStartsAt(tagsContainerRef.value)\n      }\n    })\n  },\n  { debounce: 300 }\n)\n</script>\n\n<template>\n  <div class=\"-my-1.5px\">\n    <ul\n      ref=\"tagsContainerRef\"\n      class=\"flex flex-wrap gap-3 overflow-y-hidden p-1.5px\"\n      :class=\"heightClass\"\n    >\n      <li v-for=\"tag in visibleTags\" :key=\"tag\">\n        <VTag :href=\"localizedTagPath(tag)\">{{ tag }}</VTag>\n      </li>\n    </ul>\n    <VButton\n      v-if=\"hasOverflow\"\n      size=\"small\"\n      variant=\"transparent-tx\"\n      has-icon-end\n      class=\"label-bold -ms-2 mt-4 hover:underline\"\n      :aria-expanded=\"buttonStatus === 'show' ? 'false' : 'true'\"\n      @click=\"handleClick\"\n      >{{\n        $t(\n          buttonStatus === \"show\"\n            ? \"mediaDetails.tags.showMore\"\n            : \"mediaDetails.tags.showLess\"\n        )\n      }}<VIcon\n        name=\"caret-down\"\n        :size=\"4\"\n        :class=\"{ '-scale-y-100 transform': buttonStatus === 'hide' }\"\n    /></VButton>\n  </div>\n</template>\n","<script setup lang=\"ts\">\nimport { useLocalePath } from \"#imports\"\nimport { computed } from \"vue\"\n\nimport type { SupportedMediaType } from \"#shared/constants/media\"\nimport type { Tag } from \"#shared/types/media\"\n\nimport VCollapsibleTagSection from \"~/components/VMediaInfo/VCollapsibleTagSection.vue\"\nimport VLink from \"~/components/VLink.vue\"\n\nconst props = defineProps<{\n  tags: Tag[]\n  mediaType: SupportedMediaType\n  provider: string\n}>()\n\nconst tagsByType = computed(() => {\n  const generatedTags = []\n  const sourceTags = []\n  for (const tag of props.tags) {\n    if (tag.unstable__provider && tag.unstable__provider !== props.provider) {\n      generatedTags.push(tag)\n    } else {\n      sourceTags.push(tag)\n    }\n  }\n  return { generated: generatedTags, source: sourceTags }\n})\n\nconst hasSourceTags = computed(() => tagsByType.value.source.length > 0)\nconst hasGeneratedTags = computed(() => tagsByType.value.generated.length > 0)\n\nconst localePath = useLocalePath()\n\nconst tagsPagePath = computed(() => localePath(\"/tags\"))\n</script>\n\n<template>\n  <div class=\"flex flex-col gap-6 sm:gap-8\">\n    <div v-if=\"hasSourceTags\">\n      <h3 v-if=\"hasGeneratedTags\" class=\"label-regular mb-2\">\n        {{ $t(\"mediaDetails.tags.source.heading\") }}\n      </h3>\n      <h3 v-else class=\"sr-only\">{{ $t(\"mediaDetails.tags.title\") }}</h3>\n      <VCollapsibleTagSection\n        :media-type=\"mediaType\"\n        :tags=\"tagsByType.source\"\n      />\n    </div>\n    <div v-if=\"hasGeneratedTags\">\n      <div class=\"label-regular mb-2 flex gap-2\">\n        <h3>{{ $t(\"mediaDetails.tags.generated.heading\") }}</h3>\n        <VLink :href=\"tagsPagePath\">{{\n          $t(\"mediaDetails.tags.generated.pageTitle\")\n        }}</VLink>\n      </div>\n      <VCollapsibleTagSection\n        :media-type=\"mediaType\"\n        :tags=\"tagsByType.generated\"\n      />\n    </div>\n  </div>\n</template>\n","<script setup lang=\"ts\">\nimport { useI18n } from \"#imports\"\nimport { computed } from \"vue\"\n\nimport { IMAGE } from \"#shared/constants/media\"\nimport type { AudioDetail, ImageDetail, Metadata } from \"#shared/types/media\"\nimport { getMediaMetadata } from \"~/utils/metadata\"\n\nimport VContentReportModal from \"~/components/VContentReport/VContentReportModal.vue\"\nimport VMetadata from \"~/components/VMediaInfo/VMetadata.vue\"\nimport VMediaTags from \"~/components/VMediaInfo/VMediaTags.vue\"\n\nconst props = defineProps<{ media: AudioDetail | ImageDetail }>()\n\nconst { t } = useI18n({ useScope: \"global\" })\n\nconst metadata = computed<null | Metadata[]>(() => {\n  if (!props.media) {\n    return null\n  }\n  const imageInfo =\n    props.media.frontendMediaType === IMAGE\n      ? {\n          width: props.media.width,\n          height: props.media.height,\n          type: props.media.filetype,\n        }\n      : {}\n  return getMediaMetadata(props.media, t, imageInfo)\n})\n</script>\n\n<template>\n  <section class=\"flex flex-col gap-y-6 md:gap-y-8\">\n    <header class=\"flex flex-row items-center justify-between\">\n      <h2 class=\"heading-6 md:heading-5\">\n        {{ $t(`mediaDetails.${media.frontendMediaType}Info`) }}\n      </h2>\n      <VContentReportModal :media=\"media\" />\n    </header>\n    <div class=\"flex flex-col items-start gap-6 md:flex-row\">\n      <slot name=\"thumbnail\" />\n\n      <div class=\"flex flex-col gap-6 md:gap-8\">\n        <div\n          class=\"flex w-full flex-grow flex-col items-start gap-6 md:flex-row\"\n        >\n          <p v-if=\"media.description\">{{ media.description }}</p>\n          <VMetadata v-if=\"metadata\" :metadata=\"metadata\" />\n        </div>\n        <VMediaTags\n          :tags=\"media.tags\"\n          :media-type=\"media.frontendMediaType\"\n          :provider=\"media.provider\"\n        />\n      </div>\n    </div>\n  </section>\n</template>\n","<script setup lang=\"ts\">\nimport { computed } from \"vue\"\n\nimport { useUiStore } from \"~/stores/ui\"\n\nimport VButton from \"~/components/VButton.vue\"\nimport VIconButton from \"~/components/VIconButton/VIconButton.vue\"\nimport VIcon from \"~/components/VIcon/VIcon.vue\"\n\ndefineEmits<{ click: [] }>()\n\nconst uiStore = useUiStore()\nconst isMd = computed(() => uiStore.isBreakpoint(\"md\"))\n</script>\n\n<template>\n  <div>\n    <VButton\n      v-if=\"isMd\"\n      variant=\"transparent-gray\"\n      class=\"label-bold\"\n      size=\"small\"\n      has-icon-end\n      @click=\"$emit('click')\"\n    >\n      <span class=\"hidden md:block\">{{\n        $t(\"sensitiveContent.singleResult.hide\")\n      }}</span>\n      <VIcon name=\"eye-closed\" />\n    </VButton>\n    <VIconButton\n      v-else\n      variant=\"transparent-gray\"\n      :icon-props=\"{ name: 'eye-closed' }\"\n      size=\"small\"\n      :label=\"$t('sensitiveContent.singleResult.hide')\"\n      @click=\"$emit('click')\"\n    />\n  </div>\n</template>\n","<script setup lang=\"ts\">\nimport { computed } from \"vue\"\n\nimport type { AudioDetail, ImageDetail } from \"#shared/types/media\"\nimport { useSearchStore } from \"~/stores/search\"\nimport { useSensitiveMedia } from \"~/composables/use-sensitive-media\"\n\nimport VBackToSearchResultsLink from \"~/components/VBackToSearchResultsLink.vue\"\nimport VHideButton from \"~/components/VHideButton.vue\"\n\nconst props = defineProps<{ media: AudioDetail | ImageDetail }>()\n\nconst searchStore = useSearchStore()\n\nconst backToSearchPath = computed(() => searchStore.backToSearchPath)\nconst { hide, canBeHidden } = useSensitiveMedia(props.media)\n</script>\n\n<template>\n  <!-- Only display these controls if one of the children is shown,\n    to prevent rendering extra whitespace when both buttons are hidden. -->\n  <div\n    v-show=\"canBeHidden || backToSearchPath\"\n    class=\"flex w-full justify-between px-4 pb-4 md:px-8\"\n  >\n    <VBackToSearchResultsLink\n      v-if=\"backToSearchPath\"\n      :id=\"media.id\"\n      :href=\"backToSearchPath\"\n    />\n    <VHideButton v-if=\"canBeHidden\" class=\"ml-auto\" @click=\"hide\" />\n  </div>\n</template>\n","type Meta = {\n  name?: string\n  content?: string\n  property?: string\n  key?: string\n}[]\n\nexport const createDetailPageMeta = ({\n  title,\n  thumbnail,\n  isSensitive,\n}: {\n  /** Media title or localized sensitive or generic media title */\n  title?: string\n  thumbnail?: string\n  isSensitive: boolean\n}) => {\n  const head: { meta: Meta } = { meta: [] }\n  const meta: Meta = []\n  if (title) {\n    meta.push({\n      key: \"og:title\",\n      property: \"og:title\",\n      content: title,\n    })\n  }\n  if (thumbnail && !isSensitive) {\n    meta.push({\n      key: \"og:image\",\n      property: \"og:image\",\n      content: thumbnail,\n    })\n  }\n  head.meta = meta\n  return head\n}\n","import { useI18n } from \"#imports\"\nimport { computed, ref, watch } from \"vue\"\nimport type { Ref } from \"vue\"\n\nimport { createDetailPageMeta } from \"#shared/utils/og\"\nimport type { AudioDetail, ImageDetail } from \"#shared/types/media\"\n\nexport const useSingleResultPageMeta = (\n  media: Ref<AudioDetail | ImageDetail | null>\n) => {\n  const { t } = useI18n({ useScope: \"global\" })\n\n  const titles = () => {\n    if (!media.value) {\n      return { genericTitle: \"\", sensitiveTitle: \"\" }\n    }\n    return {\n      genericTitle: `${t(\n        `mediaDetails.reuse.${media.value.frontendMediaType}`\n      )}`,\n      sensitiveTitle: `${t(\n        `sensitiveContent.title.${media.value.frontendMediaType}`\n      )}`,\n    }\n  }\n\n  const isSensitive = computed(() => media.value?.isSensitive ?? false)\n\n  // Do not show sensitive content title in the social preview cards.\n  const getMediaTitle = () => {\n    if (!media.value) {\n      return \"\"\n    }\n    return isSensitive.value\n      ? titles().sensitiveTitle\n      : (media.value.title ?? titles().genericTitle)\n  }\n  const getPageTitle = () => `${getMediaTitle()} | Openverse`\n\n  const pageTitle = ref(getPageTitle())\n  const detailPageMeta = createDetailPageMeta({\n    title: getMediaTitle(),\n    thumbnail: media.value?.thumbnail,\n    isSensitive: isSensitive.value,\n  })\n  watch(media, () => {\n    pageTitle.value = getPageTitle()\n  })\n\n  return {\n    pageTitle,\n    detailPageMeta,\n  }\n}\n"],"names":["props","__props","relatedMediaStore","useRelatedMediaStore","route","useRoute","results","computed","media","watch","newRoute","mediaId","firstParam","isFetching","showRelated","searchTerm","t","useI18n","collectionLabel","key","ROWS_TO_DISPLAY","tagsContainerRef","ref","searchStore","useSearchStore","$sendCustomEvent","useNuxtApp","localizedTagPath","tag","normalizedTags","collapsibleRowsStartAt","localeProperties","dir","isFurtherInline","previous","current","findRowStartsAt","parent","children","rowCount","i","child","visibleTags","buttonStatus","hasOverflow","onMounted","handleClick","nextTick","firstTagInFourthRow","_a","focusElement","heightClass","listWidth","useResizeObserver","entries","watchDebounced","newWidth","oldWidth","tagsByType","generatedTags","sourceTags","hasSourceTags","hasGeneratedTags","localePath","useLocalePath","tagsPagePath","metadata","imageInfo","IMAGE","getMediaMetadata","uiStore","useUiStore","isMd","backToSearchPath","hide","canBeHidden","useSensitiveMedia","createDetailPageMeta","title","thumbnail","isSensitive","head","meta","useSingleResultPageMeta","titles","getMediaTitle","getPageTitle","pageTitle","detailPageMeta"],"mappings":"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"}