import{c as n,r as m,w as I,d as _,j as d,D as p,E as f,u as C,I as M,L as P,e as S}from"./DwwldUEF.js";import{u as $,a as V}from"./Ds_kB4O7.js";import{u as L}from"./D8qJDlnG.js";import"./CWoQmekT.js";import{u as k}from"./D93TPuWH.js";import{u as q}from"./BtS8wA1z.js";import{i as F}from"./CAa63J2U.js";import{V as N}from"./B-gxTr-H.js";import{_ as R}from"./7REI89K7.js";import{_ as T}from"./spf4UVqw.js";(function(){try{var r=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new r.Error().stack;e&&(r._sentryDebugIds=r._sentryDebugIds||{},r._sentryDebugIds[e]="4c0e905e-ad3b-4541-ba6f-c8945bc117a7",r._sentryDebugIdIdentifier="sentry-dbid-4c0e905e-ad3b-4541-ba6f-c8945bc117a7")}catch{}})();const D=({collectionParams:r,mediaType:e,t:o})=>({pageTitle:n(()=>{const t=r.value;if(t){if(t.collection==="creator")return`${t.creator} | Openverse`;if(t.collection==="source"){const s=L().getProviderName(t.source,e);return`${o(`collection.pageTitle.source.${e}`,{source:s})} | Openverse`}if(t.collection==="tag")return`${o(`collection.pageTitle.tag.${e}`,{tag:t.tag})} | Openverse`}return"Openly Licensed Images, Audio and More | Openverse"})}),W=({mediaType:r})=>{const e=$(),o=V(),a=n(()=>o.collectionParams),t=n(()=>e.fetchState.isFetching),s=m(e.resultItems[r]),i=m(),{t:u}=k({useScope:"global"}),g=n(()=>{if(!a.value)return"";const{collection:c,...w}=a.value;return u(`collection.ariaLabel.${c}.image`,{...w})}),l=async({shouldPersistMedia:c}={shouldPersistMedia:!1})=>(s.value=await e.fetchMedia({shouldPersistMedia:c}),i.value=s.value.length>0?s.value[0].creator_url:void 0,s.value),h=q(),y=n(()=>h.query);I(y,async()=>{await l()});const b=async()=>{await l({shouldPersistMedia:!0})},{pageTitle:v}=D({collectionParams:a,mediaType:r,t:u});return{collectionParams:a,pageTitle:v,collectionLabel:g,creatorUrl:i,isFetching:t,media:s,fetchMedia:l,loadMore:b}},O={class:"mb-6 mt-4 lg:mb-10"},B=_({__name:"VCollectionResults",props:{collectionParams:{},collectionLabel:{},results:{},isFetching:{type:Boolean},searchTerm:{},creatorUrl:{}},emits:["load-more"],setup(r){return(e,o)=>(d(),p(R,{results:e.results,"is-fetching":e.isFetching,"search-term":e.searchTerm,"collection-label":e.collectionLabel,kind:"collection"},{header:f(()=>[C(F)(e.results.type)?(d(),p(N,{key:0,class:"mb-2 md:mb-3","media-type":e.results.type,"collection-params":e.collectionParams,"creator-url":e.creatorUrl},null,8,["media-type","collection-params","creator-url"])):M("",!0)]),footer:f(()=>[P("footer",O,[S(T,{"search-type":e.results.type,kind:"collection","search-term":e.searchTerm,"is-fetching":e.isFetching,class:"mb-4",onLoadMore:o[0]||(o[0]=a=>e.$emit("load-more"))},null,8,["search-type","search-term","is-fetching"])])]),_:1},8,["results","is-fetching","search-term","collection-label"]))}});B.__docgenInfo={exportName:"default",displayName:"VCollectionResults",description:"",tags:{},props:[{name:"collectionParams",required:!0,type:{name:"CollectionParams"}},{name:"collectionLabel",required:!0,type:{name:"string"}},{name:"results",required:!0,type:{name:"union",elements:[{name:"ImageResults"},{name:"AudioResults"}]}},{name:"isFetching",required:!0,type:{name:"boolean"}},{name:"searchTerm",required:!0,type:{name:"string"}},{name:"creatorUrl",required:!1,type:{name:"string"}}],events:[{name:"load-more"}],sourceFiles:["/home/runner/work/openverse/openverse/frontend/src/components/VSearchResultsGrid/VCollectionResults.vue"]};export{B as _,W as u};
