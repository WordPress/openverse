import{r as w,c as h,d as F,D as p,E as m,V as q,j as s,e as D,U as f,Q as l,u,k as g,L as d,J as H,ag as P,F as Q,H as W,I as G}from"./DwwldUEF.js";import{u as K}from"./D93TPuWH.js";import"./CWoQmekT.js";import{o as Z}from"./BVSSI1w3.js";import{m as J}from"./Bkc2CSET.js";import{V as C}from"./Dhs1Or-2.js";import{V as X}from"./CBSn_8fJ.js";import{_ as N}from"./DqyB4W5h.js";import{u as Y,a as ee}from"./VcnMPoS3.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},n=new t.Error().stack;n&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[n]="4236aded-ae5a-4ae9-ad0d-14d475817f60",t._sentryDebugIdIdentifier="sentry-dbid-4236aded-ae5a-4ae9-ad0d-14d475817f60")}catch{}})();const y="dmca",te="sensitive",k="other",oe=[y,te,k],_="sent",S="failed",U="wip",x="https://docs.google.com/forms/d/e/1FAIpQLSd0I8GsEbGQLdaX4K_F6V2NbHZqN137WMZgnptUpzwd-kbDKA/viewform",Ce=()=>{const t=w(U),n=c=>{t.value=c},{t:i}=K({useScope:"global"}),o=h(()=>t.value===U?i("mediaDetails.contentReport.long"):t.value===_?i("mediaDetails.contentReport.success.title"):i("mediaDetails.contentReport.failure.title"));return{status:t,updateStatus:n,title:o}},T=F({__name:"VDmcaNotice",props:{foreignLandingUrl:{},provider:{}},emits:["click"],setup(t){return(n,i)=>{const o=q("i18n-t");return s(),p(o,{scope:"global",class:"dmca-notice leading-normal",keypath:"mediaDetails.contentReport.form.dmca.note",tag:"p"},{form:m(()=>[D(N,{"aria-label":n.$t("mediaDetails.contentReport.form.dmca.form"),href:u(x),class:"text-link hover:underline",onClick:i[0]||(i[0]=c=>n.$emit("click"))},{default:m(()=>[f(l(n.$t("mediaDetails.contentReport.form.dmca.form")),1)]),_:1},8,["aria-label","href"])]),source:m(()=>[D(N,{href:n.foreignLandingUrl,class:"text-link hover:underline"},{default:m(()=>[f(l(n.provider),1)]),_:1},8,["href"])]),_:1})}}});T.__docgenInfo={exportName:"default",displayName:"VDmcaNotice",description:"",tags:{},props:[{name:"foreignLandingUrl",description:"the foreign landing URL for the media item",required:!0,type:{name:"string"}},{name:"provider",description:"the name of the provider of the media item",required:!0,type:{name:"string"}}],events:[{name:"click"}],sourceFiles:["/home/runner/work/openverse/openverse/frontend/src/components/VContentReport/VDmcaNotice.vue"]};const ne={class:"other-form min-h-[7rem]",for:"description"},ae={class:"flex flex-row items-center justify-between"},re=["placeholder","required","minlength"],E=F({__name:"VReportDescForm",props:{content:{default:""},reason:{}},emits:["update:content"],setup(t,{emit:n}){const i=t,o=n,c=h({get:()=>i.content,set:r=>o("update:content",r)}),a=h(()=>i.reason===k);return(r,b)=>(s(),g("label",ne,[d("span",ae,[d("span",null,l(r.$t("mediaDetails.contentReport.form.other.note")),1),d("span",null,l(r.$t(`mediaDetails.contentReport.form.${r.reason}.subLabel`)),1)]),H(d("textarea",{id:"description","onUpdate:modelValue":b[0]||(b[0]=$=>c.value=$),class:"placeholder-text-secondary mt-2 h-20 w-full rounded-sm border border-tertiary bg-default p-2 text-default focus-visible:border-focus disabled:bg-surface",placeholder:r.$t(`mediaDetails.contentReport.form.${r.reason}.placeholder`),required:a.value,minlength:a.value?20:0,maxlength:"500"},null,8,re),[[P,c.value]])]))}});E.__docgenInfo={exportName:"default",displayName:"VReportDescForm",description:"",tags:{},props:[{name:"content",description:"the contents of the textarea",required:!1,type:{name:"string"},defaultValue:{func:!1,value:'""'}},{name:"reason",description:"the reason selected for reporting the content",required:!0,type:{name:"ReportReason"}}],events:[{name:"update:content",type:{names:["string"]}}],sourceFiles:["/home/runner/work/openverse/openverse/frontend/src/components/VContentReport/VReportDescForm.vue"]};const se={id:"content-report-form"},ie={key:0},le={key:1},de={class:"text-sm"},me={key:2},ce={class:"mb-4 text-sm leading-normal"},pe={class:"flex flex-col gap-y-4"},ue={class:"label-bold mb-4"},fe={class:"leading-normal"},ve={class:"flex flex-row items-center justify-end gap-x-4"},ge=F({__name:"VContentReportForm",props:{media:{},status:{},allowCancel:{type:Boolean}},emits:["close","update-status"],setup(t,{expose:n,emit:i}){const o=t,c=i,a=w(y),r=w(""),b=()=>{a.value=y,r.value=""},$=h(()=>`${ee().public.apiUrl}v1/${J(o.media.frontendMediaType)}/${o.media.id}/report/`),L=h(()=>`${x}?entry.917669540=https://openverse.org/${o.media.frontendMediaType}/${o.media.id}`),M=()=>{b(),c("close")},A=h(()=>a.value===k&&r.value.length<20),{$sendCustomEvent:B}=Y(),I=()=>{V(_)},z=async e=>{e.preventDefault();try{await Z($.value,{method:"POST",body:{mediaType:o.media.frontendMediaType,reason:a.value,identifier:o.media.id,description:r.value}}),V(_)}catch{V(S)}},V=e=>{e===_&&B("REPORT_MEDIA",{id:o.media.id,mediaType:o.media.frontendMediaType,provider:o.media.provider,reason:a.value}),c("update-status",e)};return n({resetForm:b}),(e,R)=>{const O=q("i18n-t");return s(),g("div",se,[e.status===u(_)?(s(),g("div",ie,[D(O,{scope:"global",keypath:"mediaDetails.contentReport.success.note",class:"text-sm",tag:"p"},{source:m(()=>[D(N,{href:e.media.foreign_landing_url,class:"text-link hover:underline"},{default:m(()=>[f(l(e.media.providerName),1)]),_:1},8,["href"])]),_:1})])):e.status===u(S)?(s(),g("div",le,[d("p",de,l(e.$t("mediaDetails.contentReport.failure.note")),1)])):(s(),g("div",me,[d("p",ce,l(e.$t("mediaDetails.contentReport.form.disclaimer",{openverse:"Openverse"})),1),d("form",{class:"flex flex-col gap-y-4 text-sm",onSubmit:z},[d("fieldset",pe,[d("legend",ue,l(e.$t("mediaDetails.contentReport.form.question")),1),(s(!0),g(Q,null,W(u(oe),v=>(s(),p(X,{id:v,key:v,modelValue:a.value,"onUpdate:modelValue":R[0]||(R[0]=j=>a.value=j),name:"reason",value:v},{default:m(()=>[f(l(e.$t(`mediaDetails.contentReport.form.${v}.option`)),1)]),_:2},1032,["id","modelValue","value"]))),128))]),d("div",fe,[a.value===u(y)?(s(),p(T,{key:0,provider:e.media.providerName,"foreign-landing-url":e.media.foreign_landing_url,onClick:I},null,8,["provider","foreign-landing-url"])):(s(),p(E,{key:"other",content:r.value,"onUpdate:content":R[1]||(R[1]=v=>r.value=v),reason:a.value,"is-required":a.value===u(k)},null,8,["content","reason","is-required"]))]),d("div",ve,[e.allowCancel?(s(),p(C,{key:0,variant:"bordered-gray",size:"medium",class:"label-bold",onClick:M},{default:m(()=>[f(l(e.$t("mediaDetails.contentReport.form.cancel")),1)]),_:1})):G("",!0),a.value===u(y)?(s(),p(C,{key:"dmca",as:"VLink",variant:"filled-dark",size:"medium",class:"label-bold","has-icon-end":"","show-external-icon":"","external-icon-size":6,href:L.value,"send-external-link-click-event":!1,target:"_blank",onClick:I},{default:m(()=>[f(l(e.$t("mediaDetails.contentReport.form.dmca.open")),1)]),_:1},8,["href"])):(s(),p(C,{key:"non-dmca",type:"submit",disabled:A.value,"focusable-when-disabled":!0,variant:"filled-dark",size:"medium",class:"label-bold",value:e.$t("mediaDetails.contentReport.form.submit")},{default:m(()=>[f(l(e.$t("mediaDetails.contentReport.form.submit")),1)]),_:1},8,["disabled","value"]))])],32)]))])}}});ge.__docgenInfo={exportName:"default",displayName:"VContentReportForm",description:"",tags:{},expose:[{name:"resetForm"}],props:[{name:"media",required:!0,type:{name:"ReportableMedia"}},{name:"status",required:!0,type:{name:"ReportStatus"}},{name:"allowCancel",required:!0,type:{name:"boolean"}}],events:[{name:"close"},{name:"update-status",type:{names:["ReportStatus"]}}],sourceFiles:["/home/runner/work/openverse/openverse/frontend/src/components/VContentReport/VContentReportForm.vue"]};export{U as W,ge as _,Ce as u};
