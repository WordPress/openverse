<!doctype html>
<html class="no-js" lang="en" data-content_root="../../../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../../../genindex.html" /><link rel="search" title="Search" href="../../../search.html" /><link rel="next" title="Monitoring" href="../monitoring/index.html" /><link rel="prev" title="Openverse Infrastructure" href="index.html" />

    <link rel="shortcut icon" href="https://raw.githubusercontent.com/WordPress/openverse/master/brand/icon.svg"/><!-- Generated with Sphinx 7.2.6 and Furo 2023.09.10 -->
        <title>2024-01-05 Implementation Plan: Finish moving all services to openverse.org - Openverse documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo.css?v=135e06be" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo-extensions.css?v=36a5483c" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../../index.html"><div class="brand">Openverse  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="../../../_static/logo_light.svg" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="../../../_static/logo_dark.svg" alt="Dark Logo"/>
  </div>
  
  
</a><form class="sidebar-search-container" method="get" action="../../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../api/index.html">Django API</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Django API</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../api/guides/index.html">Guides</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Guides</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../api/guides/quickstart.html">Quickstart guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/guides/test.html">Testing guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/guides/deploy.html">Deployment runbook</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/guides/https.html">Local HTTPS testing</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../api/reference/index.html">Reference</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Reference</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../api/reference/made_with_ov.html">Made with Openverse</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/reference/search_algorithm.html">Search Algorithm</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/reference/authentication_and_throttling.html">Authentication and Throttling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/reference/healthcheck.html">Django Healthcheck</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../automations/index.html">Automations</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of Automations</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../automations/guides/index.html">Guides</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Guides</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../automations/guides/quickstart.html">Quickstart Guide</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../automations/reference/index.html">Reference</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of Reference</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../automations/reference/python_scripts.html">Python Scripts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../automations/reference/project_automations.html">Project Automations</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../catalog/index.html">Airflow Catalog</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of Airflow Catalog</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../catalog/guides/index.html">Guides</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of Guides</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../catalog/guides/quickstart.html">Quickstart</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../catalog/guides/deploy.html">Deployment runbook</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../catalog/guides/adding_a_new_provider.html">Openverse Providers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../catalog/guides/deployment.html">Catalog Deployments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../catalog/guides/deployment.html#airflow">Airflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../catalog/guides/deployment.html#postgres">Postgres</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../catalog/reference/index.html">Reference</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of Reference</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../catalog/reference/DAGs.html">DAGs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../catalog/reference/retired.html">Retired</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../changelogs/index.html">Changelogs</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of Changelogs</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../changelogs/api/index.html">API changelogs</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle navigation of API changelogs</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2024.03.11.15.26.16.html">2024.03.11.15.26.16</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2024.03.04.15.15.13.html">2024.03.04.15.15.13</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2024.02.28.16.32.28.html">2024.02.28.16.32.28</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2024.02.20.22.54.08.html">2024.02.20.22.54.08</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2024.02.13.05.45.50.html">2024.02.13.05.45.50</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2024.02.05.20.34.01.html">2024.02.05.20.34.01</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2024.01.29.19.36.26.html">2024.01.29.19.36.26</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2024.01.16.17.28.14.html">2024.01.16.17.28.14</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2024.01.08.20.06.53.html">2024.01.08.20.06.53</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2024.01.01.19.52.14.html">2024.01.01.19.52.14</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2023.12.26.05.11.22.html">2023.12.26.05.11.22</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2023.12.18.17.56.24.html">2023.12.18.17.56.24</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2023.12.11.19.20.45.html">2023.12.11.19.20.45</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2023.12.04.19.51.23.html">2023.12.04.19.51.23</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2023.11.29.22.20.31.html">2023.11.29.22.20.31</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2023.11.27.05.10.48.html">2023.11.27.05.10.48</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2023.11.20.09.32.25.html">2023.11.20.09.32.25</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2023.11.14.23.44.01.html">2023.11.14.23.44.01</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2023.11.13.22.18.21.html">2023.11.13.22.18.21</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2023.11.01.21.27.09.html">2023.11.01.21.27.09</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2023.10.30.16.26.21.html">2023.10.30.16.26.21</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2023.10.23.11.40.59.html">2023.10.23.11.40.59</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2023.10.18.15.25.27.html">2023.10.18.15.25.27</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2023.10.11.04.49.20.html">2023.10.11.04.49.20</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2023.10.10.21.08.33.html">2023.10.10.21.08.33</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2023.10.10.18.42.39.html">2023.10.10.18.42.39</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2023.10.06.17.13.36.html">2023.10.06.17.13.36</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2023.09.30.00.15.32.html">2023.09.30.00.15.32</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2023.09.28.00.26.34.html">2023.09.28.00.26.34</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2023.09.25.21.34.44.html">2023.09.25.21.34.44</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2023.09.20.11.16.51.html">2023.09.20.11.16.51</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2023.09.20.07.37.52.html">2023.09.20.07.37.52</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2023.09.19.08.13.24.html">2023.09.19.08.13.24</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2023.09.15.19.15.58.html">2023.09.15.19.15.58</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2023.09.11.16.56.52.html">2023.09.11.16.56.52</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2023.09.04.19.52.19.html">2023.09.04.19.52.19</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2023.08.28.20.43.01.html">2023.08.28.20.43.01</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2023.08.22.04.57.04.html">2023.08.22.04.57.04</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2023.08.14.16.35.15.html">2023.08.14.16.35.15</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2023.08.08.22.22.02.html">2023.08.08.22.22.02</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2023.07.24.20.47.04.html">2023.07.24.20.47.04</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2023.07.17.21.05.23.html">2023.07.17.21.05.23</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2023.07.10.08.44.19.html">2023.07.10.08.44.19</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2023.07.03.17.52.00.html">2023.07.03.17.52.00</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2023.06.28.19.49.58.html">2023.06.28.19.49.58</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2023.06.28.02.17.04.html">2023.06.28.02.17.04</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2023.06.26.20.33.46.html">2023.06.26.20.33.46</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2023.06.19.17.48.39.html">2023.06.19.17.48.39</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2023.06.13.00.21.51.html">2023.06.13.00.21.51</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2023.06.05.15.04.02.html">2023.06.05.15.04.02</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2023.06.01.01.50.43.html">2023.06.01.01.50.43</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2023.05.30.17.57.04.html">2023.05.30.17.57.04</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2023.05.30.12.02.04.html">2023.05.30.12.02.04</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2023.05.19.22.08.07.html">2023.05.19.22.08.07</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2023.05.19.18.58.25.html">2023.05.19.18.58.25</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2023.05.19.17.16.50.html">2023.05.19.17.16.50</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2023.05.15.21.51.49.html">2023.05.15.21.51.49</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2023.05.02.21.26.28.html">2023.05.02.21.26.28</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2023.04.27.07.29.23.html">2023.04.27.07.29.23</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2023.04.23.23.22.14.html">2023.04.23.23.22.14</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2023.04.19.00.01.39.html">2023.04.19.00.01.39</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2023.04.18.15.27.15.html">2023.04.18.15.27.15</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/api/2023.04.12.23.29.59.html">2023.04.12.23.29.59</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../changelogs/catalog/index.html">Catalog changelogs</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle navigation of Catalog changelogs</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/catalog/2024.03.06.16.40.36.html">2024.03.06.16.40.36</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/catalog/2024.01.25.17.42.59.html">2024.01.25.17.42.59</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/catalog/2024.01.04.20.39.50.html">2024.01.04.20.39.50</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/catalog/2023.12.20.22.19.13.html">2023.12.20.22.19.13</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/catalog/2023.11.29.15.35.59.html">2023.11.29.15.35.59</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/catalog/2023.11.14.18.24.16.html">2023.11.14.18.24.16</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/catalog/2023.10.06.18.29.33.html">2023.10.06.18.29.33</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/catalog/2023.08.30.17.30.22.html">2023.08.30.17.30.22</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/catalog/2023.07.20.15.07.11.html">2023.07.20.15.07.11</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/catalog/2023.06.19.17.21.41.html">2023.06.19.17.21.41</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/catalog/2023.06.08.16.52.36.html">2023.06.08.16.52.36</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/catalog/2023.05.16.22.14.49.html">2023.05.16.22.14.49</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/catalog/2023.04.27.02.43.13.html">2023.04.27.02.43.13</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../changelogs/frontend/index.html">Frontend changelogs</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle navigation of Frontend changelogs</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/frontend/2024.03.11.15.25.54.html">2024.03.11.15.25.54</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/frontend/2024.03.04.15.15.07.html">2024.03.04.15.15.07</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/frontend/2024.02.26.18.58.35.html">2024.02.26.18.58.35</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/frontend/2024.02.19.15.45.00.html">2024.02.19.15.45.00</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/frontend/2024.02.12.23.34.43.html">2024.02.12.23.34.43</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/frontend/2024.02.05.18.10.41.html">2024.02.05.18.10.41</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/frontend/2024.01.29.19.41.17.html">2024.01.29.19.41.17</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/frontend/2024.01.08.19.12.18.html">2024.01.08.19.12.18</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/frontend/2024.01.01.19.52.49.html">2024.01.01.19.52.49</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/frontend/2023.12.11.19.44.28.html">2023.12.11.19.44.28</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/frontend/2023.12.04.19.35.53.html">2023.12.04.19.35.53</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/frontend/2023.11.27.19.20.44.html">2023.11.27.19.20.44</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/frontend/2023.11.20.09.09.57.html">2023.11.20.09.09.57</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/frontend/2023.11.14.19.30.29.html">2023.11.14.19.30.29</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/frontend/2023.11.06.20.32.30.html">2023.11.06.20.32.30</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/frontend/2023.11.01.00.18.44.html">2023.11.01.00.18.44</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/frontend/2023.10.30.16.27.33.html">2023.10.30.16.27.33</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/frontend/2023.10.09.17.18.13.html">2023.10.09.17.18.13</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/frontend/2023.09.25.22.11.48.html">2023.09.25.22.11.48</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/frontend/2023.09.18.10.25.25.html">2023.09.18.10.25.25</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/frontend/2023.09.11.17.34.23.html">2023.09.11.17.34.23</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/frontend/2023.09.05.17.09.13.html">2023.09.05.17.09.13</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/frontend/2023.09.04.20.20.34.html">2023.09.04.20.20.34</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/frontend/2023.08.28.19.38.22.html">2023.08.28.19.38.22</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/frontend/2023.08.22.06.04.39.html">2023.08.22.06.04.39</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/frontend/2023.08.14.16.26.44.html">2023.08.14.16.26.44</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/frontend/2023.08.08.21.19.44.html">2023.08.08.21.19.44</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/frontend/2023.07.28.23.42.26.html">2023.07.28.23.42.26</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/frontend/2023.07.24.21.23.45.html">2023.07.24.21.23.45</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/frontend/2023.07.20.17.25.42.html">2023.07.20.17.25.42</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/frontend/2023.07.19.19.15.39.html">2023.07.19.19.15.39</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/frontend/2023.07.17.21.49.20.html">2023.07.17.21.49.20</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/frontend/2023.07.10.08.29.25.html">2023.07.10.08.29.25</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/frontend/2023.07.06.14.52.49.html">2023.07.06.14.52.49</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/frontend/2023.07.05.17.56.39.html">2023.07.05.17.56.39</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/frontend/2023.07.03.18.19.32.html">2023.07.03.18.19.32</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/frontend/2023.06.26.20.22.48.html">2023.06.26.20.22.48</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/frontend/2023.06.19.17.31.24.html">2023.06.19.17.31.24</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/frontend/2023.06.13.00.28.40.html">2023.06.13.00.28.40</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/frontend/2023.06.05.14.48.06.html">2023.06.05.14.48.06</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/frontend/2023.05.23.17.02.26.html">2023.05.23.17.02.26</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/frontend/2023.05.22.15.55.57.html">2023.05.22.15.55.57</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/frontend/2023.05.15.22.13.27.html">2023.05.15.22.13.27</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/frontend/2023.05.02.19.17.32.html">2023.05.02.19.17.32</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/frontend/2023.04.23.23.07.51.html">2023.04.23.23.07.51</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../changelogs/ingestion_server/index.html">Ingestion server changelogs</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><div class="visually-hidden">Toggle navigation of Ingestion server changelogs</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/ingestion_server/2024.03.06.16.40.36.html">2024.03.06.16.40.36</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/ingestion_server/2024.02.28.18.32.08.html">2024.02.28.18.32.08</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/ingestion_server/2024.02.07.18.41.16.html">2024.02.07.18.41.16</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/ingestion_server/2024.01.18.18.31.08.html">2024.01.18.18.31.08</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/ingestion_server/2023.12.12.17.23.14.html">2023.12.12.17.23.14</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/ingestion_server/2023.12.06.19.13.35.html">2023.12.06.19.13.35</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/ingestion_server/2023.11.14.18.39.29.html">2023.11.14.18.39.29</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/ingestion_server/2023.10.25.06.38.07.html">2023.10.25.06.38.07</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/ingestion_server/2023.10.19.06.08.15.html">2023.10.19.06.08.15</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/ingestion_server/2023.10.06.18.02.20.html">2023.10.06.18.02.20</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/ingestion_server/2023.09.29.17.40.50.html">2023.09.29.17.40.50</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/ingestion_server/2023.09.05.18.56.18.html">2023.09.05.18.56.18</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/ingestion_server/2023.08.29.17.36.35.html">2023.08.29.17.36.35</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/ingestion_server/2023.07.21.20.19.21.html">2023.07.21.20.19.21</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/ingestion_server/2023.07.05.17.46.34.html">2023.07.05.17.46.34</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/ingestion_server/2023.06.13.00.25.04.html">2023.06.13.00.25.04</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/ingestion_server/2023.06.07.17.56.30.html">2023.06.07.17.56.30</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/ingestion_server/2023.05.17.22.57.37.html">2023.05.17.22.57.37</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelogs/ingestion_server/2023.05.03.22.29.52.html">2023.05.03.22.29.52</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../frontend/index.html">Nuxt frontend</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><div class="visually-hidden">Toggle navigation of Nuxt frontend</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../frontend/guides/index.html">Guides</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" role="switch" type="checkbox"/><label for="toctree-checkbox-16"><div class="visually-hidden">Toggle navigation of Guides</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../frontend/guides/quickstart.html">Quickstart guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../frontend/guides/deploy.html">Deployment runbook</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../frontend/guides/test.html">Running frontend tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../frontend/guides/analytics.html">Analytics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../frontend/guides/icons.html">SVG Icon Sprites in Openverse Frontend</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../frontend/guides/translate.html">Translate</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../frontend/reference/index.html">Reference</a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" role="switch" type="checkbox"/><label for="toctree-checkbox-17"><div class="visually-hidden">Toggle navigation of Reference</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../frontend/reference/i18n.html">Internationalization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../frontend/reference/feature_flags.html">Feature flags</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../frontend/reference/testing_guidelines.html">Testing Guidelines</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../frontend/reference/playwright_tests.html">Playwright tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../frontend/reference/storybook_tests.html">Storybook tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../frontend/reference/miscellaneous.html">Miscellaneous notes on the frontend</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../frontend/reference/healthcheck.html">Nuxt Healthcheck</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../frontend/reference/nginx.html">Frontend reverse proxy</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../general/index.html">General development guidelines</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" role="switch" type="checkbox"/><label for="toctree-checkbox-18"><div class="visually-hidden">Toggle navigation of General development guidelines</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../general/contributing.html">Welcome</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../general/general_setup.html">General setup guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../general/quickstart.html">Quickstart guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../general/run.html">Run</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../general/test.html">Test</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../general/zero_downtime_database_management.html">Zero Downtime and Database Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../general/deployment.html">Deployments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../general/logging.html">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../general/https.html">Testing HTTPS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../general/stack.html">Stack</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../ingestion_server/index.html">Ingestion server</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" role="switch" type="checkbox"/><label for="toctree-checkbox-19"><div class="visually-hidden">Toggle navigation of Ingestion server</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../ingestion_server/guides/index.html">Guides</a><input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" role="switch" type="checkbox"/><label for="toctree-checkbox-20"><div class="visually-hidden">Toggle navigation of Guides</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../ingestion_server/guides/quickstart.html">Quickstart guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../ingestion_server/guides/config.html">Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../ingestion_server/guides/mapping.html">Mapping database tables to Elasticsearch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../ingestion_server/guides/test.html">Testing guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../ingestion_server/guides/deploy.html">Deployment runbook</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../ingestion_server/guides/migrate.html">Index migration runbook</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../ingestion_server/guides/upgrade.html">Manual index upgrade runbook</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../ingestion_server/guides/troubleshoot.html">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../ingestion_server/reference/index.html">Reference</a><input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" role="switch" type="checkbox"/><label for="toctree-checkbox-21"><div class="visually-hidden">Toggle navigation of Reference</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../ingestion_server/reference/elasticsearch.html">Elasticsearch and Indexing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../ingestion_server/reference/safety.html">Safety and Security Considerations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../ingestion_server/reference/notifications.html">Notifications</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../ingestion_server/reference/data_refresh.html">Data Refresh Limit</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../ingestion_server/reference/task_api.html">Ingestion server API</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../meta/index.html">Managing the Openverse</a><input class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" role="switch" type="checkbox"/><label for="toctree-checkbox-22"><div class="visually-hidden">Toggle navigation of Managing the Openverse</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../meta/incidents/index.html">Responding to Incidents</a><input class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" role="switch" type="checkbox"/><label for="toctree-checkbox-23"><div class="visually-hidden">Toggle navigation of Responding to Incidents</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../meta/incidents/runbooks/index.html">Runbooks</a><input class="toctree-checkbox" id="toctree-checkbox-24" name="toctree-checkbox-24" role="switch" type="checkbox"/><label for="toctree-checkbox-24"><div class="visually-hidden">Toggle navigation of Runbooks</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../meta/incidents/runbooks/incident_response_runbook.html">Incident Response Runbook</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../meta/contribution/index.html">Contributing to Openverse</a><input class="toctree-checkbox" id="toctree-checkbox-25" name="toctree-checkbox-25" role="switch" type="checkbox"/><label for="toctree-checkbox-25"><div class="visually-hidden">Toggle navigation of Contributing to Openverse</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../meta/contribution/github_contribution_practices.html">GitHub contribution practices</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../meta/contribution/dev_flow.html">Development workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../meta/contribution/current_maintainers.html">Current maintainers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../meta/contribution/communication_aliases.html">Communication aliases</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../meta/contribution/becoming_a_committer.html">Becoming a Committer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../meta/contribution/maintainer_tasks.html">Regular maintainer tasks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../meta/contribution/codespell.html">Codespell Configuration : spellcheck pre-commit hook</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../meta/project_boards/index.html">Project boards</a><input class="toctree-checkbox" id="toctree-checkbox-26" name="toctree-checkbox-26" role="switch" type="checkbox"/><label for="toctree-checkbox-26"><div class="visually-hidden">Toggle navigation of Project boards</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../meta/project_boards/issues.html">Issues project: Openverse Backlog</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../meta/project_boards/prs.html">PR project: Openverse PRs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../meta/project_boards/projects.html">Project project: Openverse Project Tracker</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../meta/project_boards/discussions.html">Discussion project: Openverse Discussions</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../meta/ci_cd/index.html">CI + CD workflow</a><input class="toctree-checkbox" id="toctree-checkbox-27" name="toctree-checkbox-27" role="switch" type="checkbox"/><label for="toctree-checkbox-27"><div class="visually-hidden">Toggle navigation of CI + CD workflow</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../meta/ci_cd/actions.html">Actions</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../meta/ci_cd/jobs/index.html">Jobs</a><input class="toctree-checkbox" id="toctree-checkbox-28" name="toctree-checkbox-28" role="switch" type="checkbox"/><label for="toctree-checkbox-28"><div class="visually-hidden">Toggle navigation of Jobs</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../meta/ci_cd/jobs/preparation.html">Preparation jobs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../meta/ci_cd/jobs/frontend.html">Frontend jobs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../meta/ci_cd/jobs/packages.html">Packages jobs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../meta/ci_cd/jobs/docker.html">Docker jobs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../meta/ci_cd/jobs/catalog.html">Catalog jobs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../meta/ci_cd/jobs/ingestion_server.html">Ingestion server jobs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../meta/ci_cd/jobs/api.html">API jobs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../meta/ci_cd/jobs/documentation.html">Documentation jobs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../meta/ci_cd/jobs/deployment.html">Deployment jobs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../meta/ci_cd/jobs/notification.html">Notification jobs</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../meta/ci_cd/flow.html">Flow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../meta/ci_cd/proof_of_functionality.html">Proof-of-functionality</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../meta/ci_cd/artifacts.html">Artifacts</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../meta/decision_making/index.html">Openverse Decision-Making Process</a><input class="toctree-checkbox" id="toctree-checkbox-29" name="toctree-checkbox-29" role="switch" type="checkbox"/><label for="toctree-checkbox-29"><div class="visually-hidden">Toggle navigation of Openverse Decision-Making Process</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../meta/decision_making/process_description.html">Process description</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../meta/decision_making/how_to_use.html">How to follow the process in different settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../meta/decision_making/additional_practices.html">Additional practices</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../meta/documentation/index.html">Documentation</a><input class="toctree-checkbox" id="toctree-checkbox-30" name="toctree-checkbox-30" role="switch" type="checkbox"/><label for="toctree-checkbox-30"><div class="visually-hidden">Toggle navigation of Documentation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../meta/documentation/quickstart.html">Quickstart guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../meta/documentation/guidelines.html">Documentation Guidelines</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../meta/documentation/extensions.html">Sphinx extensions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../meta/documentation/review.html">Documentation proofreading and review</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../meta/monitoring/index.html">Monitoring the Openverse</a><input class="toctree-checkbox" id="toctree-checkbox-31" name="toctree-checkbox-31" role="switch" type="checkbox"/><label for="toctree-checkbox-31"><div class="visually-hidden">Toggle navigation of Monitoring the Openverse</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../meta/monitoring/traffic/index.html">Traffic Management</a><input class="toctree-checkbox" id="toctree-checkbox-32" name="toctree-checkbox-32" role="switch" type="checkbox"/><label for="toctree-checkbox-32"><div class="visually-hidden">Toggle navigation of Traffic Management</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../meta/monitoring/traffic/runbooks/identifying-and-blocking-traffic-anomalies.html">Identifying and Blocking Traffic Anomalies in Cloudflare</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../meta/monitoring/cloudwatch_logs/index.html">Log querying</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../meta/monitoring/runbooks/index.html">Runbooks</a><input class="toctree-checkbox" id="toctree-checkbox-33" name="toctree-checkbox-33" role="switch" type="checkbox"/><label for="toctree-checkbox-33"><div class="visually-hidden">Toggle navigation of Runbooks</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../meta/monitoring/runbooks/api_http_2xx_under_threshold.html">Run Book: API Production HTTP 2XX responses count under threshold</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../meta/monitoring/runbooks/api_http_5xx_above_threshold.html">Run Book: API Production HTTP 5XX responses count above threshold</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../meta/monitoring/runbooks/api_avg_response_time_above_threshold.html">Run Book: API Production Average Response Time above threshold</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../meta/monitoring/runbooks/api_avg_response_time_anomaly.html">Run Book: API Production Average Response Time anomaly</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../meta/monitoring/runbooks/api_p99_response_time_above_threshold.html">Run Book: API Production P99 Response Time above threshold</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../meta/monitoring/runbooks/api_p99_response_time_anomaly.html">Run Book: API Production P99 Response Time anomaly</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../meta/monitoring/runbooks/api_request_count_anomaly.html">Run Book: API Production Request Count anomalously high</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../meta/monitoring/runbooks/nuxt_http_2xx_under_threshold.html">Run Book: Nuxt 2XX responses count under threshold</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../meta/monitoring/runbooks/nuxt_http_5xx_above_threshold.html">Run Book: Nuxt 5XX responses count above threshold</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../meta/monitoring/runbooks/nuxt_avg_response_time_above_threshold.html">Run Book: Nuxt Production Average Response Time above threshold</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../meta/monitoring/runbooks/nuxt_avg_response_time_anomaly.html">Run Book: Nuxt Production Average Response Time anomalously high</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../meta/monitoring/runbooks/nuxt_p99_response_time_above_threshold.html">Run Book: Nuxt Production P99 Response Time above threshold</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../meta/monitoring/runbooks/nuxt_p99_response_time_anomaly.html">Run Book: Nuxt Production P99 Response Time anomalously high</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../meta/monitoring/runbooks/nuxt_request_count_anomaly.html">Run Book: Nuxt Request Count anomalously high</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../meta/monitoring/runbooks/unhealthy_ecs_hosts.html">Run Book: Unhealthy hosts for ECS service</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../meta/maintenance/index.html">Openverse Infrastructure Maintenance</a><input class="toctree-checkbox" id="toctree-checkbox-34" name="toctree-checkbox-34" role="switch" type="checkbox"/><label for="toctree-checkbox-34"><div class="visually-hidden">Toggle navigation of Openverse Infrastructure Maintenance</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../meta/maintenance/elasticsearch_cluster.html">Elasticsearch cluster maintenance</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../packages/index.html">Node.js packages</a><input class="toctree-checkbox" id="toctree-checkbox-35" name="toctree-checkbox-35" role="switch" type="checkbox"/><label for="toctree-checkbox-35"><div class="visually-hidden">Toggle navigation of Node.js packages</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../packages/eslint_plugin/index.html"><code class="docutils literal notranslate"><span class="pre">@openverse/eslint-plugin</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-36" name="toctree-checkbox-36" role="switch" type="checkbox"/><label for="toctree-checkbox-36"><div class="visually-hidden">Toggle navigation of @openverse/eslint-plugin</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../packages/eslint_plugin/analytics_configuration.html"><code class="docutils literal notranslate"><span class="pre">analytics-configuration</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../packages/eslint_plugin/no-unexplained-disabled-test.html"><code class="docutils literal notranslate"><span class="pre">no-unexplained-disabled-test</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../../index.html">Projects</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-37" name="toctree-checkbox-37" role="switch" type="checkbox"/><label for="toctree-checkbox-37"><div class="visually-hidden">Toggle navigation of Projects</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../planning.html">Project Planning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../templates/implementation_plan.html">Template: Implementation Plan</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../templates/index.html">Template: Project Directory <code class="docutils literal notranslate"><span class="pre">index.md</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../templates/project_proposal.html">Template: Project Proposal</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../yearly_planning/index.html">Yearly Planning</a><input class="toctree-checkbox" id="toctree-checkbox-38" name="toctree-checkbox-38" role="switch" type="checkbox"/><label for="toctree-checkbox-38"><div class="visually-hidden">Toggle navigation of Yearly Planning</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../yearly_planning/process_outline.html">Yearly Planning: Process Outline</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../yearly_planning/project_themes.html">Project Themes</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../3d_model_support/index.html">3D Model Support</a><input class="toctree-checkbox" id="toctree-checkbox-39" name="toctree-checkbox-39" role="switch" type="checkbox"/><label for="toctree-checkbox-39"><div class="visually-hidden">Toggle navigation of 3D Model Support</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../3d_model_support/20220221-project_proposal.html">2022-02-21 Project Proposal: 3D model support</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../additional_search_views/index.html">Additional Search Views</a><input class="toctree-checkbox" id="toctree-checkbox-40" name="toctree-checkbox-40" role="switch" type="checkbox"/><label for="toctree-checkbox-40"><div class="visually-hidden">Toggle navigation of Additional Search Views</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../additional_search_views/20230424-project_proposal_additional_search_views.html">2023-04-24 Project Proposal: Additional search views</a></li>
<li class="toctree-l3"><a class="reference internal" href="../additional_search_views/20230719-implementation_plan_additional_search_views.html">2023-07-20 Implementation Plan: Additional Search Views</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../analytics/index.html">Analytics</a><input class="toctree-checkbox" id="toctree-checkbox-41" name="toctree-checkbox-41" role="switch" type="checkbox"/><label for="toctree-checkbox-41"><div class="visually-hidden">Toggle navigation of Analytics</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../analytics/20221006-implementation_plan_frontend.html">2022-10-06 Implementation Plan: Frontend event tracking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../analytics/20230307-backend_service.html">2023-03-07 Implementation Plan: Analytics backend and visualisation service</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../core_user_interface_improvement/index.html">Core User Interface Improvements</a><input class="toctree-checkbox" id="toctree-checkbox-42" name="toctree-checkbox-42" role="switch" type="checkbox"/><label for="toctree-checkbox-42"><div class="visually-hidden">Toggle navigation of Core User Interface Improvements</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../core_user_interface_improvement/20230314-project_proposal_core_ui_improvement.html">2023-03-14 Project Proposal: Core UI Improvement</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../data_normalization/index.html">Data Normalization</a><input class="toctree-checkbox" id="toctree-checkbox-43" name="toctree-checkbox-43" role="switch" type="checkbox"/><label for="toctree-checkbox-43"><div class="visually-hidden">Toggle navigation of Data Normalization</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../data_normalization/20240227-implementation_plan_catalog_data_cleaning.html">2024-02-27 Implementation Plan: Catalog Data Cleaning</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../document_all_media_properties/index.html">Document all media properties</a><input class="toctree-checkbox" id="toctree-checkbox-44" name="toctree-checkbox-44" role="switch" type="checkbox"/><label for="toctree-checkbox-44"><div class="visually-hidden">Toggle navigation of Document all media properties</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../document_all_media_properties/20230307-project_proposal.html">2023-03-07 Project proposal for Document all media properties</a></li>
<li class="toctree-l3"><a class="reference internal" href="../document_all_media_properties/20230426-implementation_plan_documenting_media_properties.html">2023-04-26 Implementation Plan: Document all media properties in the catalog</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../document_all_media_properties/samples/index.html">Samples</a><input class="toctree-checkbox" id="toctree-checkbox-45" name="toctree-checkbox-45" role="switch" type="checkbox"/><label for="toctree-checkbox-45"><div class="visually-hidden">Toggle navigation of Samples</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../document_all_media_properties/samples/openverse_media_properties.html">Openverse Media Properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="../document_all_media_properties/samples/sample_media_properties.html">sample_media_properties.md</a></li>
<li class="toctree-l4"><a class="reference internal" href="../document_all_media_properties/samples/sample_postamble.html">sample_postamble.md</a></li>
<li class="toctree-l4"><a class="reference internal" href="../document_all_media_properties/samples/sample_preamble.html">sample_preamble.md</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../document_all_media_properties/samples/index.html">Samples</a><input class="toctree-checkbox" id="toctree-checkbox-46" name="toctree-checkbox-46" role="switch" type="checkbox"/><label for="toctree-checkbox-46"><div class="visually-hidden">Toggle navigation of Samples</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../document_all_media_properties/samples/openverse_media_properties.html">Openverse Media Properties</a></li>
<li class="toctree-l3"><a class="reference internal" href="../document_all_media_properties/samples/sample_media_properties.html">sample_media_properties.md</a></li>
<li class="toctree-l3"><a class="reference internal" href="../document_all_media_properties/samples/sample_postamble.html">sample_postamble.md</a></li>
<li class="toctree-l3"><a class="reference internal" href="../document_all_media_properties/samples/sample_preamble.html">sample_preamble.md</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../feature_flags/index.html">Feature Flags</a><input class="toctree-checkbox" id="toctree-checkbox-47" name="toctree-checkbox-47" role="switch" type="checkbox"/><label for="toctree-checkbox-47"><div class="visually-hidden">Toggle navigation of Feature Flags</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../feature_flags/20220309-project_proposal.html">2022-03-09 Project Proposal: Feature flags</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../frontend_ui_state_cookie/index.html">Frontend UI State Cookie</a><input class="toctree-checkbox" id="toctree-checkbox-48" name="toctree-checkbox-48" role="switch" type="checkbox"/><label for="toctree-checkbox-48"><div class="visually-hidden">Toggle navigation of Frontend UI State Cookie</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../frontend_ui_state_cookie/20220218-project_proposal.html">2022-02-18 Project Propsal: Frontend UI State Cookie</a></li>
</ul>
</li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="index.html">Openverse Infrastructure</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-49" name="toctree-checkbox-49" role="switch" type="checkbox"/><label for="toctree-checkbox-49"><div class="visually-hidden">Toggle navigation of Openverse Infrastructure</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3 current current-page"><a class="current reference internal" href="#">2024-01-05 Implementation Plan: Finish moving all services to <code class="docutils literal notranslate"><span class="pre">openverse.org</span></code></a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../monitoring/index.html">Monitoring</a><input class="toctree-checkbox" id="toctree-checkbox-50" name="toctree-checkbox-50" role="switch" type="checkbox"/><label for="toctree-checkbox-50"><div class="visually-hidden">Toggle navigation of Monitoring</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../monitoring/20220307-project_proposal.html">2022-03-07 Project Proposal: Monitoring</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../monitoring/20230606_implementation_plan_ecs_alarms.html">2023-06-06 Implementation Plan: Baseline Alarms for ECS Services</a><input class="toctree-checkbox" id="toctree-checkbox-51" name="toctree-checkbox-51" role="switch" type="checkbox"/><label for="toctree-checkbox-51"><div class="visually-hidden">Toggle navigation of 2023-06-06 Implementation Plan: Baseline Alarms for ECS Services</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../monitoring/run_book_samples/stable_run_book_sample.html">Stable Run Book Sample</a></li>
<li class="toctree-l4"><a class="reference internal" href="../monitoring/run_book_samples/unstable_run_book_sample.html">Unstable Run Book Sample</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../monorepo/index.html">Monorepo</a><input class="toctree-checkbox" id="toctree-checkbox-52" name="toctree-checkbox-52" role="switch" type="checkbox"/><label for="toctree-checkbox-52"><div class="visually-hidden">Toggle navigation of Monorepo</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../monorepo/20221124-project_proposal.html">2022-11-24 Project Proposal: Monorepo</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../nuxt_3_migration/index.html">Nuxt 3 Migration</a><input class="toctree-checkbox" id="toctree-checkbox-53" name="toctree-checkbox-53" role="switch" type="checkbox"/><label for="toctree-checkbox-53"><div class="visually-hidden">Toggle navigation of Nuxt 3 Migration</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../nuxt_3_migration/20230604-project_proposal_nuxt_3_migration.html">2023-06-02 Project Proposal</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../popularity_optimizations/index.html">Popularity Calculation Optimizations</a><input class="toctree-checkbox" id="toctree-checkbox-54" name="toctree-checkbox-54" role="switch" type="checkbox"/><label for="toctree-checkbox-54"><div class="visually-hidden">Toggle navigation of Popularity Calculation Optimizations</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../popularity_optimizations/20230406-project_proposal_popularity_optimizations.html">2023-04-06 Project Proposal: Popularity Calculation Optimizations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../popularity_optimizations/20230420-implementation_plan_popularity_optimizations.html">Implementation Plan: Decoupling Popularity Calculations from the Data Refresh</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../project_improvement/index.html">Project board improvements</a><input class="toctree-checkbox" id="toctree-checkbox-55" name="toctree-checkbox-55" role="switch" type="checkbox"/><label for="toctree-checkbox-55"><div class="visually-hidden">Toggle navigation of Project board improvements</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../project_improvement/20230913-project_proposal_project_improvements.html">2023-09-13 Project proposal: Project board improvements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../project_improvement/20230914-implementation_plan_project_automations.html">2023-09-14 Implementation plan: Project automations</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../publish_dataset/index.html">Providing and maintaining an Openverse image dataset</a><input class="toctree-checkbox" id="toctree-checkbox-56" name="toctree-checkbox-56" role="switch" type="checkbox"/><label for="toctree-checkbox-56"><div class="visually-hidden">Toggle navigation of Providing and maintaining an Openverse image dataset</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../publish_dataset/20230706-project_proposal_openverse_dataset.html">2023-07-06 Project Proposal: Providing and maintaining an Openverse image dataset</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../search_relevancy_sandbox/index.html">Search Relevancy Sandbox</a><input class="toctree-checkbox" id="toctree-checkbox-57" name="toctree-checkbox-57" role="switch" type="checkbox"/><label for="toctree-checkbox-57"><div class="visually-hidden">Toggle navigation of Search Relevancy Sandbox</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../search_relevancy_sandbox/20230331-project_proposal_search_relevancy_sandbox.html">2023-03-31 Project Proposal: Search relevancy sandbox</a></li>
<li class="toctree-l3"><a class="reference internal" href="../search_relevancy_sandbox/20230406-implementation_plan_update_staging_database.html">2023-04-06 Implementation Plan: Update Staging Database</a></li>
<li class="toctree-l3"><a class="reference internal" href="../search_relevancy_sandbox/20230518-implementation_plan_staging_index_rapid_iteration.html">2023-05-18 Implementation Plan: Rapid iteration of ingestion server index configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../search_relevancy_sandbox/20230530-implementation_plan_staging_elasticsearch_reindex_dags.html">2023-06-08 Implementation Plan: Staging Elasticsearch Reindex DAGs</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../trust_and_safety/content_report_moderation/index.html">Sensitive Content Report Moderation Initial Practices</a><input class="toctree-checkbox" id="toctree-checkbox-58" name="toctree-checkbox-58" role="switch" type="checkbox"/><label for="toctree-checkbox-58"><div class="visually-hidden">Toggle navigation of Sensitive Content Report Moderation Initial Practices</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../trust_and_safety/content_report_moderation/20230411-project_proposal_content_report_moderation.html">2023-04-11 Project Proposal: Sensitive content report moderation: initial practices</a></li>
<li class="toctree-l3"><a class="reference internal" href="../trust_and_safety/content_report_moderation/20230517-implementation_plan_mature_copy_change.html">2023-05-17 Implementation Plan: Copy updates <code class="docutils literal notranslate"><span class="pre">mature</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">sensitive</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../trust_and_safety/content_report_moderation/20231208-implementation_plan_django_admin_moderator_access.html">2023-12-08 Implementation Plan: Django admin tools and access control for moderators</a></li>
<li class="toctree-l3"><a class="reference internal" href="../trust_and_safety/content_report_moderation/20240122-implementation_plan_bulk_moderation_actions.html">2024-01-22 Implementation Plan: Bulk Moderation Actions</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../trust_and_safety/detecting_sensitive_textual_content/index.html">Detecting and Blurring Sensitive Textual Content</a><input class="toctree-checkbox" id="toctree-checkbox-59" name="toctree-checkbox-59" role="switch" type="checkbox"/><label for="toctree-checkbox-59"><div class="visually-hidden">Toggle navigation of Detecting and Blurring Sensitive Textual Content</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../trust_and_safety/detecting_sensitive_textual_content/20230309-implementation_plan_sensitive_terms_list.html">2023-03-09 Implementation Plan: Sensitive Terms List</a></li>
<li class="toctree-l3"><a class="reference internal" href="../trust_and_safety/detecting_sensitive_textual_content/20230309-project_proposal_detecting_sensitive_textual_content.html">2023-03-09 Project Proposal: Detecting sensitive textual content and blurring all sensitive results</a></li>
<li class="toctree-l3"><a class="reference internal" href="../trust_and_safety/detecting_sensitive_textual_content/20230330-implementation_plan_filtering_and_designating_results_with_sensitive_textual_content.html">2023-03-30 Implementation Plan: Filtering and designating results with sensitive textual content</a></li>
<li class="toctree-l3"><a class="reference internal" href="../trust_and_safety/detecting_sensitive_textual_content/20230506-implementation_plan_frontend_blurring_sensitive.html">2023-05-06 Implementation Plan: Fetching, blurring sensitive results</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../trust_and_safety/index.html">Trust and Safety</a><input class="toctree-checkbox" id="toctree-checkbox-60" name="toctree-checkbox-60" role="switch" type="checkbox"/><label for="toctree-checkbox-60"><div class="visually-hidden">Toggle navigation of Trust and Safety</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../trust_and_safety/20230109-trust_and_safety_preliminary_overview_and_exploration.html">2023-01-09 Initial Overview and User Stories</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../trust_and_safety/content_report_moderation/index.html">Sensitive Content Report Moderation Initial Practices</a><input class="toctree-checkbox" id="toctree-checkbox-61" name="toctree-checkbox-61" role="switch" type="checkbox"/><label for="toctree-checkbox-61"><div class="visually-hidden">Toggle navigation of Sensitive Content Report Moderation Initial Practices</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../trust_and_safety/content_report_moderation/20230411-project_proposal_content_report_moderation.html">2023-04-11 Project Proposal: Sensitive content report moderation: initial practices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../trust_and_safety/content_report_moderation/20230517-implementation_plan_mature_copy_change.html">2023-05-17 Implementation Plan: Copy updates <code class="docutils literal notranslate"><span class="pre">mature</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">sensitive</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../trust_and_safety/content_report_moderation/20231208-implementation_plan_django_admin_moderator_access.html">2023-12-08 Implementation Plan: Django admin tools and access control for moderators</a></li>
<li class="toctree-l4"><a class="reference internal" href="../trust_and_safety/content_report_moderation/20240122-implementation_plan_bulk_moderation_actions.html">2024-01-22 Implementation Plan: Bulk Moderation Actions</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../trust_and_safety/detecting_sensitive_textual_content/index.html">Detecting and Blurring Sensitive Textual Content</a><input class="toctree-checkbox" id="toctree-checkbox-62" name="toctree-checkbox-62" role="switch" type="checkbox"/><label for="toctree-checkbox-62"><div class="visually-hidden">Toggle navigation of Detecting and Blurring Sensitive Textual Content</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../trust_and_safety/detecting_sensitive_textual_content/20230309-implementation_plan_sensitive_terms_list.html">2023-03-09 Implementation Plan: Sensitive Terms List</a></li>
<li class="toctree-l4"><a class="reference internal" href="../trust_and_safety/detecting_sensitive_textual_content/20230309-project_proposal_detecting_sensitive_textual_content.html">2023-03-09 Project Proposal: Detecting sensitive textual content and blurring all sensitive results</a></li>
<li class="toctree-l4"><a class="reference internal" href="../trust_and_safety/detecting_sensitive_textual_content/20230330-implementation_plan_filtering_and_designating_results_with_sensitive_textual_content.html">2023-03-30 Implementation Plan: Filtering and designating results with sensitive textual content</a></li>
<li class="toctree-l4"><a class="reference internal" href="../trust_and_safety/detecting_sensitive_textual_content/20230506-implementation_plan_frontend_blurring_sensitive.html">2023-05-06 Implementation Plan: Fetching, blurring sensitive results</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../visual_regression_testing/index.html">Visual Regression Testing</a><input class="toctree-checkbox" id="toctree-checkbox-63" name="toctree-checkbox-63" role="switch" type="checkbox"/><label for="toctree-checkbox-63"><div class="visually-hidden">Toggle navigation of Visual Regression Testing</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../visual_regression_testing/20220217-implementation_plan.html">2022-02-17 Implementation Plan: Visual regression testing</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../vuex_to_pina_conversion/index.html">Pinia Conversion</a><input class="toctree-checkbox" id="toctree-checkbox-64" name="toctree-checkbox-64" role="switch" type="checkbox"/><label for="toctree-checkbox-64"><div class="visually-hidden">Toggle navigation of Pinia Conversion</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../vuex_to_pina_conversion/20220223-project_proposal.html">2022-02-23 Project Proposal: Vuex to Pinia conversion</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../terms_of_service.html">Openverse Terms of Service</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">External links</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://openverse.org">Openverse</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/WordPress/openverse">GitHub</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="edit-this-page">
  <a class="muted-link" href="https://github.com/WordPress/openverse/edit/main/documentation/projects/proposals/infrastructure_improvements/20240105_implementation_plan_move_remaining_services_to_openverse_org.md" title="Edit this page">
    <svg aria-hidden="true" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <path d="M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4" />
      <line x1="13.5" y1="6.5" x2="17.5" y2="10.5" />
    </svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="implementation-plan-finish-moving-all-services-to-openverse-org">
<h1>2024-01-05 Implementation Plan: Finish moving all services to <code class="docutils literal notranslate"><span class="pre">openverse.org</span></code><a class="headerlink" href="#implementation-plan-finish-moving-all-services-to-openverse-org" title="Link to this heading">#</a></h1>
<p><strong>Author</strong>: <a class="reference external" href="https://github.com/sarayourfriend" title="sarayourfriend on GitHub">&#64;sarayourfriend</a></p>
<!-- See the implementation plan guide for more information: https://github.com/WordPress/openverse/tree/19791f51c063d0979112f4b9f4eeace04c8cf5ff/docs/projects#implementation-plans-status-in-rfc -->
<!-- This template is exhaustive and may include sections which aren't relevant to your project. Feel free to remove any sections which would not be useful to have. -->
<section id="reviewers">
<h2>Reviewers<a class="headerlink" href="#reviewers" title="Link to this heading">#</a></h2>
<!-- Choose two people at your discretion who make sense to review this based on their existing expertise. Check in to make sure folks aren't currently reviewing more than one other proposal or RFC. -->
<ul class="simple">
<li><p>[x] <a class="reference external" href="https://github.com/AetherUnbound" title="AetherUnbound on GitHub">&#64;AetherUnbound</a></p></li>
<li><p>[x] <a class="reference external" href="https://github.com/dhruvkb" title="dhruvkb on GitHub">&#64;dhruvkb</a></p></li>
</ul>
</section>
<section id="project-links">
<h2>Project links<a class="headerlink" href="#project-links" title="Link to this heading">#</a></h2>
<!-- Enumerate any references to other documents/pages, including milestones and other plans -->
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/WordPress/openverse/issues/2037">Project Thread</a></p></li>
</ul>
<p>This project does not have a project proposal because the scope and rationale of
the project are clear, as defined in the project thread. I’ve clarified these
expectations in the <a class="reference internal" href="#expected-outcomes">expected outcomes</a> section below.</p>
</section>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading">#</a></h2>
<!-- An overview of the implementation plan, if necessary. Save any specific steps for the section(s) below. -->
<p>Openverse’s Airflow instance and Django API both live on <code class="docutils literal notranslate"><span class="pre">openverse.engineering</span></code>
and must be moved to <code class="docutils literal notranslate"><span class="pre">openverse.org</span></code> in order to downgrade our Cloudflare plan
for <code class="docutils literal notranslate"><span class="pre">openverse.engineering</span></code>. A number of supporting services expect these
services to be there. Moving the Airflow instance is relatively trivial compared
to moving the API, primarily because Airflow has no external dependents (only
Openverse maintainers use it) and thus does not need redirects. Nor is it
subject to zero-downtime deployment requirements like the API.</p>
<p>This plan is split into two major parts:</p>
<ol class="arabic simple">
<li><p><a class="reference internal" href="#move-airflow-to-airflow-openverse-org">Move Airflow to <code class="docutils literal notranslate"><span class="pre">airflow.openverse.org</span></code></a></p></li>
<li><p><a class="reference internal" href="#move-the-django-api-to-api-openverse-org">Move the Django API to <code class="docutils literal notranslate"><span class="pre">api.openverse.org</span></code> (with staging at <code class="docutils literal notranslate"><span class="pre">api-staging.openverse.org</span></code>)</a></p></li>
</ol>
<p>There are also two supplemental parts, a <a class="reference internal" href="#preliminary-work">preliminary step</a>
and a
<a class="reference internal" href="#update-references-announce-to-make-blog-and-finalise">finalisation step</a>.</p>
</section>
<section id="expected-outcomes">
<h2>Expected Outcomes<a class="headerlink" href="#expected-outcomes" title="Link to this heading">#</a></h2>
<!-- List any succinct expected products from this implementation plan. -->
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">openverse.engineering</span></code> should move to the Cloudflare free tier</p></li>
<li><p>All services should live on <code class="docutils literal notranslate"><span class="pre">openverse.org</span></code></p></li>
<li><p>Production API domains on <code class="docutils literal notranslate"><span class="pre">openverse.engineering</span></code> should redirect to
<code class="docutils literal notranslate"><span class="pre">openverse.org</span></code></p></li>
</ul>
</section>
<section id="step-by-step-plan">
<h2>Step-by-step plan<a class="headerlink" href="#step-by-step-plan" title="Link to this heading">#</a></h2>
<!--
List the ordered steps of the plan in the form of imperative-tone issue titles.

The goal of this section is to give a high-level view of the order of implementation any relationships like
blockages or other dependencies that exist between steps of the plan. Link each step to the step description
in the following section.

If special deployments are required between steps, explicitly note them here. Additionally, highlight key
milestones like when a feature flag could be made available in a particular environment.
-->
<section id="preliminary-work">
<h3>0. Preliminary work<a class="headerlink" href="#preliminary-work" title="Link to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>Move the <code class="docutils literal notranslate"><span class="pre">access</span></code> module that configures Cloudflare Access to a new
<code class="docutils literal notranslate"><span class="pre">cloudflare</span></code> root module, maintaining the existing configuration.
<a class="reference internal" href="#moving-cloudflare-access-and-the-new-cloudflare-root-module">The rationale for the new root module is explained in this section</a>.</p></li>
<li><p>Rename the <code class="docutils literal notranslate"><span class="pre">org</span></code> root module to <code class="docutils literal notranslate"><span class="pre">github</span></code>.</p></li>
<li><p>Extract load balancer listener rules out of <code class="docutils literal notranslate"><span class="pre">generic/service</span></code> and
<code class="docutils literal notranslate"><span class="pre">generic/ec2-service</span></code> in favour of a more generic form of the existing
<code class="docutils literal notranslate"><span class="pre">service-alias</span></code> called <code class="docutils literal notranslate"><span class="pre">service-domain</span></code> (effects all existing services in the
<code class="docutils literal notranslate"><span class="pre">next</span></code> root modules that have external domains). Update all existing services
to use this new <code class="docutils literal notranslate"><span class="pre">service-domain</span></code> module for all domains associated with them.</p></li>
<li><p>Similarly, extract security group configuration out of <code class="docutils literal notranslate"><span class="pre">generic/service</span></code> and
<code class="docutils literal notranslate"><span class="pre">generic/ec2-service</span></code> into a new module, <code class="docutils literal notranslate"><span class="pre">generic/security-group</span></code>. The new
module will configure a default security group with strict access based on
our load balancer and SSH-bastion entrypoints for HTTP(S) and SSH
respectively. As with the previous point, this deduplicates near identical
configuration in <code class="docutils literal notranslate"><span class="pre">generic/service</span></code> and <code class="docutils literal notranslate"><span class="pre">generic/ec2-service</span></code>.</p></li>
<li><p>Remove <code class="docutils literal notranslate"><span class="pre">register_with_target_group</span></code> option from <code class="docutils literal notranslate"><span class="pre">ec2-service</span></code> to simplify the
module. Registration must be handled using Ansible playbooks for these
services, so the updated module should never register the instance to the
target group.</p></li>
</ol>
</section>
<section id="move-airflow-to-airflow-openverse-org">
<h3>1. Move Airflow to <code class="docutils literal notranslate"><span class="pre">airflow.openverse.org</span></code><a class="headerlink" href="#move-airflow-to-airflow-openverse-org" title="Link to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>Add <code class="docutils literal notranslate"><span class="pre">airflow.openverse.org</span></code> to Cloudflare access.</p></li>
<li><p>Create a new <code class="docutils literal notranslate"><span class="pre">airflow</span></code> module in the <code class="docutils literal notranslate"><span class="pre">next</span></code> root module. Use <code class="docutils literal notranslate"><span class="pre">ec2-service</span></code> as
the basis with Ansible used to configure the service (compose file, settings,
and cron job), to start the service, and to register it with the target
group.</p></li>
<li><p>Spin down the existing Airflow EC2 service to prevent any potential issues
with multiple running instances.</p></li>
<li><p>Deploy the <code class="docutils literal notranslate"><span class="pre">next</span></code> Airflow module and use the new <code class="docutils literal notranslate"><span class="pre">service-domain</span></code> to point
<code class="docutils literal notranslate"><span class="pre">airflow.openverse.org</span></code> to the new service.</p></li>
<li><p>Port all Airflow Cloudflare rules from <code class="docutils literal notranslate"><span class="pre">openverse.engineering</span></code> to
<code class="docutils literal notranslate"><span class="pre">openverse.org</span></code>.</p></li>
<li><p>Validate the new Airflow service:</p>
<ul class="simple">
<li><p>Stop the existing service</p></li>
<li><p>Run provider DAGs and data refresh from the new service</p></li>
<li><p>Debug issues</p></li>
<li><p>Decommission the old service and remove all supports for it from Cloudflare
(rules, Access, etc)</p></li>
</ul>
</li>
</ol>
</section>
<section id="move-the-django-api-to-api-openverse-org">
<h3>2. Move the Django API to <code class="docutils literal notranslate"><span class="pre">api.openverse.org</span></code><a class="headerlink" href="#move-the-django-api-to-api-openverse-org" title="Link to this heading">#</a></h3>
<p>The general idea for this set of changes is to leverage the fact that both
<code class="docutils literal notranslate"><span class="pre">openverse.engineering</span></code> and <code class="docutils literal notranslate"><span class="pre">openverse.org</span></code> can point to the external load
balancer, and the load balancer can freely discriminate between requests for
each host and direct requests wherever it wants, with listeners ordered in
arbitrary priority. That means all the API needs, at the most basic level, is to
have new CNAME records in Cloudflare added to point <code class="docutils literal notranslate"><span class="pre">api.openverse.org</span></code> to the
load balancer, and new load balancer listener rules to forward those requests to
the existing API services. By itself, that would indeed make the API accessible
on <code class="docutils literal notranslate"><span class="pre">openverse.org</span></code>. However, it would leave all the Cloudflare configuration for
the API on <code class="docutils literal notranslate"><span class="pre">openverse.engineering</span></code> inoperable for <code class="docutils literal notranslate"><span class="pre">openverse.org</span></code> (because these
rules are per-zone). So, the rest of the steps in this section are aimed at
carefully preparing and moving the service’s Cloudflare configuration to
<code class="docutils literal notranslate"><span class="pre">openverse.org</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>I am using <code class="docutils literal notranslate"><span class="pre">api(-(production|staging))?.</span></code> as shorthand for the three subdomains used
for our staging and production API. For clarity, this should be understood to expand to:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">api.</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">api-production.</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">api-staging.</span></code></p></li>
</ul>
</div>
<ol class="arabic simple">
<li><p>Add <code class="docutils literal notranslate"><span class="pre">api(-(production|staging))?.openverse.org/admin</span></code> to Cloudflare Access
and duplicate all API Cloudflare rules from <code class="docutils literal notranslate"><span class="pre">openverse.engineering</span></code> to
<code class="docutils literal notranslate"><span class="pre">openverse.org</span></code>.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#moving-cloudflare-access-and-the-new-cloudflare-root-module">This must all be in the <code class="docutils literal notranslate"><span class="pre">cloudflare</span></code> root module</a>.</p></li>
</ul>
</li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">api(-(production|staging))?.openverse.org</span></code> to <code class="docutils literal notranslate"><span class="pre">domain_aliases</span></code> for the
API services and use a new <code class="docutils literal notranslate"><span class="pre">generic/service-domain</span></code> to point
<code class="docutils literal notranslate"><span class="pre">api(-(production|staging))?.openverse.org</span></code> to the existing API services.</p>
<ul class="simple">
<li><p>Rule priority does not matter here because our rules match on the requested
host name, so the <code class="docutils literal notranslate"><span class="pre">openverse.org</span></code> and <code class="docutils literal notranslate"><span class="pre">openverse.engineering</span></code> listeners
will never interrupt each other.</p></li>
</ul>
</li>
<li><p>Redirect <code class="docutils literal notranslate"><span class="pre">api(-production)?.openverse.engineering</span></code> to <code class="docutils literal notranslate"><span class="pre">api.openverse.org</span></code>
using a Cloudflare
<a class="reference external" href="https://developers.cloudflare.com/rules/url-forwarding/single-redirects/">dynamic single redirect rule</a>
that matches only when a special header is present for testing.</p>
<ul class="simple">
<li><p>Configure this in
<a class="reference internal" href="#moving-cloudflare-access-and-the-new-cloudflare-root-module">the <code class="docutils literal notranslate"><span class="pre">cloudflare</span></code> root module</a>,
not in the environment root modules.</p></li>
<li><p>We will redirect both <code class="docutils literal notranslate"><span class="pre">api.openverse.engineering</span></code> and
<code class="docutils literal notranslate"><span class="pre">api-production.openverse.engineering</span></code> to <code class="docutils literal notranslate"><span class="pre">api.openverse.org</span></code>. This reduces
the complexity of the dynamic target expression.</p></li>
<li><p>We will not redirect staging. Staging has no guarantees for users.
Excluding it from the redirects also reduces the overall complexity of both
the redirect match and dynamic target expressions.</p></li>
</ul>
</li>
<li><p>Update UptimeRobot monitors to point to the <code class="docutils literal notranslate"><span class="pre">openverse.org</span></code> domains.</p></li>
<li><p><strong>Production only steps</strong></p>
<ol class="arabic simple">
<li><p>Update the frontend to point to <code class="docutils literal notranslate"><span class="pre">api.openverse.org</span></code> (only possible after
configuring the domain for the production API because the staging and
production frontend both point to the production API).</p></li>
<li><p>Open PRs in Gutenberg and Jetpack to update the Openverse integration URL
to <code class="docutils literal notranslate"><span class="pre">api.openverse.org</span></code></p></li>
<li><p>Create and run a management command to run in production that emails
registered production API users to notify them of the change to
<code class="docutils literal notranslate"><span class="pre">api.openverse.org</span></code>. Make it absolutely clear the old URL will redirect
from the old domain to prevent anyone from panicking that their
integration will break.</p></li>
<li><p>On the rollout date specified in the message from the previous step,
remove the special header condition of the redirect listeners so that all
requests to the old production API domains redirect to
<code class="docutils literal notranslate"><span class="pre">api.openverse.org</span></code>.</p>
<ul class="simple">
<li><p>I suggest 2 weeks from the day we send the emails.</p></li>
</ul>
</li>
</ol>
</li>
<li><p>For Cloudflare redirect rules to work, we need to maintain a DNS record on
each subdomain that is redirected. Replace Cloudflare DNS records for
<code class="docutils literal notranslate"><span class="pre">api(-production)?.openverse.engineering</span></code> domains with noops, configured in
the <code class="docutils literal notranslate"><span class="pre">cloudflare</span></code> root module. In doing this, we’ll need to immediately remove
the <code class="docutils literal notranslate"><span class="pre">generic/service-domain</span></code> instances pointing those domains to the load
balancer, otherwise the next root module will overwrite the new settings.</p>
<ul class="simple">
<li><p>After this, control over requests to <code class="docutils literal notranslate"><span class="pre">openverse.engineering</span></code> API domains
will rest solely with the Cloudflare redirect rule, and forwarded to the
appropriate <code class="docutils literal notranslate"><span class="pre">openverse.org</span></code>.</p></li>
</ul>
</li>
<li><p>Remove Cloudflare configuration for <code class="docutils literal notranslate"><span class="pre">openverse.engineering</span></code> API domains from
rules and Access. This will require manually deleting resources in the
Cloudflare dashboard, as well as changes to the <code class="docutils literal notranslate"><span class="pre">cloudflare</span></code> root module (for
Access).</p></li>
</ol>
</section>
<section id="update-references-announce-to-make-blog-and-finalise">
<h3>3. Update references, announce to Make Blog, and finalise<a class="headerlink" href="#update-references-announce-to-make-blog-and-finalise" title="Link to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>Update references to <code class="docutils literal notranslate"><span class="pre">openverse.engineering</span></code> domains in our public and
internal documentation to use <code class="docutils literal notranslate"><span class="pre">openverse.org</span></code> instead.</p></li>
<li><p>Publish a Make blog post announcing the change.</p></li>
<li><p>Decomission all resources from <code class="docutils literal notranslate"><span class="pre">openverse.engineering</span></code> except the redirect
rule. At this point, I think we can also remove the
<code class="docutils literal notranslate"><span class="pre">search.openverse.engineering</span></code> settings, as no one should be using it anymore
and it was never a “public” access point for the Openverse frontend (we only
used it in the iframe and never advertised it directly).</p></li>
<li><p>Downgrade <code class="docutils literal notranslate"><span class="pre">openverse.engineering</span></code> Cloudflare plan to the free tier.</p></li>
</ol>
</section>
</section>
<section id="step-details">
<h2>Step details<a class="headerlink" href="#step-details" title="Link to this heading">#</a></h2>
<!--
Describe all of the implementation steps listed in the "step-by-step plan" in detail.

For each step description, ensure the heading includes an obvious reference to the step as described in the
"step-by-step plan" section above.
-->
<section id="id1">
<h3>Preliminary work<a class="headerlink" href="#id1" title="Link to this heading">#</a></h3>
<p>The first of these two steps are straightforward, with little possible
additional description to the tasks other than what I’ve written above. Instead,
I’ll share the rationale for the changes here. I do so in order of complexity,
from least to most complex. I’ve added specific steps for the networking module
changes because those are more complex.</p>
<section id="moving-cloudflare-access-and-the-new-cloudflare-root-module">
<h4>Moving Cloudflare Access and the new <code class="docutils literal notranslate"><span class="pre">cloudflare</span></code> root module<a class="headerlink" href="#moving-cloudflare-access-and-the-new-cloudflare-root-module" title="Link to this heading">#</a></h4>
<p>Moving the Cloudflare Access configuration out of the legacy root modules is
just one more step in our progress towards eliminating the legacy Terraform
configuration. There’s nothing about the module that requires it to be in the
legacy root environments, so this should be a fairly easy one to move, but will
require importing resources into the new root module and using
<code class="docutils literal notranslate"><span class="pre">terraform</span> <span class="pre">state</span> <span class="pre">rm</span></code> to remove them from the legacy root module, in order to
prevent them from being deleted if the legacy root module is applied.</p>
<p>We’ll move this to a new <code class="docutils literal notranslate"><span class="pre">cloudflare</span></code> root module rather than one of the <code class="docutils literal notranslate"><span class="pre">next</span></code>
environment root modules, because there is no specific environment related to
these settings, and it’s best to keep these all together in a single place.
Later on, in the Airflow and API work, we’ll expand the Cloudflare configuration
in <code class="docutils literal notranslate"><span class="pre">cloudflare</span></code> to include the Page, Cache, and WAF rules related to these
services that are currently configured by hand in the <code class="docutils literal notranslate"><span class="pre">openverse.engineering</span></code>
zone.</p>
<p>Cloudflare rules also have priority ordering, they are matched in a specific
order, and we need to be able to manage that ordering explicitly. We cannot
easily (reliably) configure environment-specific rules in a separate root
modules with priorities that reference the other environment’s rules, at least
not without creating an artificial dependency between the two (like some shared
super-variable file the two reference to determine priority settings). It’s much
easier to write and understand if the rules are all configured in the same
place, with priority settings that can explicitly reference each other within
the same module or even same file.</p>
<p>Using a separate root module also makes it possible to quickly iterate on
changes to the Cloudflare configuration in Terraform without introducing
dangling changes in the <code class="docutils literal notranslate"><span class="pre">next</span></code> root modules, which are more complex, and evolve
at a slower pacing than our Cloudflare configuration sometimes does. This will
make it possible to open PRs with changes to the Cloudflare configuration
recorded in Terraform, while reducing the chance that another change in
<code class="docutils literal notranslate"><span class="pre">next/production</span></code> (for example, where we might store these otherwise) could
overwrite them.</p>
<p>A potential alternative to using a new <code class="docutils literal notranslate"><span class="pre">cloudflare</span></code> root module to include these
in the <code class="docutils literal notranslate"><span class="pre">org</span></code> root module, which is separated from the <code class="docutils literal notranslate"><span class="pre">next</span></code> environment root
modules for similar reasons: the resources it configures are almost entirely
independent of our AWS infrastructure. That would be fine, in fact, except that
aside from the Cloudflare Access configuration, <code class="docutils literal notranslate"><span class="pre">org</span></code> is a strange name for the
place to store Cloudflare configurations, because they aren’t related to
Openverse’s organisational practices (again, aside from Cf Access). We could
rename <code class="docutils literal notranslate"><span class="pre">org</span></code> to something else, but I’m not sure what would include the GitHub
repository configuration and our Cloudflare configuration. I’ve thought about
this quite a bit and can’t come up with a name that would be <em>more</em> intuitive
than a separate <code class="docutils literal notranslate"><span class="pre">cloudflare</span></code> root module. If we do that, I would also like to
rename the <code class="docutils literal notranslate"><span class="pre">org</span></code> root module to <code class="docutils literal notranslate"><span class="pre">github</span></code>, and move the configuration in its
<code class="docutils literal notranslate"><span class="pre">github</span></code> child module into the root module.</p>
<p>This separation also moves things somewhat further in-line with recommendations
to have smaller root modules.
<a class="reference external" href="https://www.digitalocean.com/community/tutorial-series/how-to-manage-infrastructure-with-terraform">This blog post describes an extreme version of this where each application is its own root module, and environment configuration differences are stored in <code class="docutils literal notranslate"><span class="pre">tfvars</span></code> files, rather than in the HCL itself</a>.
I don’t think we should move in that direction, mostly because I think our
current per-environment monolith works well, particularly because it makes sure
that the interconnected parts of our application do not drift, without requiring
the use of a meta-Terraform tool like terragrunt that would coordinate the
per-application root modules when connected root modules change.</p>
<p>However, having smaller root modules is good for Terraform performance (it’s
already rather slow in <code class="docutils literal notranslate"><span class="pre">next/production</span></code>), and considering the potential volume
of Cloudflare Page, Cache, and WAF rules (we already have heaps, they’re just
not in Terraform), I think this is a good opportunity to prevent unnecessarily
increasing the size of <code class="docutils literal notranslate"><span class="pre">next/production</span></code>.</p>
<div class="admonition-question-to-reviewers admonition">
<p class="admonition-title">Question to reviewers</p>
<p>Reviewers, I am curious what y’all think about renaming <code class="docutils literal notranslate"><span class="pre">org</span></code> to <code class="docutils literal notranslate"><span class="pre">github</span></code>. If we
want to keep that change super minimal, we can just rename the directory and
tfvars file. Nothing else technically needs to change, we don’t even need to
move resources out of the <code class="docutils literal notranslate"><span class="pre">github</span></code> child module. This would serve to clarify the
boundary and purpose of that root module.</p>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Madison and Dhruv gave approval for this approach during review of the proposal.
We will use a new <code class="docutils literal notranslate"><span class="pre">cloudflare</span></code> root module and rename <code class="docutils literal notranslate"><span class="pre">org</span></code> to <code class="docutils literal notranslate"><span class="pre">github</span></code>. We will
remove the <code class="docutils literal notranslate"><span class="pre">github</span></code> child module from <code class="docutils literal notranslate"><span class="pre">org</span></code>/<code class="docutils literal notranslate"><span class="pre">github</span></code> root module: that’s a “nice to
have” but is not strictly necessary, nor does it provide any significant benefit
making the work to move each resource into the root module out of a child module
worth it.</p>
</div>
</section>
<section id="register-with-target-group-removal">
<h4><code class="docutils literal notranslate"><span class="pre">register_with_target_group</span></code> removal<a class="headerlink" href="#register-with-target-group-removal" title="Link to this heading">#</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">register_with_target_group</span></code> variable exists because <code class="docutils literal notranslate"><span class="pre">ec2-service</span></code> was
developed in conjunction with our Ansible playbooks, and as such, originally
leaned heavily into patterns that existed in our legacy EC2-based service
modules. In particular, it assumed that services would have their initial
configuration and start-up based in the <code class="docutils literal notranslate"><span class="pre">user_data</span></code> script (what we refer to as
<code class="docutils literal notranslate"><span class="pre">init.tpl</span></code>). This is no longer the pattern we will follow for EC2 instances, for
two reasons:</p>
<ol class="arabic simple">
<li><p>In order to move away from Terraform as a deployment tool so that we use it
purely as a resource provisioning tool, we are slowly embracing Ansible as a
tool for configuring and maintaining running services on EC2 instances. To
keep this consistent, the Terraform modules should not contain explicit
implementation details of the services (or at least avoid them as much as
possible) so that we don’t create multiple sources of truth. See
<a class="reference external" href="https://github.com/WordPress/openverse-infrastructure/blob/9ec75430741aeb1bfb770e2f237e308c2a819716/modules/services/elasticsearch/init.tpl#L3-L47">this comment in the legacy Elasticsearch <code class="docutils literal notranslate"><span class="pre">init.tpl</span></code> script for further exploration on this concept</a>.</p></li>
<li><p>EC2 instances can be responsible for more than one service running on them.
For example, there’s no reason the EC2 instance running Kibana could not also
run another non-critical internal service. Even with a small instance, there
is plenty CPU and RAM to spare on it that would be best shared with another
similar low-intensity service rather than paying for an additional EC2
instance.</p></li>
</ol>
<p>Both of these create a situation where the moment an EC2 instance is provisioned
and turns on for the first time (and runs the <code class="docutils literal notranslate"><span class="pre">user_data</span></code> script), there will
not be a service running on it. However, when registering a target to a target
group, the target <em>must</em> respond on the port registered to the target group.
That is impossible if the service isn’t running, e.g., after we’ve provisioned
the EC2 instance but before we’ve run the Ansible playbook to configure and
start the service for the first time.</p>
<p>Therefore, with this approach in mind, there are zero use cases for
<code class="docutils literal notranslate"><span class="pre">register_with_target_group</span></code>. It will <em>always</em> be false when following our new
approach to EC2-based services, because we will always configure new services
using Ansible rather than the <code class="docutils literal notranslate"><span class="pre">user_data</span></code> script.</p>
<p>This change is not strictly necessary for this project, but given that we will
expand the usage of <code class="docutils literal notranslate"><span class="pre">ec2-service</span></code>, it’s a good idea to do it now.</p>
<p>Despite the complex rationale, this step is relatively simple and will only
require deleting the <code class="docutils literal notranslate"><span class="pre">register_with_target_group</span></code> variable from
<code class="docutils literal notranslate"><span class="pre">generic/ec2-service</span></code> and removing its usage from the module. It <em>might</em> require
<code class="docutils literal notranslate"><span class="pre">terraform</span> <span class="pre">state</span> <span class="pre">mv</span></code> because it will result in the removal of some <code class="docutils literal notranslate"><span class="pre">count</span></code>
declarations on resources in <code class="docutils literal notranslate"><span class="pre">generic/ec2-service</span></code>, but Terraform is recently
sometimes able to detect these moves without manual intervention.</p>
</section>
<section id="extract-networking-and-domain-configuration-from-generic-service-and-generic-ec2-service-modules-service-domain-and-service-networking">
<h4>Extract networking and domain configuration from <code class="docutils literal notranslate"><span class="pre">generic/service</span></code> and <code class="docutils literal notranslate"><span class="pre">generic/ec2-service</span></code> modules (<code class="docutils literal notranslate"><span class="pre">service-domain</span></code> and <code class="docutils literal notranslate"><span class="pre">service-networking</span></code>)<a class="headerlink" href="#extract-networking-and-domain-configuration-from-generic-service-and-generic-ec2-service-modules-service-domain-and-service-networking" title="Link to this heading">#</a></h4>
<p>Both <code class="docutils literal notranslate"><span class="pre">generic/service</span></code> and <code class="docutils literal notranslate"><span class="pre">generic/ec2-service</span></code> include the following groups of
resources that share similar configurations between the modules:</p>
<ul class="simple">
<li><p>Security group</p></li>
<li><p>Cloudflare domain management</p></li>
</ul>
<p>For each of these, a foundational set of assumptions exist that are duplicated
either between <code class="docutils literal notranslate"><span class="pre">generic/service</span></code> and <code class="docutils literal notranslate"><span class="pre">generic/ec2-service</span></code> or between those
modules and <code class="docutils literal notranslate"><span class="pre">generic/service-alias</span></code>. In particular, canary configuration for
load balancer listeners related to domains and security group rules (including
the fundamental assumptions we have about how our services can be accessed) are
duplicated.</p>
<p>The two steps in the step-by-step plan will deduplicate these details and
consolidate the following information into purpose-fit modules that can be used
interchangeably with ECS and EC2 based services:</p>
<ul class="simple">
<li><p>That HTTP access to live services always through our load balancers, and as
such should only need access on HTTP ports from origins within our VPC (in
other words, no external HTTP access directly to public IPs or DNS endpoints).</p></li>
<li><p>That SSH access to EC2 instances always runs through the SSH bastion (as of
<a class="reference external" href="https://github.com/WordPress/openverse-infrastructure/pull/743">https://github.com/WordPress/openverse-infrastructure/pull/743</a>) and as such
port 22 only needs to accept connections from the SSH bastion and no where
else.</p></li>
<li><p>That services may have multiple names/aliases (for example, <code class="docutils literal notranslate"><span class="pre">api.</span></code> and
<code class="docutils literal notranslate"><span class="pre">api-production.</span></code>) and those aliases must operate identically <em>without
redirects</em> (to prevent SEO issues), including when considering services with
multiple, unbalanced targets (e.g., canary services with only 1 instances vs
main services with &gt;1 instance). In these cases, listeners must correctly
weight targets in forwarding rules, and this is true of all aliases for the
service. This in particular deduplicates subdomain handling in
<code class="docutils literal notranslate"><span class="pre">generic/service</span></code> and <code class="docutils literal notranslate"><span class="pre">generic/service-alias</span></code>.</p></li>
</ul>
<p>It’s important to do these now, because after we add Airflow to the <code class="docutils literal notranslate"><span class="pre">next</span></code> root
modules and move the API to <code class="docutils literal notranslate"><span class="pre">openverse.org</span></code>, we’ll have a whole host of new
subdomains and listeners to handle in distinct ways. We should do this now,
before that’s the case, to avoid further complexity and juggling needed if we do
it afterwards.</p>
<p>Once this is finished, the API service configuration would look something like
this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">locals</span> <span class="p">{</span>
  <span class="n">nginx_port</span> <span class="o">=</span> <span class="mi">8080</span>
<span class="p">}</span>

<span class="n">module</span> <span class="s2">&quot;security-group&quot;</span> <span class="p">{</span>
  <span class="n">public_ports</span> <span class="o">=</span> <span class="p">[</span><span class="n">local</span><span class="o">.</span><span class="n">nginx_port</span><span class="p">]</span>
  <span class="c1"># ...</span>
<span class="p">}</span>

<span class="n">module</span> <span class="s2">&quot;service&quot;</span> <span class="p">{</span>
  <span class="n">security_group</span> <span class="o">=</span> <span class="n">module</span><span class="o">.</span><span class="n">security_group</span><span class="o">.</span><span class="n">sg</span>
  <span class="n">public_port</span> <span class="o">=</span> <span class="n">local</span><span class="o">.</span><span class="n">nginx_port</span>
  <span class="c1"># ...</span>
<span class="p">}</span>

<span class="n">module</span> <span class="s2">&quot;api-openverse-org&quot;</span> <span class="p">{</span>
  <span class="n">source</span> <span class="o">=</span> <span class="s2">&quot;generic/service-domain&quot;</span>
  <span class="n">target_groups</span> <span class="o">=</span> <span class="n">module</span><span class="o">.</span><span class="n">service</span><span class="o">.</span><span class="n">targets</span>
  <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;api&quot;</span>
  <span class="n">value</span> <span class="o">=</span> <span class="n">module</span><span class="o">.</span><span class="n">service</span><span class="o">.</span><span class="n">dns_name</span>
  <span class="n">cf_zone</span> <span class="o">=</span> <span class="n">openverse_org_cf_zone</span>
<span class="p">}</span>

<span class="n">module</span> <span class="s2">&quot;api-production-openverse-org&quot;</span> <span class="p">{</span>
  <span class="n">source</span> <span class="o">=</span> <span class="s2">&quot;generic/service-domain&quot;</span>
  <span class="n">target_groups</span> <span class="o">=</span> <span class="n">module</span><span class="o">.</span><span class="n">service</span><span class="o">.</span><span class="n">targets</span>
  <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;api-production&quot;</span>
  <span class="n">value</span> <span class="o">=</span> <span class="n">module</span><span class="o">.</span><span class="n">service</span><span class="o">.</span><span class="n">dns_name</span>
  <span class="n">cf_zone</span> <span class="o">=</span> <span class="n">openverse_org_cf_zone</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Do not take the above as a concrete implementation example, I’ve just imagined
what it <em>could</em> look like for the purposes of helping visualise how the new
generic networking modules would fit into existing services.</p>
</div>
<p>As with the other preliminary steps, this is not strictly necessary, but it’s a
good opportunity to make this improvement and deduplicate these concerns out of
the various modules into shared locations. This will result in overall simpler
modules with more code reuse. It will, however, require juggling resources
around with <code class="docutils literal notranslate"><span class="pre">terraform</span> <span class="pre">state</span> <span class="pre">mv</span></code>, so it should not be considered trivial. For
live services, we will need to take care during implementation to prevent
downtime (though there isn’t anything here that should strictly result in
downtime).</p>
<p>These should be implemented in two separate PRs, one for <code class="docutils literal notranslate"><span class="pre">service-domain</span></code> and
another for <code class="docutils literal notranslate"><span class="pre">security-group</span></code>.</p>
<section id="generic-service-domain">
<h5><code class="docutils literal notranslate"><span class="pre">generic/service-domain</span></code><a class="headerlink" href="#generic-service-domain" title="Link to this heading">#</a></h5>
<p>The steps to implement this change are:</p>
<ol class="arabic">
<li><p>Rename <code class="docutils literal notranslate"><span class="pre">generic/service-alias</span></code> into <code class="docutils literal notranslate"><span class="pre">generic/service-domain</span></code> by duplicating
the existing module into the updated name, then convert all instances of
<code class="docutils literal notranslate"><span class="pre">generic/service-alias</span></code> to <code class="docutils literal notranslate"><span class="pre">generic/service-domain</span></code>. This may require
<code class="docutils literal notranslate"><span class="pre">tf</span> <span class="pre">state</span> <span class="pre">mv</span></code>. Finally, delete <code class="docutils literal notranslate"><span class="pre">generic/service-alias</span></code>.</p></li>
<li><p>Update <code class="docutils literal notranslate"><span class="pre">generic/service-domain</span></code> to accept a list of target group
configuration objects rather than a <code class="docutils literal notranslate"><span class="pre">service</span></code> module instance. This makes the
API more flexible and less tied to <code class="docutils literal notranslate"><span class="pre">generic/service</span></code>’s implementation
details.</p>
<ul class="simple">
<li><p>The variable to replace <code class="docutils literal notranslate"><span class="pre">service</span></code> should be named something like
<code class="docutils literal notranslate"><span class="pre">target_groups</span></code> and have the following signature:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>variable &quot;target_groups&quot; {
  type = list(object({
    // `aws_target_group` object
    target_group = any
    // The weight of this target relative to others in the list. This could be, for example, the number of ECS tasks running in the service registered to the target group or the number of EC2 instances registered to the target group
    // If there is a single target, this is ignored
    weight = optional(number, null)
  }))

  validation {
    condition = len(var.target_groups) == 1 || alltrue([for tg in var.target_groups: tg.weight != null])
    error_message = &quot;Target group configurations must include weight when multiple target groups exist&quot;
  }
}
</pre></div>
</div>
<ul class="simple">
<li><p>Rather than <code class="docutils literal notranslate"><span class="pre">service.has_canary</span></code>, the new module should use
<code class="docutils literal notranslate"><span class="pre">len(var.target_groups)</span> <span class="pre">&gt;</span> <span class="pre">0</span></code> to determine whether to use weighted
listeners.</p></li>
</ul>
</li>
<li><p>Create new instances of <code class="docutils literal notranslate"><span class="pre">generic/service-domain</span></code> for the domains currently
managed by existing <code class="docutils literal notranslate"><span class="pre">generic/service</span></code> and <code class="docutils literal notranslate"><span class="pre">generic/ec2-service</span></code> instances.
These are the domains passed as <code class="docutils literal notranslate"><span class="pre">subdomain</span></code> to those modules, like
<code class="docutils literal notranslate"><span class="pre">api-production</span></code> is passed to <code class="docutils literal notranslate"><span class="pre">service.production-api</span></code>. This will also
require using <code class="docutils literal notranslate"><span class="pre">tf</span> <span class="pre">state</span> <span class="pre">mv</span></code> to reuse the existing resources in the generic
service modules. Use a temporary variable <code class="docutils literal notranslate"><span class="pre">configure_domains</span></code> passed to the
generic service modules to make it possible to do this service-by-service and
in staging before production.</p></li>
<li><p>After all services have all domains configured using <code class="docutils literal notranslate"><span class="pre">generic/service-domain</span></code>
and <code class="docutils literal notranslate"><span class="pre">configure_domains</span> <span class="pre">=</span> <span class="pre">false</span></code> on their generic service module instances,
remove domain configuration from the generic services and the temporary
<code class="docutils literal notranslate"><span class="pre">configure_domains</span></code> variable.</p></li>
</ol>
<p>Implement all of this first in staging, and then repeat the process in
production to avoid dangling changes in a production caused by <code class="docutils literal notranslate"><span class="pre">tf</span> <span class="pre">state</span> <span class="pre">mv</span></code> not
being reflected on <code class="docutils literal notranslate"><span class="pre">main</span></code>.</p>
</section>
<section id="generic-security-group">
<h5><code class="docutils literal notranslate"><span class="pre">generic/security-group</span></code><a class="headerlink" href="#generic-security-group" title="Link to this heading">#</a></h5>
<p>This should be a good deal simpler than <code class="docutils literal notranslate"><span class="pre">generic/service-domain</span></code>.</p>
<ol class="arabic simple">
<li><p>Create the new <code class="docutils literal notranslate"><span class="pre">generic/security-group</span></code> module and have it configure a
security group with the following, using <code class="docutils literal notranslate"><span class="pre">aws_security_group_rule</span></code> to ensure
it’s always possible to add rules to the security group outside the module:</p>
<ul class="simple">
<li><p>Allow all outbound traffic. All our services currently do this, and it will
be easy to make this conditional in the future if we need it, but we can
avoid adding complexity here for now.</p></li>
<li><p>Accept traffic on ports configured as <code class="docutils literal notranslate"><span class="pre">public_ports</span></code>. We actually do not
need ingress from Cloudflare directly to the service because all services
have HTTP mediated through the load balancer, so access to the “public
port” is always from within the VPC.</p></li>
<li><p>Allow SSH ingress from the SSH bastion only if <code class="docutils literal notranslate"><span class="pre">var.ssh</span> <span class="pre">=</span> <span class="pre">true</span></code>. This
should be a variable because ECS services don’t need it, but we want to use
the same heuristic for all SSH access to EC2 instances.</p></li>
<li><p>These are the basic assumptions for all our services. If a service needs
additional rules, rather than adding conditionals, the service should
create purpose-fit <code class="docutils literal notranslate"><span class="pre">aws_security_group_rule</span></code> instances and attach them to
the exported security group.</p></li>
</ul>
</li>
<li><p>Add a temporary variable to generic service modules <code class="docutils literal notranslate"><span class="pre">create_security_group</span></code>
that defaults to <code class="docutils literal notranslate"><span class="pre">true</span></code>. We’ll use this to enable us in the next step to move
security groups for each service one-by-one.</p></li>
<li><p>For each concrete service, first in staging then production, create an
instance of <code class="docutils literal notranslate"><span class="pre">generic/security-group</span></code>, using <code class="docutils literal notranslate"><span class="pre">count</span></code> on the module to target
staging first. Use <code class="docutils literal notranslate"><span class="pre">tf</span> <span class="pre">state</span> <span class="pre">mv</span></code> to move security groups out of the generic
service module used for the concrete service and into the new
<code class="docutils literal notranslate"><span class="pre">generic/security-group</span></code> instance.</p>
<ul class="simple">
<li><p>For example, to do this for the frontend:</p>
<ul>
<li><p>Create <code class="docutils literal notranslate"><span class="pre">generic/security-group</span></code> in <code class="docutils literal notranslate"><span class="pre">concrete/frontend</span></code> with
<code class="docutils literal notranslate"><span class="pre">count</span> <span class="pre">=</span> <span class="pre">var.environment</span> <span class="pre">==</span> <span class="pre">&quot;staging&quot;</span> <span class="pre">?</span> <span class="pre">1</span> <span class="pre">:</span> <span class="pre">0</span></code></p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">terraform</span> <span class="pre">state</span> <span class="pre">mv</span></code> to move
<code class="docutils literal notranslate"><span class="pre">module.staging-frontend.module.service.aws_security_group.service</span></code> to
<code class="docutils literal notranslate"><span class="pre">module.staging-frontend.module.security-group.aws_security_group.this</span></code></p></li>
<li><p>Set <code class="docutils literal notranslate"><span class="pre">create_security_group</span></code> on the <code class="docutils literal notranslate"><span class="pre">generic/service</span></code> instance to
<code class="docutils literal notranslate"><span class="pre">var.environment</span> <span class="pre">!=</span> <span class="pre">&quot;staging&quot;</span></code>.</p></li>
</ul>
</li>
</ul>
</li>
</ol>
<p>Repeat this until all generic service modules have
<code class="docutils literal notranslate"><span class="pre">create_security_group</span> <span class="pre">=</span> <span class="pre">false</span></code> and a dedicated <code class="docutils literal notranslate"><span class="pre">generic/security-group</span></code>
instance.</p>
</section>
</section>
</section>
<section id="moving-airflow-to-next">
<h3>Moving Airflow to <code class="docutils literal notranslate"><span class="pre">next</span></code><a class="headerlink" href="#moving-airflow-to-next" title="Link to this heading">#</a></h3>
<p><a class="reference internal" href="#move-airflow-to-airflow-openverse-org">The steps listed above for Airflow</a>
should be fairly straightforward, primarily, as I’ve said elsewhere, because
Airflow is not a zero-downtime service, so we don’t need to worry about keeping
the same running instance the entire time.</p>
<p>Before we have the new Airflow instance up and running using the method in the
next section, we’ll want to preemptively set up Cloudflare Access for the new
<code class="docutils literal notranslate"><span class="pre">airflow.openverse.org</span></code> domain. Do this by adding <code class="docutils literal notranslate"><span class="pre">airflow.openverse.org</span></code> to the
Cloudflare Access configuration
<a class="reference internal" href="#moving-cloudflare-access-and-the-new-cloudflare-root-module">in the new <code class="docutils literal notranslate"><span class="pre">cloudflare</span></code> root module</a>.</p>
<p>When doing this, we should also add all Cloudflare Page, Cache, and WAF rules
related to Airflow over from <code class="docutils literal notranslate"><span class="pre">openverse.engineering</span></code> into the <code class="docutils literal notranslate"><span class="pre">cloudflare</span></code> root
module onto the <code class="docutils literal notranslate"><span class="pre">openverse.org</span></code> zone. Right now these are not configured in
Terraform, so we will take the opportunity now to do so.</p>
<p>To clarify the redirect expectations, we will <em>not</em> redirect
<code class="docutils literal notranslate"><span class="pre">airflow.openverse.engineering</span></code> to <code class="docutils literal notranslate"><span class="pre">airflow.openverse.org</span></code>. This is an internal
service and there is no reason to maintain additional code to redirect it.</p>
<section id="deploy-and-maintain-airflow-using-ansible">
<h4>Deploy and maintain Airflow using Ansible<a class="headerlink" href="#deploy-and-maintain-airflow-using-ansible" title="Link to this heading">#</a></h4>
<p>The complexity of this change will primarily come from adding significant new
functionality to our Ansible playbooks, in particular, the ability to read/write
secrets to environment variables on EC2 instances. Our Airflow instance has
<a class="reference external" href="https://github.com/WordPress/openverse-infrastructure/blob/b9b5094124a6e96458544b722262c33bacf04b42/modules/services/catalog-airflow/init.tpl#L39-L77">a <em>lot</em> of environment variables configured in <code class="docutils literal notranslate"><span class="pre">init.tpl</span></code></a>
and all of these will need to be able to be managed by the Ansible playbook to
configure the service.</p>
<p>To do this, we will use Ansible Vault, with git-crypt used to lock the vault
password file.
<a class="reference external" href="https://docs.ansible.com/ansible/latest/vault_guide/index.html">Refer to Ansible Vault’s documentation here</a>.
<a class="reference external" href="https://www.redhat.com/sysadmin/ansible-playbooks-secrets">This blog post from a Red Hat sysadmin does a good job describing how Ansible Vault works</a>.
We will use Ansible Vault to store the secrets themselves, and git-crypt to
encrypt/decrypt the password file used to unlock the vault. We won’t use
git-crypt to encrypt/decrypt the secrets themselves because Ansible Vault has
excellent integration with Ansible playbooks, whereas if we used git-crypt we’d
need to invent a new way of managing hostvars or playbook template files.</p>
<p>Use <code class="docutils literal notranslate"><span class="pre">ansible.builtin.lineinfile</span></code> to sync secret environment variables into a
<code class="docutils literal notranslate"><span class="pre">sensitive.env</span></code> file. Environment variables that are not secret should just go
into the hostvars and templated into the compose file, rather than in the vault.
That will allow us to use <code class="docutils literal notranslate"><span class="pre">no_log:</span> <span class="pre">true</span></code> on <code class="docutils literal notranslate"><span class="pre">ansible.builtin.lineinfile</span></code> for
secrets that are in the vault, while still getting to see verbose diffs when
non-sensitive variables are changing.</p>
<p>Likewise, we’ll take this opportunity to further reduce <code class="docutils literal notranslate"><span class="pre">init.tpl</span></code> for the new
Airflow EC2 instance to only configure the authorized keys and basic environment
variables. In reference to <code class="docutils literal notranslate"><span class="pre">generic/ec2-user-data</span></code>, this would mean setting
<code class="docutils literal notranslate"><span class="pre">install_docker</span></code> and <code class="docutils literal notranslate"><span class="pre">install_cloudwatch</span></code> to false. Instead, the new playbook to
manage our Airflow configuration will handle installing these dependencies as
well as configuring the CloudWatch agent. Use <code class="docutils literal notranslate"><span class="pre">ansible.builtin.yum</span></code> to manage
the dependencies (make sure to pin their versions!) and <code class="docutils literal notranslate"><span class="pre">ansible.builtin.script</span></code>
to install the docker compose plugin when needed (make sure to use compose v2
for this, rather than the v1 used by <code class="docutils literal notranslate"><span class="pre">catalog-airflow/init.tpl</span></code>). Our Airflow
configuration also requires <code class="docutils literal notranslate"><span class="pre">git</span></code>, used by the DAG sync script, so install that
too. In the future we’ll augment the playbook to include the option to update
these dependencies.</p>
<p>Re-write the compose file as <code class="docutils literal notranslate"><span class="pre">compose.yml.jinja2</span></code> in <code class="docutils literal notranslate"><span class="pre">ansible/airflow/templates</span></code>
to follow the compose v2 convention and explicit Jinja2 template naming. Refer
to <code class="docutils literal notranslate"><span class="pre">ansible/kibana/templates/compose.yml.jinja2</span></code> for an example of this.
Remember to use the <code class="docutils literal notranslate"><span class="pre">sensitive.env</span></code> file for secrets so that we can safely diff
the compose file without logging secrets, separate from changes to the sensitive
environment variables.</p>
<p>Store the <code class="docutils literal notranslate"><span class="pre">openverse-catalog</span></code> tag in the Airflow hostvars to make it easy to
update during deployments. Update the <code class="docutils literal notranslate"><span class="pre">just</span> <span class="pre">bump</span></code> recipe to modify the hostvars
file instead of the Terraform file.</p>
<p>In the playbook, include a step to check if the data refresh or other critical
DAGs are running, and disallow deployment if they are (include a <code class="docutils literal notranslate"><span class="pre">force</span></code>
variable to override this functionality). Use the Airflow CLI to determine DAG
state.</p>
</section>
</section>
<section id="moving-the-api">
<h3>Moving the API<a class="headerlink" href="#moving-the-api" title="Link to this heading">#</a></h3>
<p>In contrast to the Airflow work, the API does not need a full new deployment for
this, primarily because it is already in the <code class="docutils literal notranslate"><span class="pre">next</span></code> root modules. Instead, the
work for the API is concerned only with adding the new <code class="docutils literal notranslate"><span class="pre">openverse.org</span></code> domains
to point to the existing API service, and then turning the
<code class="docutils literal notranslate"><span class="pre">openverse.engineering</span></code> ones into redirects. There is also support work involved
to notify registered applications of the change, including a management command
to email them and a Make post to draft and publish.</p>
<p>Potentially the most complex aspect of this is actually the Cloudflare redirect
rule to send API traffic from the <code class="docutils literal notranslate"><span class="pre">openverse.engineering</span></code> domains to
<code class="docutils literal notranslate"><span class="pre">openverse.org</span></code>. I am 95% confident that we can do this with a single dynamic
redirect rule, which is available in the free tier.</p>
<p>The rule should match requests using something like the following expression:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">http</span><span class="o">.</span><span class="n">host</span> <span class="n">matches</span> <span class="s2">&quot;api(-production)?\.openverse.engineering&quot;</span>
</pre></div>
</div>
<p>As mentioned in the step-by-step section, we will only redirect production
domains. This reduces the complexity of the match expression and the dynamic
target expression below. It also helps to clarify the fact that staging is
volatile and has no guarantees for anyone using it (which is mostly us).</p>
<p>The expression should also temporarily look for a special header’s presence,
acting as a feature flag, so that we don’t immediately start to redirect normal
users and can test the redirect:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">any</span><span class="p">(</span><span class="n">http</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">names</span><span class="p">[</span><span class="o">*</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;x-openverse-redirect&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">http</span><span class="o">.</span><span class="n">host</span> <span class="n">matches</span> <span class="s2">&quot;api(-production)?\.openverse.engineering&quot;</span>
</pre></div>
</div>
<p>Then, because we are only redirecting production, the match expression is
thankfully trivial and does not require <code class="docutils literal notranslate"><span class="pre">regex_replace</span></code> or other string
manipulation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">concat</span><span class="p">(</span><span class="s2">&quot;https://api.openverse.org&quot;</span><span class="p">,</span> <span class="n">http</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">uri</span><span class="p">)</span>
</pre></div>
</div>
<p>We cannot modify query parameters in the redirect, so there’s nothing we can do
to re-write the <code class="docutils literal notranslate"><span class="pre">url</span></code> parameter to the oembed endpoint. Luckily, that endpoint’s
request serializer ignores the hostname of the <code class="docutils literal notranslate"><span class="pre">url</span></code> parameter altogether, so it
won’t cause a backwards compatibility issue.</p>
<p>As mentioned in the step-by-step section, we will configure this rule in
<a class="reference internal" href="#moving-cloudflare-access-and-the-new-cloudflare-root-module">the <code class="docutils literal notranslate"><span class="pre">cloudflare</span></code> root module</a>.</p>
</section>
<section id="finalizing-the-move">
<h3>Finalizing the move<a class="headerlink" href="#finalizing-the-move" title="Link to this heading">#</a></h3>
<p>The finalization steps handle cleaning up documentation and other non-critical
references, as well as announcing the change on Make. Old links to production
API will continue to work as redirects, so there’s no need to update them right
away.</p>
</section>
</section>
<section id="dependencies">
<h2>Dependencies<a class="headerlink" href="#dependencies" title="Link to this heading">#</a></h2>
<section id="feature-flags">
<h3>Feature flags<a class="headerlink" href="#feature-flags" title="Link to this heading">#</a></h3>
<!-- List feature flags/environment variables that will be utilised in the development of this plan. -->
<p>We will utilise the following temporary Terraform variables for certain stages
of the work (all covered in detail above):</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">configure_domains</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">create_security_group</span></code></p></li>
</ul>
<p>These will be removed by the time their relevant steps are complete.</p>
</section>
<section id="infrastructure">
<h3>Infrastructure<a class="headerlink" href="#infrastructure" title="Link to this heading">#</a></h3>
<!-- Describe any infrastructure that will need to be provisioned or modified. In particular, identify associated potential cost changes. -->
<p>This entire project is fundamentally an infrastructure one, with small changes
to the API and frontend code to support it.</p>
<p>As covered above, the effect of this is a savings of 250 USD per month, once we
can downgrade the <code class="docutils literal notranslate"><span class="pre">openverse.engineering</span></code> Cloudflare account to the free tier.</p>
</section>
<section id="other-projects-or-work">
<h3>Other projects or work<a class="headerlink" href="#other-projects-or-work" title="Link to this heading">#</a></h3>
<!-- Note any projects this plan is dependent on. -->
<p>This project blocks our effort to reintroduce comprehensive rate limiting to our
frontend and API. The details of that work are covered in
<a class="reference external" href="https://github.com/WordPress/openverse-infrastructure/issues/747">this issue in the private Openverse infrastructure repository</a>.</p>
</section>
</section>
<section id="rollback">
<h2>Rollback<a class="headerlink" href="#rollback" title="Link to this heading">#</a></h2>
<!-- How do we roll back this solution in the event of failure? Are there any steps that can not easily be rolled back? -->
<p>The only critical rollback to keep in mind is when we turn off the special
header that controls the new Cloudflare redirect rule.</p>
<p>When we remove the header condition, we should be ready to immediately add it
back, in case we see signs that the redirect is not working the way it is
intended to.</p>
<p>At this point we will already have tested the fact that <code class="docutils literal notranslate"><span class="pre">api.openverse.org</span></code> is
correctly accepting requests and forming responses using the correct domain, so
the only potential issue would be if the redirect causes a controllable issue
for a large number of users, or if we missed a critical edge case.</p>
<p>In those cases, we can just add the header condition back or manually turn the
redirect rule off in the Cloudflare dashboard, whichever is easiest at the time.</p>
</section>
<section id="privacy">
<h2>Privacy<a class="headerlink" href="#privacy" title="Link to this heading">#</a></h2>
<!-- How does this approach protect users' privacy? -->
<p>There are no privacy considerations for this project. Nothing is changing with
how we store or present data.</p>
</section>
<section id="localization">
<h2>Localization<a class="headerlink" href="#localization" title="Link to this heading">#</a></h2>
<!-- Any translation or regional requirements? Any differing legal requirements based on user location? -->
<p>Only the email and Make post call for new copy, and we localise neither.
Therefore, this project requires no localisation.</p>
</section>
<section id="risks">
<h2>Risks<a class="headerlink" href="#risks" title="Link to this heading">#</a></h2>
<!-- What risks are we taking with this solution? Are there risks that once taken can’t be undone?-->
<p>There is inherent and unavoidable risk that a large number of integrations do
not follow redirects, and would start failing. There’s nothing we can do about
this, unless we wish to maintain direct access to the API from
<code class="docutils literal notranslate"><span class="pre">openverse.engineering</span></code>. However, that would preclude us from gaining the
benefits of this work, and if that ends up being the case, this truly would have
been for naught, because it makes the blocked rate limiting approach impossible
and prevents us from downgrading the Cloudflare zone to the free tier.</p>
</section>
<section id="prior-art">
<h2>Prior art<a class="headerlink" href="#prior-art" title="Link to this heading">#</a></h2>
<!-- Include links to documents and resources that you used when coming up with your solution. Credit people who have contributed to the solution that you wish to acknowledge. -->
<p><a class="reference external" href="https://github.com/WordPress/openverse/issues/2038">The project thread issue contains some valuable preliminary discussion and links to related work Dhruv and Zack did when we first started thinking about this move</a>.</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="../monitoring/index.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Monitoring</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="index.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Openverse Infrastructure</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              <a class="muted-link " href="https://github.com/WordPress/openverse" aria-label="GitHub"><svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a>
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">2024-01-05 Implementation Plan: Finish moving all services to <code class="docutils literal notranslate"><span class="pre">openverse.org</span></code></a><ul>
<li><a class="reference internal" href="#reviewers">Reviewers</a></li>
<li><a class="reference internal" href="#project-links">Project links</a></li>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#expected-outcomes">Expected Outcomes</a></li>
<li><a class="reference internal" href="#step-by-step-plan">Step-by-step plan</a><ul>
<li><a class="reference internal" href="#preliminary-work">0. Preliminary work</a></li>
<li><a class="reference internal" href="#move-airflow-to-airflow-openverse-org">1. Move Airflow to <code class="docutils literal notranslate"><span class="pre">airflow.openverse.org</span></code></a></li>
<li><a class="reference internal" href="#move-the-django-api-to-api-openverse-org">2. Move the Django API to <code class="docutils literal notranslate"><span class="pre">api.openverse.org</span></code></a></li>
<li><a class="reference internal" href="#update-references-announce-to-make-blog-and-finalise">3. Update references, announce to Make Blog, and finalise</a></li>
</ul>
</li>
<li><a class="reference internal" href="#step-details">Step details</a><ul>
<li><a class="reference internal" href="#id1">Preliminary work</a><ul>
<li><a class="reference internal" href="#moving-cloudflare-access-and-the-new-cloudflare-root-module">Moving Cloudflare Access and the new <code class="docutils literal notranslate"><span class="pre">cloudflare</span></code> root module</a></li>
<li><a class="reference internal" href="#register-with-target-group-removal"><code class="docutils literal notranslate"><span class="pre">register_with_target_group</span></code> removal</a></li>
<li><a class="reference internal" href="#extract-networking-and-domain-configuration-from-generic-service-and-generic-ec2-service-modules-service-domain-and-service-networking">Extract networking and domain configuration from <code class="docutils literal notranslate"><span class="pre">generic/service</span></code> and <code class="docutils literal notranslate"><span class="pre">generic/ec2-service</span></code> modules (<code class="docutils literal notranslate"><span class="pre">service-domain</span></code> and <code class="docutils literal notranslate"><span class="pre">service-networking</span></code>)</a><ul>
<li><a class="reference internal" href="#generic-service-domain"><code class="docutils literal notranslate"><span class="pre">generic/service-domain</span></code></a></li>
<li><a class="reference internal" href="#generic-security-group"><code class="docutils literal notranslate"><span class="pre">generic/security-group</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#moving-airflow-to-next">Moving Airflow to <code class="docutils literal notranslate"><span class="pre">next</span></code></a><ul>
<li><a class="reference internal" href="#deploy-and-maintain-airflow-using-ansible">Deploy and maintain Airflow using Ansible</a></li>
</ul>
</li>
<li><a class="reference internal" href="#moving-the-api">Moving the API</a></li>
<li><a class="reference internal" href="#finalizing-the-move">Finalizing the move</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dependencies">Dependencies</a><ul>
<li><a class="reference internal" href="#feature-flags">Feature flags</a></li>
<li><a class="reference internal" href="#infrastructure">Infrastructure</a></li>
<li><a class="reference internal" href="#other-projects-or-work">Other projects or work</a></li>
</ul>
</li>
<li><a class="reference internal" href="#rollback">Rollback</a></li>
<li><a class="reference internal" href="#privacy">Privacy</a></li>
<li><a class="reference internal" href="#localization">Localization</a></li>
<li><a class="reference internal" href="#risks">Risks</a></li>
<li><a class="reference internal" href="#prior-art">Prior art</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/scripts/furo.js?v=32e29ea5"></script>
    <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../../_static/copybutton.js?v=f281be69"></script>
    </body>
</html>