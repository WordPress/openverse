import{_ as E}from"./CSy7Uc4e.js";import{w as f,a as h,v as M}from"./C67TMzvP.js";import{o as O}from"./CzMkt2mC.js";import{u as z}from"./D218PAw5.js";import{V as A}from"./C9bMQDiX.js";import{_ as N}from"./DAtDKoKx.js";import{_ as D}from"./DLmQARLo.js";import{d as P,V as q,G as b,z as i,T as G,I as L,O as Q,E as t,C as v,R as T,N as o,P as w,D as U,Q as j,M as H}from"./lKNUlTH_.js";const te=P({inheritAttrs:!1,__name:"VSearchBar",props:{modelValue:{default:""},placeholder:{}},emits:["update:modelValue","submit","recent-hidden"],setup(x,{emit:y}){const _=x,a=y,V=q(),u=b(null),m=b(null),r=i({get:()=>_.modelValue??"",set:e=>{a("update:modelValue",e)}}),g=()=>{a("submit")},S=i(()=>"top-14"),C=()=>{var e;(e=m.value)==null||e.focusInput()},B=()=>{p.value.length||n()},{handleKeydown:K,handleSelect:R,handleClear:$,recent:{show:k,hide:n,isVisible:l,selectedIdx:c,entries:p}}=z({focusInput:C,term:r,isMobile:!1});O(u,n),G(l,e=>{e||a("recent-hidden")});const F=i(()=>{const{class:e,...s}=V;return s});return(e,s)=>{const I=E;return U(),L("div",{ref_key:"searchBarEl",ref:u,class:w(["relative",e.$attrs.class])},[Q("form",{action:"/search",role:"search",class:"search-bar group flex h-12 flex-row items-center rounded-sm border-tx bg-default",onSubmit:h(g,["prevent"])},[t(A,T({ref_key:"inputFieldRef",ref:m},F.value,{modelValue:r.value,"onUpdate:modelValue":s[0]||(s[0]=d=>r.value=d),placeholder:e.placeholder||e.$t("hero.search.placeholder"),class:"search-field flex-grow border-tx bg-secondary text-secondary focus-within:bg-default focus:border-focus group-hover:bg-secondary group-hover:text-default group-hover:focus-within:bg-default","label-text":e.$t("search.searchBarLabel",{openverse:"Openverse"}),"connection-sides":["end"],"field-id":"search-bar",type:"search",autocomplete:"off",name:"q",role:"combobox","aria-autocomplete":"none","aria-expanded":o(l),"aria-controls":"recent-searches-list","aria-activedescendant":o(c)!==void 0?`option-${o(c)}`:void 0,onFocus:o(k),onKeydown:o(K)}),{default:v(()=>[j(e.$slots,"default")]),_:3},16,["modelValue","placeholder","label-text","aria-expanded","aria-activedescendant","onFocus","onKeydown"]),t(N,{type:"submit",route:"search",onKeydown:f(h(B,["exact"]),["tab"])},null,8,["onKeydown"])],32),t(I,null,{default:v(()=>[H(t(D,{"selected-idx":o(c),entries:o(p),class:w(["absolute inset-x-0 z-popover lg:flex",S.value]),onSelect:o(R),onClear:s[1]||(s[1]=d=>o($)(d)),onKeydown:f(o(n),["tab"])},null,8,["selected-idx","entries","class","onSelect","onKeydown"]),[[M,o(l)]])]),_:1})],2)}}});export{te as _};
