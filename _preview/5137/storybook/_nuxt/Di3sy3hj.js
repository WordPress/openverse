import{_ as O}from"./BecnK7b_.js";import{w as f,a as h,v as A}from"./BPwGQkdi.js";import{o as E}from"./C36Bf8YV.js";import{u as M}from"./Cy2Oj-z2.js";import{V as N}from"./BTEmcYvx.js";import{_ as z}from"./D5quKt_F.js";import{_ as D}from"./4nnA4bBz.js";import{d as P,W as q,D as b,C as d,w as G,K as H,P as L,R as a,G as v,T as Q,O as s,Q as w,H as T,S as U,N as W}from"./-WkxctKM.js";const ae=P({inheritAttrs:!1,__name:"VSearchBar",props:{modelValue:{default:""},placeholder:{}},emits:["update:modelValue","submit","recent-hidden"],setup(x,{emit:_}){const y=x,o=_,V=q(),u=b(null),m=b(null),r=d({get:()=>y.modelValue??"",set:e=>{o("update:modelValue",e)}}),S=()=>{o("submit")},g=d(()=>"top-14"),C=()=>{var e;(e=m.value)==null||e.focusInput()},K=()=>{p.value.length||n()},{handleKeydown:B,handleSelect:R,handleClear:$,recent:{show:k,hide:n,isVisible:l,selectedIdx:c,entries:p}}=M({focusInput:C,term:r,isMobile:!1});E(u,n),G(l,e=>{e||o("recent-hidden")});const F=d(()=>{const{class:e,...t}=V;return t});return(e,t)=>{const I=O;return T(),H("div",{ref_key:"searchBarEl",ref:u,class:w(["relative",e.$attrs.class])},[L("form",{action:"/search",role:"search",class:"search-bar group flex h-12 flex-row items-center rounded-sm border-tx bg-default",onSubmit:h(S,["prevent"])},[a(N,Q({ref_key:"inputFieldRef",ref:m},F.value,{modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=i=>r.value=i),placeholder:e.placeholder||e.$t("hero.search.placeholder"),class:"search-field flex-grow border-tx bg-secondary text-secondary focus-within:bg-default focus-visible:border-focus group-hover:text-default","label-text":e.$t("search.searchBarLabel",{openverse:"Openverse"}),"connection-sides":["end"],"field-id":"search-bar",type:"search",autocomplete:"off",name:"q",role:"combobox","aria-autocomplete":"none","aria-expanded":s(l),"aria-controls":"recent-searches-list","aria-activedescendant":s(c)!==void 0?`option-${s(c)}`:void 0,onFocus:s(k),onKeydown:s(B)}),{default:v(()=>[U(e.$slots,"default")]),_:3},16,["modelValue","placeholder","label-text","aria-expanded","aria-activedescendant","onFocus","onKeydown"]),a(z,{type:"submit",route:"search",onKeydown:f(h(K,["exact"]),["tab"])},null,8,["onKeydown"])],32),a(I,null,{default:v(()=>[W(a(D,{"selected-idx":s(c),entries:s(p),class:w(["absolute inset-x-0 z-popover lg:flex",g.value]),onSelect:s(R),onClear:t[1]||(t[1]=i=>s($)(i)),onKeydown:f(s(n),["tab"])},null,8,["selected-idx","entries","class","onSelect","onKeydown"]),[[A,s(l)]])]),_:1})],2)}}});export{ae as _};
