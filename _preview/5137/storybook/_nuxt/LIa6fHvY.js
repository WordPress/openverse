import{b as S}from"./CRWjC3CT.js";import{s as b}from"./BOX21o1p.js";import{f as N,v as T}from"./Xs_VBmP5.js";import{u as B}from"./BKKKF4W5.js";import{u as H}from"./CB8vaXoq.js";import{u as O,s as n}from"./CzZ80sy2.js";import{u as U}from"./Wvs2qRi4.js";import{_ as M}from"./Dtz3PEi1.js";import{_ as V}from"./D0Inw-95.js";import{u as F,_ as z,a as G,b as K}from"./BFVoMttG.js";import{_ as L}from"./COwFAUW2.js";import{_ as j}from"./BL_Owc9v.js";import{_ as q}from"./BcRBA15P.js";import{u as J}from"./DNZ0QEaN.js";import{h as Q}from"./DTU7yJca.js";import{u as W}from"./DYbvz0cH.js";import{u as X}from"./Cb-DsD-y.js";import{u as Y}from"./BnDRGrsR.js";import{d as Z,C as h,D as tt,ah as ot,w as et,H as i,K as d,F as f,L as x,O as c,T as it,R as m,P as y,G as at,I as w}from"./-WkxctKM.js";import"./CFMQYC2y.js";import"./CVV9gpzL.js";import"./CuPsdpTl.js";import"./DlAUqK2U.js";import"./BXAcwQ7Y.js";import"./D-XGaJuf.js";import"./BLIMiQvM.js";import"./CVtkxrq9.js";import"./D_T5hC5T.js";import"./BPwGQkdi.js";import"./CGhfLDww.js";import"./hXBgEdtc.js";import"../sb-preview/runtime.js";import"./HGGXJyB7.js";import"./D0ww02ZN.js";import"./R-F224MX.js";import"./C36Bf8YV.js";import"./8bxaQBfd.js";import"./Dt-H8hG_.js";import"./Bz7P8nyL.js";import"./RxpDUvxm.js";import"./BSEdKPgk.js";import"./HSkZLNjo.js";import"./CTON8dBl.js";import"./Cpj98o6Y.js";import"./BWh21zg2.js";import"./RevM6cLn.js";import"./BozJNCm9.js";import"./k5PUqNI5.js";import"./BS9R2VWD.js";import"./KPakBTOk.js";import"./BxOnwPF8.js";import"./C0aPY4k7.js";import"./CmiN-34A.js";import"./zQROjZew.js";import"./CAQ_cRf3.js";import"./J4MDjhZE.js";import"./CJk8lJ1H.js";import"./Bnkvtx4f.js";import"./Ci7G4jyV.js";import"./Box5JfbC.js";import"./DYaXnAuU.js";import"./C_4PSVgb.js";import"./DvUPudwq.js";import"./ksXjMkLb.js";import"./DSfRbglK.js";import"./CTdiwjRx.js";import"./BX450vXD.js";import"./fl49u9nx.js";import"./CU869mj2.js";import"./BSFIWEmo.js";import"./BOoHbPWX.js";import"./DcJiy9Gt.js";import"./DQnMOLSw.js";import"./D7Nvdm8A.js";import"./Chtciqt4.js";import"./DjzJpTMR.js";import"./Cg57jLUO.js";import"./-TaKdCZx.js";import"./B7pyvAJ7.js";import"./DJuamxAL.js";import"./WINk6Gqn.js";import"./CP1e7QSb.js";import"./03xrtDWI.js";import"./DC-AD4tD.js";const rt=["id"],mt={class:"mx-auto mt-10 flex flex-col gap-10 px-6 lg:mt-16 lg:max-w-5xl lg:gap-16"},st={class:"h-[75px] w-[75px] flex-none overflow-hidden rounded-sm lg:h-30 lg:w-30"},Vo=Z({name:"AudioDetailPage",__name:"index",async setup(pt){var g;let s,v;U();const a=O(),u=Y(),e=h(()=>N(u==null?void 0:u.params.id)),A=J();(!e.value||!T(e.value))&&n({statusCode:404,message:`Invalid audio id: "${e.value}".`,fatal:!0});const t=tt((g=a.audio)!=null&&g.id&&e.value&&a.audio.id===e.value?a.audio:null),r=h(()=>a.fetchState.fetchingError),{isHidden:C,reveal:I}=H(t.value),{pageTitle:k,detailPageMeta:R}=F(t);X(()=>({...R,title:k.value}));const{sendCustomEvent:$}=B(),D=(o,p)=>{$("AUDIO_INTERACTION",{...o,component:p})},E=async()=>{if(A.isHydrating)return t.value;const o=await a.fetch(S,e.value);if(o)return t.value=o,o;throw new Error(`Could not fetch audio with id ${e.value}`)},{error:l}=([s,v]=ot(async()=>W("single-audio",async()=>await E(),{lazy:!0,server:!1})),s=await s,v(),s),_=o=>{["Audio not found","Audio ID not found"].includes(o.message)&&n({statusCode:404,message:"Audio ID not found",fatal:!0}),r.value&&!Q(r.value)&&n({...r.value??{},fatal:!0})};return l.value&&_(l.value),et(l,o=>{o&&_(o)}),(o,p)=>(i(),d("main",{id:c(b),tabindex:"-1",class:"relative flex-grow"},[r.value?(i(),f(q,{key:0,"fetching-error":r.value,class:"px-6 py-10 lg:px-10"},null,8,["fetching-error"])):t.value?(i(),d(x,{key:1},[c(C)?(i(),f(L,it({key:0},t.value,{onReveal:c(I)}),null,16,["onReveal"])):(i(),d(x,{key:1},[m(z,{media:t.value},null,8,["media"]),m(M,{layout:"full",audio:t.value,class:"main-track",onInteracted:p[0]||(p[0]=P=>D(P,"AudioDetailPage"))},null,8,["audio"]),y("div",mt,[m(V,{media:t.value},null,8,["media"]),m(G,{media:t.value},{thumbnail:at(()=>[y("div",st,[m(j,{audio:t.value},null,8,["audio"])])]),_:1},8,["media"]),t.value?(i(),f(K,{key:0,"media-type":"audio","related-to":t.value.id,class:"mb-12"},null,8,["related-to"])):w("",!0)])],64))],64)):w("",!0)],8,rt))}});export{Vo as default};
