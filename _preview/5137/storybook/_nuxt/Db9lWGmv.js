import{a as v,u as R}from"./DTU7yJca.js";import{u as w}from"./BBsRl7xl.js";import{g as E}from"./CR6ZVAxS.js";import{u as L}from"./HSkZLNjo.js";import{d as T,C as f,H as a,K as p,P as y,V as _,Q as V,D as P,Z as N,R as i,G as c,F as h,O as $,Y as B,I as b,L as x,M as F}from"./-WkxctKM.js";import{_ as A}from"./DlAUqK2U.js";import{_ as K}from"./CTdiwjRx.js";import{_ as M}from"./C1LoCUYl.js";import{s as z}from"./D-XGaJuf.js";import{u as H}from"./BXAcwQ7Y.js";import{u as I}from"./wQpWZeBh.js";import{E as q}from"./-TaKdCZx.js";import{_ as O}from"./-3I6T1aZ.js";import{V as D}from"./CmiN-34A.js";import{V as G}from"./CVV9gpzL.js";import{_ as U}from"./B7pyvAJ7.js";import{u as X}from"./DNZ0QEaN.js";import{_ as j}from"./DiXlOiCf.js";const Q={"aria-hidden":"true"},W={class:"sr-only"},Y=T({__name:"VSearchResultsTitle",props:{searchTerm:{},searchType:{},resultCounts:{},size:{default:"default"}},setup(g){const t=g,u=w(),{t:o}=L(),n=f(()=>t.resultCounts.reduce((s,[e,r])=>({...s,[e]:{count:r,countKey:E(r),localeCount:u(r)}}),{})),m=()=>{const s=n.value.image,e=o(`browsePage.aria.allResultsHeadingCount.image.${s.countKey}`,{localeCount:s.localeCount}),r=n.value.audio,l=o(`browsePage.aria.allResultsHeadingCount.audio.${r.countKey}`,{localeCount:r.localeCount});return o("browsePage.aria.results.all",{query:t.searchTerm,imageResults:e,audioResults:l})},d=f(()=>{switch(t.searchType){case"image":{const{count:s,countKey:e,localeCount:r}=n.value.image;return o(`browsePage.aria.results.image.${e}`,{count:s,localeCount:r,query:t.searchTerm})}case"audio":{const{count:s,countKey:e,localeCount:r}=n.value.audio;return o(`browsePage.aria.results.audio.${e}`,{count:s,localeCount:r,query:t.searchTerm})}default:case"all":return m()}});return(s,e)=>(a(),p("h1",{class:V(["sr-only break-words md:not-sr-only",[s.size==="large"?"heading-2 lg:heading-1 !leading-none lg:!leading-none":"heading-2 !leading-none"]])},[y("span",Q,_(s.searchTerm),1),y("span",W,_(d.value),1)],2))}}),Z=A(Y,[["__scopeId","data-v-a8af9dad"]]),J={class:"heading-6",tabindex:"-1"},ee=T({__name:"VExternalSearchForm",props:{searchTerm:{},isSupported:{type:Boolean,default:!1},hasNoResults:{type:Boolean,default:!0}},setup(g){const t=P(null),u=v(),o=H(),{$sendCustomEvent:n}=X(),m=R(),{currentPage:d}=z(m),s=()=>{n("VIEW_EXTERNAL_SOURCES",{searchType:u.searchType,query:u.searchTerm,resultPage:d.value||1})},{externalSourcesType:e}=I(),r=f(()=>o.isBreakpoint("md"));return(l,C)=>{const S=N("i18n-t");return a(),p("section",{key:$(e),ref_key:"sectionRef",ref:t,class:"external-sources flex flex-row place-items-center justify-center pb-6 pt-4 lg:pb-10","data-testid":"external-sources-form"},[i(U,{id:$(q),variant:"centered","hide-on-click-outside":!0,"labelled-by":"external-sources-button",class:"w-full",onOpen:s},{trigger:c(({a11yProps:k})=>[i(D,{id:"external-sources-button",ref:"triggerRef",pressed:k["aria-expanded"],"aria-haspopup":"dialog","aria-controls":"external-sources-modal",variant:"bordered-gray",size:"disabled",class:"label-bold lg:description-bold h-16 w-full gap-x-2 lg:h-18"},{default:c(()=>[r.value?(a(),h(S,{key:0,scope:"global",keypath:"externalSources.form.supportedTitle",tag:"p"})):(a(),h(S,{key:1,scope:"global",keypath:"externalSources.form.supportedTitleSm",tag:"p"})),i(G,{class:V({"text-over-dark":k["aria-expanded"]}),name:"caret-down"},null,8,["class"])]),_:2},1032,["pressed"])]),title:c(()=>[y("h2",J,_(l.$t("externalSources.title")),1)]),default:c(()=>[i(O,{class:"flex flex-col","search-term":l.searchTerm},null,8,["search-term"])]),_:1},8,["id"])])}}}),se={key:0,class:"my-0 md:mb-8 md:mt-4"},re={key:1,class:"mb-4 mt-2 grid grid-cols-2 gap-4 md:mt-0"},te={class:"mb-6 mt-4 lg:mb-10"},Se=T({__name:"VSearchResults",props:{searchTerm:{},results:{},isFetching:{type:Boolean}},emits:["load-more"],setup(g){const t=g,{t:u}=L(),o=R(),n=v(),m=f(()=>u(`browsePage.aria.resultsLabel.${t.results.type}`,{query:t.searchTerm})),d=e=>n.getSearchPath({type:e}),s=f(()=>o.resultCountsPerMediaType);return(e,r)=>(a(),h(K,{"collection-label":m.value,results:e.results,"is-fetching":e.isFetching,"search-term":e.searchTerm,kind:"search"},{header:c(()=>[e.searchTerm?(a(),p("header",se,[i(Z,{"search-term":e.searchTerm,size:e.results.type==="all"?"large":"default","search-type":e.results.type,"result-counts":s.value},{default:c(()=>[B(_(e.searchTerm),1)]),_:1},8,["search-term","size","search-type","result-counts"])])):b("",!0),e.results.type==="all"?(a(),p("div",re,[(a(!0),p(x,null,F(s.value,([l,C])=>(a(),h(j,{key:l,"media-type":l,"search-term":e.searchTerm,"results-count":C,to:d(l)},null,8,["media-type","search-term","results-count","to"]))),128))])):b("",!0)]),footer:c(()=>[y("footer",te,[i(M,{"search-type":e.results.type,kind:"search","search-term":e.searchTerm,"is-fetching":e.isFetching,class:"mb-4",onLoadMore:r[0]||(r[0]=l=>e.$emit("load-more"))},null,8,["search-type","search-term","is-fetching"]),e.results.type!=="all"?(a(),h(ee,{key:0,"search-term":e.searchTerm,"is-supported":!0,"has-no-results":!1},null,8,["search-term"])):b("",!0)])]),_:1},8,["collection-label","results","is-fetching","search-term"]))}});export{Se as _};
