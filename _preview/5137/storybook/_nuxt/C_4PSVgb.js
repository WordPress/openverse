import{k as r}from"./RevM6cLn.js";import{V as I}from"./CmiN-34A.js";import{d as F,D as h,E as O,$ as T,C as p,F as C,G as k,T as S,a0 as L,H as A,S as E,K as $,P as M,_ as z}from"./-WkxctKM.js";import{_ as B}from"./DlAUqK2U.js";const N=Symbol();function g(e){return e==null||e.value==null?null:"$el"in e.value?e.value.$el:e.value}const R=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),n=Object.freeze({First:1,Previous:2,Next:4,Last:8,WrapAround:16}),x=Object.freeze({Error:"Error",Overflow:"Overflow",Success:"Success",Underflow:"Underflow"}),y=Object.freeze({Next:1,Previous:-1});function U(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(R))}function Q(e){e instanceof HTMLElement&&e.focus()}const V=["textarea","input"].join(",");function j(e){var a;return((a=e==null?void 0:e.matches)==null?void 0:a.call(e,V))??!1}function W(e,a=l=>l){return e.slice().sort((l,s)=>{const i=a(l),u=a(s);if(i===null||u===null)return 0;const d=i.compareDocumentPosition(u);return d&Node.DOCUMENT_POSITION_FOLLOWING?-1:d&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function w(e,a){const l=(Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e==null?void 0:e.ownerDocument)??document,s=Array.isArray(e)?W(e):U(e),i=l.activeElement,u=(()=>{if(a&(n.First|n.Next))return y.Next;if(a&(n.Previous|n.Last))return y.Previous;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),d=(()=>{if(a&n.First)return 0;if(a&n.Previous)return Math.max(0,s.indexOf(i))-1;if(a&n.Next)return Math.max(0,s.indexOf(i))+1;if(a&n.Last)return s.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})();let b=0;const f=s.length;let t;do{if(b>=f||b+f<=0)return x.Error;let c=d+b;if(a&n.WrapAround)c=(c+f)%f;else{if(c<0)return x.Underflow;if(c>=f)return x.Overflow}t=s[c],t==null||t.focus(),b+=u}while(t!==l.activeElement);return(!t.hasAttribute("tabindex")||t.getAttribute("tabindex")==="-1")&&t.setAttribute("tabindex","0"),a&(n.Next|n.Previous)&&j(t)&&t.select(),x.Success}const K=F({__name:"VTab",props:{id:{},disabled:{type:Boolean,default:!1},size:{default:"default"}},setup(e){const a=e,l=L(N);if(!l)throw new Error("Could not resolve tabContext in VTab");const s=l,i=h(null);O(()=>s.registerTab(i)),T(()=>s.unregisterTab(i));const u=p(()=>s.selectedId.value===a.id),d=()=>{var o;a.disabled||(s.activation.value==="auto"&&s.setSelectedId(a.id),(o=g(i))==null||o.focus())},b=()=>{var o;a.disabled||((o=g(i))==null||o.focus(),s.setSelectedId(a.id))},f=o=>{o.preventDefault()},t=(o,v)=>{let m=o===r.ArrowRight;return v==="rtl"&&(m=!m),m?n.Next:n.Previous},c=o=>{const v=s.tabs.value.map(D=>g(D)).filter(Boolean);if([r.Spacebar,r.Enter,r.Home,r.PageUp,r.End,r.PageDown,r.ArrowLeft,r.ArrowRight].includes(o.key))switch(o.preventDefault(),o.stopPropagation(),o.key){case r.Spacebar:case r.Enter:{s.setSelectedId(a.id);break}case r.Home:case r.PageUp:{w(v,n.First);break}case r.End:case r.PageDown:{w(v,n.Last);break}case r.ArrowLeft:{w(v,t(r.ArrowLeft,document.dir)|n.WrapAround);break}case r.ArrowRight:{w(v,t(r.ArrowRight,document.dir)|n.WrapAround);break}}},_=p(()=>({"aria-controls":`panel-${a.id}`,"aria-selected":u.value,disabled:a.disabled?!0:void 0})),P=p(()=>s.variant.value);return(o,v)=>(A(),C(I,S({id:`tab-${o.id}`,ref_key:"internalTabRef",ref:i,role:"tab",tabindex:u.value?0:-1,size:"disabled",variant:"plain--avoid"},_.value,{class:["rounded-none bg-default focus-slim-tx focus:z-10",[P.value,`size-${o.size}`,{[`${P.value}-selected`]:u.value}]],onClick:b,onFocus:d,onMousedown:f,onKeydown:c}),{default:k(()=>[E(o.$slots,"default",{},void 0,!0)]),_:3},16,["id","tabindex","class"]))}}),X=B(K,[["__scopeId","data-v-ebf3d74e"]]),Y=F({__name:"VTabs",props:{label:{},manual:{type:Boolean,default:!1},variant:{default:"bordered"},selectedId:{},tablistStyle:{}},emits:["change","close"],setup(e,{emit:a}){const l=e,s=a,i=h(l.selectedId),u=h([]),d=h([]),b={selectedId:i,activation:p(()=>l.manual?"manual":"auto"),variant:p(()=>l.variant),tabs:u,panels:d,setSelectedId(t){i.value!==t&&(i.value=t,s("change",t))},registerTab(t){u.value.includes(t)||u.value.push(t)},unregisterTab(t){const c=u.value.indexOf(t);c!==-1&&u.value.splice(c,1)},registerPanel(t){d.value.includes(t)||d.value.push(t)},unregisterPanel(t){const c=d.value.indexOf(t);c!==-1&&d.value.splice(c,1)}};z(N,b);const f=p(()=>l.label.startsWith("#")?{"aria-labelledby":l.label.slice(1)}:{"aria-label":l.label});return(t,c)=>(A(),$("div",null,[M("div",S({role:"tablist",class:["flex flex-row items-stretch",t.tablistStyle]},f.value),[E(t.$slots,"tabs")],16),E(t.$slots,"default")]))}});export{X as V,Y as _,Q as a,w as f,N as t};
