import{v as M}from"./BPwGQkdi.js";import{s as w}from"./D-XGaJuf.js";import{b as y}from"./C36Bf8YV.js";import{u as L,a as T}from"./DTU7yJca.js";import{V}from"./CmiN-34A.js";import{u as P}from"./HSkZLNjo.js";import{u as B}from"./DNZ0QEaN.js";import{u as C}from"./BnDRGrsR.js";import{d as k,D as t,C as a,E as D,w as d,H as F,K as N,N as x,R as A,G as H,Y as I,V as O}from"./-WkxctKM.js";const W=k({__name:"VLoadMore",props:{kind:{},searchTerm:{},relatedTo:{},searchType:{},isFetching:{type:Boolean}},emits:["load-more"],setup(m,{emit:f}){const s=m,p=f,r=t(null),v=C(),{t:n}=P({useScope:"global"}),l=L(),g=T(),{$sendCustomEvent:i}=B(),{currentPage:h}=w(l),c=a(()=>({...g.searchParamsForEvent,resultPage:h.value||1})),E=a(()=>l.canLoadMore),e=t(!1),b=async()=>{s.isFetching||(e.value=!1,i("LOAD_MORE_RESULTS",c.value),p("load-more"))},S=()=>{i("REACH_RESULT_END",c.value)},R=a(()=>s.isFetching?n("browsePage.loading"):n("browsePage.load")),u=t(null);D(()=>{u.value=document.getElementById("main-page")});const _=y(r,{scrollTarget:u});return d(v,()=>{e.value=!1}),d(_,o=>{if(o){if(e.value)return;S(),e.value=!0}}),(o,U)=>(F(),N("div",{ref_key:"loadMoreSectionRef",ref:r,class:"w-full"},[x(A(V,{class:"label-bold lg:description-bold h-16 w-full lg:h-18",variant:"filled-gray",size:"disabled",disabled:o.isFetching,"data-testid":"load-more",onClick:b},{default:H(()=>[I(O(R.value),1)]),_:1},8,["disabled"]),[[M,E.value]])],512))}});export{W as _};
