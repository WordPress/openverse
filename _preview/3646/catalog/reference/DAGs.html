<!doctype html>
<html class="no-js" lang="en" data-content_root="../../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../../genindex.html" /><link rel="search" title="Search" href="../../search.html" /><link rel="next" title="Retired" href="retired.html" /><link rel="prev" title="Reference" href="index.html" />

    <link rel="shortcut icon" href="https://raw.githubusercontent.com/WordPress/openverse/master/brand/icon.svg"/><!-- Generated with Sphinx 7.2.6 and Furo 2023.09.10 -->
        <title>DAGs - Openverse documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css?v=135e06be" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css?v=36a5483c" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">Openverse  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="../../_static/logo_light.svg" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="../../_static/logo_dark.svg" alt="Dark Logo"/>
  </div>
  
  
</a><form class="sidebar-search-container" method="get" action="../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../api/index.html">Django API</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Django API</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../api/guides/index.html">Guides</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Guides</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../api/guides/quickstart.html">Quickstart guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/guides/test.html">Testing guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/guides/deploy.html">Deployment runbook</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/guides/https.html">Local HTTPS testing</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../api/reference/index.html">Reference</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Reference</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../api/reference/made_with_ov.html">Made with Openverse</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/reference/search_algorithm.html">Search Algorithm</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/reference/authentication_and_throttling.html">Authentication and Throttling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/reference/healthcheck.html">Django Healthcheck</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../automations/index.html">Automations</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of Automations</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../automations/guides/index.html">Guides</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Guides</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../automations/guides/quickstart.html">Quickstart Guide</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../automations/reference/index.html">Reference</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of Reference</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../automations/reference/python_scripts.html">Python Scripts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../automations/reference/project_automations.html">Project Automations</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../index.html">Airflow Catalog</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of Airflow Catalog</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 has-children"><a class="reference internal" href="../guides/index.html">Guides</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of Guides</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../guides/quickstart.html">Quickstart</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guides/deploy.html">Deployment runbook</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guides/adding_a_new_provider.html">Openverse Providers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guides/deployment.html">Catalog Deployments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guides/deployment.html#airflow">Airflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guides/deployment.html#postgres">Postgres</a></li>
</ul>
</li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="index.html">Reference</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of Reference</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3 current current-page"><a class="current reference internal" href="#">DAGs</a></li>
<li class="toctree-l3"><a class="reference internal" href="retired.html">Retired</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../changelogs/index.html">Changelogs</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of Changelogs</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../changelogs/api/index.html">API changelogs</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle navigation of API changelogs</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2024.01.16.17.28.14.html">2024.01.16.17.28.14</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2024.01.08.20.06.53.html">2024.01.08.20.06.53</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2024.01.01.19.52.14.html">2024.01.01.19.52.14</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2023.12.26.05.11.22.html">2023.12.26.05.11.22</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2023.12.18.17.56.24.html">2023.12.18.17.56.24</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2023.12.11.19.20.45.html">2023.12.11.19.20.45</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2023.12.04.19.51.23.html">2023.12.04.19.51.23</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2023.11.29.22.20.31.html">2023.11.29.22.20.31</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2023.11.27.05.10.48.html">2023.11.27.05.10.48</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2023.11.20.09.32.25.html">2023.11.20.09.32.25</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2023.11.14.23.44.01.html">2023.11.14.23.44.01</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2023.11.13.22.18.21.html">2023.11.13.22.18.21</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2023.11.01.21.27.09.html">2023.11.01.21.27.09</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2023.10.30.16.26.21.html">2023.10.30.16.26.21</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2023.10.23.11.40.59.html">2023.10.23.11.40.59</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2023.10.18.15.25.27.html">2023.10.18.15.25.27</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2023.10.11.04.49.20.html">2023.10.11.04.49.20</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2023.10.10.21.08.33.html">2023.10.10.21.08.33</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2023.10.10.18.42.39.html">2023.10.10.18.42.39</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2023.10.06.17.13.36.html">2023.10.06.17.13.36</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2023.09.30.00.15.32.html">2023.09.30.00.15.32</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2023.09.28.00.26.34.html">2023.09.28.00.26.34</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2023.09.25.21.34.44.html">2023.09.25.21.34.44</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2023.09.20.11.16.51.html">2023.09.20.11.16.51</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2023.09.20.07.37.52.html">2023.09.20.07.37.52</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2023.09.19.08.13.24.html">2023.09.19.08.13.24</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2023.09.15.19.15.58.html">2023.09.15.19.15.58</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2023.09.11.16.56.52.html">2023.09.11.16.56.52</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2023.09.04.19.52.19.html">2023.09.04.19.52.19</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2023.08.28.20.43.01.html">2023.08.28.20.43.01</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2023.08.22.04.57.04.html">2023.08.22.04.57.04</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2023.08.14.16.35.15.html">2023.08.14.16.35.15</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2023.08.08.22.22.02.html">2023.08.08.22.22.02</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2023.07.24.20.47.04.html">2023.07.24.20.47.04</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2023.07.17.21.05.23.html">2023.07.17.21.05.23</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2023.07.10.08.44.19.html">2023.07.10.08.44.19</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2023.07.03.17.52.00.html">2023.07.03.17.52.00</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2023.06.28.19.49.58.html">2023.06.28.19.49.58</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2023.06.28.02.17.04.html">2023.06.28.02.17.04</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2023.06.26.20.33.46.html">2023.06.26.20.33.46</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2023.06.19.17.48.39.html">2023.06.19.17.48.39</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2023.06.13.00.21.51.html">2023.06.13.00.21.51</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2023.06.05.15.04.02.html">2023.06.05.15.04.02</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2023.06.01.01.50.43.html">2023.06.01.01.50.43</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2023.05.30.17.57.04.html">2023.05.30.17.57.04</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2023.05.30.12.02.04.html">2023.05.30.12.02.04</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2023.05.19.22.08.07.html">2023.05.19.22.08.07</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2023.05.19.18.58.25.html">2023.05.19.18.58.25</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2023.05.19.17.16.50.html">2023.05.19.17.16.50</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2023.05.15.21.51.49.html">2023.05.15.21.51.49</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2023.05.02.21.26.28.html">2023.05.02.21.26.28</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2023.04.27.07.29.23.html">2023.04.27.07.29.23</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2023.04.23.23.22.14.html">2023.04.23.23.22.14</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2023.04.19.00.01.39.html">2023.04.19.00.01.39</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2023.04.18.15.27.15.html">2023.04.18.15.27.15</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/api/2023.04.12.23.29.59.html">2023.04.12.23.29.59</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../changelogs/catalog/index.html">Catalog changelogs</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle navigation of Catalog changelogs</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/catalog/2024.01.25.17.42.59.html">2024.01.25.17.42.59</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/catalog/2024.01.04.20.39.50.html">2024.01.04.20.39.50</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/catalog/2023.12.20.22.19.13.html">2023.12.20.22.19.13</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/catalog/2023.11.29.15.35.59.html">2023.11.29.15.35.59</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/catalog/2023.11.14.18.24.16.html">2023.11.14.18.24.16</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/catalog/2023.10.06.18.29.33.html">2023.10.06.18.29.33</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/catalog/2023.08.30.17.30.22.html">2023.08.30.17.30.22</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/catalog/2023.07.20.15.07.11.html">2023.07.20.15.07.11</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/catalog/2023.06.19.17.21.41.html">2023.06.19.17.21.41</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/catalog/2023.06.08.16.52.36.html">2023.06.08.16.52.36</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/catalog/2023.05.16.22.14.49.html">2023.05.16.22.14.49</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/catalog/2023.04.27.02.43.13.html">2023.04.27.02.43.13</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../changelogs/frontend/index.html">Frontend changelogs</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle navigation of Frontend changelogs</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/frontend/2024.01.08.19.12.18.html">2024.01.08.19.12.18</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/frontend/2024.01.01.19.52.49.html">2024.01.01.19.52.49</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/frontend/2023.12.11.19.44.28.html">2023.12.11.19.44.28</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/frontend/2023.12.04.19.35.53.html">2023.12.04.19.35.53</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/frontend/2023.11.27.19.20.44.html">2023.11.27.19.20.44</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/frontend/2023.11.20.09.09.57.html">2023.11.20.09.09.57</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/frontend/2023.11.14.19.30.29.html">2023.11.14.19.30.29</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/frontend/2023.11.06.20.32.30.html">2023.11.06.20.32.30</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/frontend/2023.11.01.00.18.44.html">2023.11.01.00.18.44</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/frontend/2023.10.30.16.27.33.html">2023.10.30.16.27.33</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/frontend/2023.10.09.17.18.13.html">2023.10.09.17.18.13</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/frontend/2023.09.25.22.11.48.html">2023.09.25.22.11.48</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/frontend/2023.09.18.10.25.25.html">2023.09.18.10.25.25</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/frontend/2023.09.11.17.34.23.html">2023.09.11.17.34.23</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/frontend/2023.09.05.17.09.13.html">2023.09.05.17.09.13</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/frontend/2023.09.04.20.20.34.html">2023.09.04.20.20.34</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/frontend/2023.08.28.19.38.22.html">2023.08.28.19.38.22</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/frontend/2023.08.22.06.04.39.html">2023.08.22.06.04.39</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/frontend/2023.08.14.16.26.44.html">2023.08.14.16.26.44</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/frontend/2023.08.08.21.19.44.html">2023.08.08.21.19.44</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/frontend/2023.07.28.23.42.26.html">2023.07.28.23.42.26</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/frontend/2023.07.24.21.23.45.html">2023.07.24.21.23.45</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/frontend/2023.07.20.17.25.42.html">2023.07.20.17.25.42</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/frontend/2023.07.19.19.15.39.html">2023.07.19.19.15.39</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/frontend/2023.07.17.21.49.20.html">2023.07.17.21.49.20</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/frontend/2023.07.10.08.29.25.html">2023.07.10.08.29.25</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/frontend/2023.07.06.14.52.49.html">2023.07.06.14.52.49</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/frontend/2023.07.05.17.56.39.html">2023.07.05.17.56.39</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/frontend/2023.07.03.18.19.32.html">2023.07.03.18.19.32</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/frontend/2023.06.26.20.22.48.html">2023.06.26.20.22.48</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/frontend/2023.06.19.17.31.24.html">2023.06.19.17.31.24</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/frontend/2023.06.13.00.28.40.html">2023.06.13.00.28.40</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/frontend/2023.06.05.14.48.06.html">2023.06.05.14.48.06</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/frontend/2023.05.23.17.02.26.html">2023.05.23.17.02.26</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/frontend/2023.05.22.15.55.57.html">2023.05.22.15.55.57</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/frontend/2023.05.15.22.13.27.html">2023.05.15.22.13.27</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/frontend/2023.05.02.19.17.32.html">2023.05.02.19.17.32</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/frontend/2023.04.23.23.07.51.html">2023.04.23.23.07.51</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../changelogs/ingestion_server/index.html">Ingestion server changelogs</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><div class="visually-hidden">Toggle navigation of Ingestion server changelogs</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/ingestion_server/2024.01.18.18.31.08.html">2024.01.18.18.31.08</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/ingestion_server/2023.12.12.17.23.14.html">2023.12.12.17.23.14</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/ingestion_server/2023.12.06.19.13.35.html">2023.12.06.19.13.35</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/ingestion_server/2023.11.14.18.39.29.html">2023.11.14.18.39.29</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/ingestion_server/2023.10.25.06.38.07.html">2023.10.25.06.38.07</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/ingestion_server/2023.10.19.06.08.15.html">2023.10.19.06.08.15</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/ingestion_server/2023.10.06.18.02.20.html">2023.10.06.18.02.20</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/ingestion_server/2023.09.29.17.40.50.html">2023.09.29.17.40.50</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/ingestion_server/2023.09.05.18.56.18.html">2023.09.05.18.56.18</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/ingestion_server/2023.08.29.17.36.35.html">2023.08.29.17.36.35</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/ingestion_server/2023.07.21.20.19.21.html">2023.07.21.20.19.21</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/ingestion_server/2023.07.05.17.46.34.html">2023.07.05.17.46.34</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/ingestion_server/2023.06.13.00.25.04.html">2023.06.13.00.25.04</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/ingestion_server/2023.06.07.17.56.30.html">2023.06.07.17.56.30</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/ingestion_server/2023.05.17.22.57.37.html">2023.05.17.22.57.37</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../changelogs/ingestion_server/2023.05.03.22.29.52.html">2023.05.03.22.29.52</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../frontend/index.html">Nuxt frontend</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><div class="visually-hidden">Toggle navigation of Nuxt frontend</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../frontend/guides/index.html">Guides</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" role="switch" type="checkbox"/><label for="toctree-checkbox-16"><div class="visually-hidden">Toggle navigation of Guides</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../frontend/guides/quickstart.html">Quickstart guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../frontend/guides/deploy.html">Deployment runbook</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../frontend/guides/test.html">Running frontend tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../frontend/guides/analytics.html">Analytics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../frontend/guides/icons.html">SVG Icon Sprites in Openverse Frontend</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../frontend/guides/translate.html">Translate</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../frontend/reference/index.html">Reference</a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" role="switch" type="checkbox"/><label for="toctree-checkbox-17"><div class="visually-hidden">Toggle navigation of Reference</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../frontend/reference/i18n.html">Internationalization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../frontend/reference/feature_flags.html">Feature flags</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../frontend/reference/testing_guidelines.html">Testing Guidelines</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../frontend/reference/playwright_tests.html">Playwright tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../frontend/reference/storybook_tests.html">Storybook tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../frontend/reference/miscellaneous.html">Miscellaneous notes on the frontend</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../frontend/reference/healthcheck.html">Nuxt Healthcheck</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../frontend/reference/nginx.html">Frontend reverse proxy</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../general/index.html">General development guidelines</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" role="switch" type="checkbox"/><label for="toctree-checkbox-18"><div class="visually-hidden">Toggle navigation of General development guidelines</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../general/contributing.html">Welcome</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../general/general_setup.html">General setup guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../general/quickstart.html">Quickstart guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../general/run.html">Run</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../general/test.html">Test</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../general/zero_downtime_database_management.html">Zero Downtime and Database Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../general/deployment.html">Deployments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../general/logging.html">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../general/https.html">Testing HTTPS</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../ingestion_server/index.html">Ingestion server</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" role="switch" type="checkbox"/><label for="toctree-checkbox-19"><div class="visually-hidden">Toggle navigation of Ingestion server</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../ingestion_server/guides/index.html">Guides</a><input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" role="switch" type="checkbox"/><label for="toctree-checkbox-20"><div class="visually-hidden">Toggle navigation of Guides</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../ingestion_server/guides/quickstart.html">Quickstart guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ingestion_server/guides/config.html">Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ingestion_server/guides/mapping.html">Mapping database tables to Elasticsearch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ingestion_server/guides/test.html">Testing guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ingestion_server/guides/deploy.html">Deployment runbook</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ingestion_server/guides/migrate.html">Index migration runbook</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ingestion_server/guides/upgrade.html">Manual index upgrade runbook</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ingestion_server/guides/troubleshoot.html">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../ingestion_server/reference/index.html">Reference</a><input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" role="switch" type="checkbox"/><label for="toctree-checkbox-21"><div class="visually-hidden">Toggle navigation of Reference</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../ingestion_server/reference/elasticsearch.html">Elasticsearch and Indexing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ingestion_server/reference/safety.html">Safety and Security Considerations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ingestion_server/reference/notifications.html">Notifications</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ingestion_server/reference/data_refresh.html">Data Refresh Limit</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ingestion_server/reference/task_api.html">Ingestion server API</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../meta/index.html">Managing the Openverse</a><input class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" role="switch" type="checkbox"/><label for="toctree-checkbox-22"><div class="visually-hidden">Toggle navigation of Managing the Openverse</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../meta/incidents/index.html">Responding to Incidents</a><input class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" role="switch" type="checkbox"/><label for="toctree-checkbox-23"><div class="visually-hidden">Toggle navigation of Responding to Incidents</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../meta/incidents/runbooks/index.html">Runbooks</a><input class="toctree-checkbox" id="toctree-checkbox-24" name="toctree-checkbox-24" role="switch" type="checkbox"/><label for="toctree-checkbox-24"><div class="visually-hidden">Toggle navigation of Runbooks</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../meta/incidents/runbooks/incident_response_runbook.html">Incident Response Runbook</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../meta/contribution/index.html">Contributing to Openverse</a><input class="toctree-checkbox" id="toctree-checkbox-25" name="toctree-checkbox-25" role="switch" type="checkbox"/><label for="toctree-checkbox-25"><div class="visually-hidden">Toggle navigation of Contributing to Openverse</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../meta/contribution/github_contribution_practices.html">GitHub contribution practices</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../meta/contribution/dev_flow.html">Development workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../meta/contribution/current_maintainers.html">Current maintainers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../meta/contribution/communication_aliases.html">Communication aliases</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../meta/contribution/becoming_a_committer.html">Becoming a Committer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../meta/contribution/maintainer_tasks.html">Regular maintainer tasks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../meta/contribution/codespell.html">Codespell Configuration : spellcheck pre-commit hook</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../meta/project_boards/index.html">Project boards</a><input class="toctree-checkbox" id="toctree-checkbox-26" name="toctree-checkbox-26" role="switch" type="checkbox"/><label for="toctree-checkbox-26"><div class="visually-hidden">Toggle navigation of Project boards</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../meta/project_boards/issues.html">Issues project: Openverse Backlog</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../meta/project_boards/prs.html">PR project: Openverse PRs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../meta/project_boards/projects.html">Project project: Openverse Project Tracker</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../meta/project_boards/discussions.html">Discussion project: Openverse Discussions</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../meta/ci_cd/index.html">CI + CD workflow</a><input class="toctree-checkbox" id="toctree-checkbox-27" name="toctree-checkbox-27" role="switch" type="checkbox"/><label for="toctree-checkbox-27"><div class="visually-hidden">Toggle navigation of CI + CD workflow</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../meta/ci_cd/actions.html">Actions</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../meta/ci_cd/jobs/index.html">Jobs</a><input class="toctree-checkbox" id="toctree-checkbox-28" name="toctree-checkbox-28" role="switch" type="checkbox"/><label for="toctree-checkbox-28"><div class="visually-hidden">Toggle navigation of Jobs</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../meta/ci_cd/jobs/preparation.html">Preparation jobs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../meta/ci_cd/jobs/frontend.html">Frontend jobs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../meta/ci_cd/jobs/packages.html">Packages jobs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../meta/ci_cd/jobs/docker.html">Docker jobs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../meta/ci_cd/jobs/catalog.html">Catalog jobs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../meta/ci_cd/jobs/ingestion_server.html">Ingestion server jobs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../meta/ci_cd/jobs/api.html">API jobs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../meta/ci_cd/jobs/documentation.html">Documentation jobs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../meta/ci_cd/jobs/deployment.html">Deployment jobs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../meta/ci_cd/jobs/notification.html">Notification jobs</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../meta/ci_cd/flow.html">Flow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../meta/ci_cd/proof_of_functionality.html">Proof-of-functionality</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../meta/ci_cd/artifacts.html">Artifacts</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../meta/decision_making/index.html">Openverse Decision-Making Process</a><input class="toctree-checkbox" id="toctree-checkbox-29" name="toctree-checkbox-29" role="switch" type="checkbox"/><label for="toctree-checkbox-29"><div class="visually-hidden">Toggle navigation of Openverse Decision-Making Process</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../meta/decision_making/process_description.html">Process description</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../meta/decision_making/how_to_use.html">How to follow the process in different settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../meta/decision_making/additional_practices.html">Additional practices</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../meta/documentation/index.html">Documentation</a><input class="toctree-checkbox" id="toctree-checkbox-30" name="toctree-checkbox-30" role="switch" type="checkbox"/><label for="toctree-checkbox-30"><div class="visually-hidden">Toggle navigation of Documentation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../meta/documentation/quickstart.html">Quickstart guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../meta/documentation/guidelines.html">Documentation Guidelines</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../meta/documentation/extensions.html">Sphinx extensions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../meta/documentation/review.html">Documentation proofreading and review</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../meta/monitoring/index.html">Monitoring the Openverse</a><input class="toctree-checkbox" id="toctree-checkbox-31" name="toctree-checkbox-31" role="switch" type="checkbox"/><label for="toctree-checkbox-31"><div class="visually-hidden">Toggle navigation of Monitoring the Openverse</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../meta/monitoring/traffic/index.html">Traffic Management</a><input class="toctree-checkbox" id="toctree-checkbox-32" name="toctree-checkbox-32" role="switch" type="checkbox"/><label for="toctree-checkbox-32"><div class="visually-hidden">Toggle navigation of Traffic Management</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../meta/monitoring/traffic/runbooks/identifying-and-blocking-traffic-anomalies.html">Identifying and Blocking Traffic Anomalies in Cloudflare</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../meta/monitoring/cloudwatch_logs/index.html">Log querying</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../meta/monitoring/runbooks/index.html">Runbooks</a><input class="toctree-checkbox" id="toctree-checkbox-33" name="toctree-checkbox-33" role="switch" type="checkbox"/><label for="toctree-checkbox-33"><div class="visually-hidden">Toggle navigation of Runbooks</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../meta/monitoring/runbooks/api_http_2xx_under_threshold.html">Run Book: API Production HTTP 2XX responses count under threshold</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../meta/monitoring/runbooks/api_http_5xx_above_threshold.html">Run Book: API Production HTTP 5XX responses count above threshold</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../meta/monitoring/runbooks/api_avg_response_time_above_threshold.html">Run Book: API Production Average Response Time above threshold</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../meta/monitoring/runbooks/api_avg_response_time_anomaly.html">Run Book: API Production Average Response Time anomaly</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../meta/monitoring/runbooks/api_p99_response_time_above_threshold.html">Run Book: API Production P99 Response Time above threshold</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../meta/monitoring/runbooks/api_p99_response_time_anomaly.html">Run Book: API Production P99 Response Time anomaly</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../meta/monitoring/runbooks/api_request_count_anomaly.html">Run Book: API Production Request Count anomalously high</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../meta/monitoring/runbooks/nuxt_http_2xx_under_threshold.html">Run Book: Nuxt 2XX responses count under threshold</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../meta/monitoring/runbooks/nuxt_http_5xx_above_threshold.html">Run Book: Nuxt 5XX responses count above threshold</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../meta/monitoring/runbooks/nuxt_avg_response_time_above_threshold.html">Run Book: Nuxt Production Average Response Time above threshold</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../meta/monitoring/runbooks/nuxt_avg_response_time_anomaly.html">Run Book: Nuxt Production Average Response Time anomalously high</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../meta/monitoring/runbooks/nuxt_p99_response_time_above_threshold.html">Run Book: Nuxt Production P99 Response Time above threshold</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../meta/monitoring/runbooks/nuxt_p99_response_time_anomaly.html">Run Book: Nuxt Production P99 Response Time anomalously high</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../meta/monitoring/runbooks/nuxt_request_count_anomaly.html">Run Book: Nuxt Request Count anomalously high</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../meta/monitoring/runbooks/unhealthy_ecs_hosts.html">Run Book: Unhealthy hosts for ECS service</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../meta/maintenance/index.html">Openverse Infrastructure Maintenance</a><input class="toctree-checkbox" id="toctree-checkbox-34" name="toctree-checkbox-34" role="switch" type="checkbox"/><label for="toctree-checkbox-34"><div class="visually-hidden">Toggle navigation of Openverse Infrastructure Maintenance</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../meta/maintenance/elasticsearch_cluster.html">Elasticsearch cluster maintenance</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../packages/index.html">Node.js packages</a><input class="toctree-checkbox" id="toctree-checkbox-35" name="toctree-checkbox-35" role="switch" type="checkbox"/><label for="toctree-checkbox-35"><div class="visually-hidden">Toggle navigation of Node.js packages</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../packages/eslint_plugin/index.html"><code class="docutils literal notranslate"><span class="pre">@openverse/eslint-plugin</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-36" name="toctree-checkbox-36" role="switch" type="checkbox"/><label for="toctree-checkbox-36"><div class="visually-hidden">Toggle navigation of @openverse/eslint-plugin</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../packages/eslint_plugin/analytics_configuration.html"><code class="docutils literal notranslate"><span class="pre">analytics-configuration</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../packages/eslint_plugin/no-unexplained-disabled-test.html"><code class="docutils literal notranslate"><span class="pre">no-unexplained-disabled-test</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../projects/index.html">Projects</a><input class="toctree-checkbox" id="toctree-checkbox-37" name="toctree-checkbox-37" role="switch" type="checkbox"/><label for="toctree-checkbox-37"><div class="visually-hidden">Toggle navigation of Projects</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../projects/planning.html">Project Planning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/templates/implementation_plan.html">Template: Implementation Plan</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/templates/index.html">Template: Project Directory <code class="docutils literal notranslate"><span class="pre">index.md</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../projects/templates/project_proposal.html">Template: Project Proposal</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../projects/yearly_planning/index.html">Yearly Planning</a><input class="toctree-checkbox" id="toctree-checkbox-38" name="toctree-checkbox-38" role="switch" type="checkbox"/><label for="toctree-checkbox-38"><div class="visually-hidden">Toggle navigation of Yearly Planning</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../projects/yearly_planning/process_outline.html">Yearly Planning: Process Outline</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../projects/yearly_planning/project_themes.html">Project Themes</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../projects/proposals/3d_model_support/index.html">3D Model Support</a><input class="toctree-checkbox" id="toctree-checkbox-39" name="toctree-checkbox-39" role="switch" type="checkbox"/><label for="toctree-checkbox-39"><div class="visually-hidden">Toggle navigation of 3D Model Support</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../projects/proposals/3d_model_support/20220221-project_proposal.html">2022-02-21 Project Proposal: 3D model support</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../projects/proposals/additional_search_views/index.html">Additional Search Views</a><input class="toctree-checkbox" id="toctree-checkbox-40" name="toctree-checkbox-40" role="switch" type="checkbox"/><label for="toctree-checkbox-40"><div class="visually-hidden">Toggle navigation of Additional Search Views</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../projects/proposals/additional_search_views/20230424-project_proposal_additional_search_views.html">2023-04-24 Project Proposal: Additional search views</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../projects/proposals/additional_search_views/20230719-implementation_plan_additional_search_views.html">2023-07-20 Implementation Plan: Additional Search Views</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../projects/proposals/analytics/index.html">Analytics</a><input class="toctree-checkbox" id="toctree-checkbox-41" name="toctree-checkbox-41" role="switch" type="checkbox"/><label for="toctree-checkbox-41"><div class="visually-hidden">Toggle navigation of Analytics</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../projects/proposals/analytics/20221006-implementation_plan_frontend.html">2022-10-06 Implementation Plan: Frontend event tracking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../projects/proposals/analytics/20230307-backend_service.html">2023-03-07 Implementation Plan: Analytics backend and visualisation service</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../projects/proposals/core_user_interface_improvement/index.html">Core User Interface Improvements</a><input class="toctree-checkbox" id="toctree-checkbox-42" name="toctree-checkbox-42" role="switch" type="checkbox"/><label for="toctree-checkbox-42"><div class="visually-hidden">Toggle navigation of Core User Interface Improvements</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../projects/proposals/core_user_interface_improvement/20230314-project_proposal_core_ui_improvement.html">2023-03-14 Project Proposal: Core UI Improvement</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../projects/proposals/document_all_media_properties/index.html">Document all media properties</a><input class="toctree-checkbox" id="toctree-checkbox-43" name="toctree-checkbox-43" role="switch" type="checkbox"/><label for="toctree-checkbox-43"><div class="visually-hidden">Toggle navigation of Document all media properties</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../projects/proposals/document_all_media_properties/20230307-project_proposal.html">2023-03-07 Project proposal for Document all media properties</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../projects/proposals/document_all_media_properties/20230426-implementation_plan_documenting_media_properties.html">2023-04-26 Implementation Plan: Document all media properties in the catalog</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../projects/proposals/document_all_media_properties/samples/index.html">Samples</a><input class="toctree-checkbox" id="toctree-checkbox-44" name="toctree-checkbox-44" role="switch" type="checkbox"/><label for="toctree-checkbox-44"><div class="visually-hidden">Toggle navigation of Samples</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../projects/proposals/document_all_media_properties/samples/openverse_media_properties.html">Openverse Media Properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../projects/proposals/document_all_media_properties/samples/sample_media_properties.html">sample_media_properties.md</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../projects/proposals/document_all_media_properties/samples/sample_postamble.html">sample_postamble.md</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../projects/proposals/document_all_media_properties/samples/sample_preamble.html">sample_preamble.md</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../projects/proposals/document_all_media_properties/samples/index.html">Samples</a><input class="toctree-checkbox" id="toctree-checkbox-45" name="toctree-checkbox-45" role="switch" type="checkbox"/><label for="toctree-checkbox-45"><div class="visually-hidden">Toggle navigation of Samples</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../projects/proposals/document_all_media_properties/samples/openverse_media_properties.html">Openverse Media Properties</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../projects/proposals/document_all_media_properties/samples/sample_media_properties.html">sample_media_properties.md</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../projects/proposals/document_all_media_properties/samples/sample_postamble.html">sample_postamble.md</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../projects/proposals/document_all_media_properties/samples/sample_preamble.html">sample_preamble.md</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../projects/proposals/feature_flags/index.html">Feature Flags</a><input class="toctree-checkbox" id="toctree-checkbox-46" name="toctree-checkbox-46" role="switch" type="checkbox"/><label for="toctree-checkbox-46"><div class="visually-hidden">Toggle navigation of Feature Flags</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../projects/proposals/feature_flags/20220309-project_proposal.html">2022-03-09 Project Proposal: Feature flags</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../projects/proposals/frontend_ui_state_cookie/index.html">Frontend UI State Cookie</a><input class="toctree-checkbox" id="toctree-checkbox-47" name="toctree-checkbox-47" role="switch" type="checkbox"/><label for="toctree-checkbox-47"><div class="visually-hidden">Toggle navigation of Frontend UI State Cookie</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../projects/proposals/frontend_ui_state_cookie/20220218-project_proposal.html">2022-02-18 Project Propsal: Frontend UI State Cookie</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../projects/proposals/monitoring/index.html">Monitoring</a><input class="toctree-checkbox" id="toctree-checkbox-48" name="toctree-checkbox-48" role="switch" type="checkbox"/><label for="toctree-checkbox-48"><div class="visually-hidden">Toggle navigation of Monitoring</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../projects/proposals/monitoring/20220307-project_proposal.html">2022-03-07 Project Proposal: Monitoring</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../projects/proposals/monitoring/20230606_implementation_plan_ecs_alarms.html">2023-06-06 Implementation Plan: Baseline Alarms for ECS Services</a><input class="toctree-checkbox" id="toctree-checkbox-49" name="toctree-checkbox-49" role="switch" type="checkbox"/><label for="toctree-checkbox-49"><div class="visually-hidden">Toggle navigation of 2023-06-06 Implementation Plan: Baseline Alarms for ECS Services</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../projects/proposals/monitoring/run_book_samples/stable_run_book_sample.html">Stable Run Book Sample</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../projects/proposals/monitoring/run_book_samples/unstable_run_book_sample.html">Unstable Run Book Sample</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../projects/proposals/monorepo/index.html">Monorepo</a><input class="toctree-checkbox" id="toctree-checkbox-50" name="toctree-checkbox-50" role="switch" type="checkbox"/><label for="toctree-checkbox-50"><div class="visually-hidden">Toggle navigation of Monorepo</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../projects/proposals/monorepo/20221124-project_proposal.html">2022-11-24 Project Proposal: Monorepo</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../projects/proposals/nuxt_3_migration/index.html">Nuxt 3 Migration</a><input class="toctree-checkbox" id="toctree-checkbox-51" name="toctree-checkbox-51" role="switch" type="checkbox"/><label for="toctree-checkbox-51"><div class="visually-hidden">Toggle navigation of Nuxt 3 Migration</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../projects/proposals/nuxt_3_migration/20230604-project_proposal_nuxt_3_migration.html">2023-06-02 Project Proposal</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../projects/proposals/popularity_optimizations/index.html">Popularity Calculation Optimizations</a><input class="toctree-checkbox" id="toctree-checkbox-52" name="toctree-checkbox-52" role="switch" type="checkbox"/><label for="toctree-checkbox-52"><div class="visually-hidden">Toggle navigation of Popularity Calculation Optimizations</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../projects/proposals/popularity_optimizations/20230406-project_proposal_popularity_optimizations.html">2023-04-06 Project Proposal: Popularity Calculation Optimizations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../projects/proposals/popularity_optimizations/20230420-implementation_plan_popularity_optimizations.html">Implementation Plan: Decoupling Popularity Calculations from the Data Refresh</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../projects/proposals/project_improvement/index.html">Project board improvements</a><input class="toctree-checkbox" id="toctree-checkbox-53" name="toctree-checkbox-53" role="switch" type="checkbox"/><label for="toctree-checkbox-53"><div class="visually-hidden">Toggle navigation of Project board improvements</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../projects/proposals/project_improvement/20230913-project_proposal_project_improvements.html">2023-09-13 Project proposal: Project board improvements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../projects/proposals/project_improvement/20230914-implementation_plan_project_automations.html">2023-09-14 Implementation plan: Project automations</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../projects/proposals/publish_dataset/index.html">Providing and maintaining an Openverse image dataset</a><input class="toctree-checkbox" id="toctree-checkbox-54" name="toctree-checkbox-54" role="switch" type="checkbox"/><label for="toctree-checkbox-54"><div class="visually-hidden">Toggle navigation of Providing and maintaining an Openverse image dataset</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../projects/proposals/publish_dataset/20230706-project_proposal_openverse_dataset.html">2023-07-06 Project Proposal: Providing and maintaining an Openverse image dataset</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../projects/proposals/search_relevancy_sandbox/index.html">Search Relevancy Sandbox</a><input class="toctree-checkbox" id="toctree-checkbox-55" name="toctree-checkbox-55" role="switch" type="checkbox"/><label for="toctree-checkbox-55"><div class="visually-hidden">Toggle navigation of Search Relevancy Sandbox</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../projects/proposals/search_relevancy_sandbox/20230331-project_proposal_search_relevancy_sandbox.html">2023-03-31 Project Proposal: Search relevancy sandbox</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../projects/proposals/search_relevancy_sandbox/20230406-implementation_plan_update_staging_database.html">2023-04-06 Implementation Plan: Update Staging Database</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../projects/proposals/search_relevancy_sandbox/20230518-implementation_plan_staging_index_rapid_iteration.html">2023-05-18 Implementation Plan: Rapid iteration of ingestion server index configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../projects/proposals/search_relevancy_sandbox/20230530-implementation_plan_staging_elasticsearch_reindex_dags.html">2023-06-08 Implementation Plan: Staging Elasticsearch Reindex DAGs</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../projects/proposals/trust_and_safety/content_report_moderation/index.html">Sensitive Content Report Moderation Initial Practices</a><input class="toctree-checkbox" id="toctree-checkbox-56" name="toctree-checkbox-56" role="switch" type="checkbox"/><label for="toctree-checkbox-56"><div class="visually-hidden">Toggle navigation of Sensitive Content Report Moderation Initial Practices</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../projects/proposals/trust_and_safety/content_report_moderation/20230411-project_proposal_content_report_moderation.html">2023-04-11 Project Proposal: Sensitive content report moderation: initial practices</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../projects/proposals/trust_and_safety/content_report_moderation/20230517-implementation_plan_mature_copy_change.html">2023-05-17 Implementation Plan: Copy updates <code class="docutils literal notranslate"><span class="pre">mature</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">sensitive</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../projects/proposals/trust_and_safety/content_report_moderation/20231208-implementation_plan_django_admin_moderator_access.html">2023-12-08 Implementation Plan: Django admin tools and access control for moderators</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../projects/proposals/trust_and_safety/detecting_sensitive_textual_content/index.html">Detecting and Blurring Sensitive Textual Content</a><input class="toctree-checkbox" id="toctree-checkbox-57" name="toctree-checkbox-57" role="switch" type="checkbox"/><label for="toctree-checkbox-57"><div class="visually-hidden">Toggle navigation of Detecting and Blurring Sensitive Textual Content</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../projects/proposals/trust_and_safety/detecting_sensitive_textual_content/20230309-implementation_plan_sensitive_terms_list.html">2023-03-09 Implementation Plan: Sensitive Terms List</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../projects/proposals/trust_and_safety/detecting_sensitive_textual_content/20230309-project_proposal_detecting_sensitive_textual_content.html">2023-03-09 Project Proposal: Detecting sensitive textual content and blurring all sensitive results</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../projects/proposals/trust_and_safety/detecting_sensitive_textual_content/20230330-implementation_plan_filtering_and_designating_results_with_sensitive_textual_content.html">2023-03-30 Implementation Plan: Filtering and designating results with sensitive textual content</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../projects/proposals/trust_and_safety/detecting_sensitive_textual_content/20230506-implementation_plan_frontend_blurring_sensitive.html">2023-05-06 Implementation Plan: Fetching, blurring sensitive results</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../projects/proposals/trust_and_safety/index.html">Trust and Safety</a><input class="toctree-checkbox" id="toctree-checkbox-58" name="toctree-checkbox-58" role="switch" type="checkbox"/><label for="toctree-checkbox-58"><div class="visually-hidden">Toggle navigation of Trust and Safety</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../projects/proposals/trust_and_safety/20230109-trust_and_safety_preliminary_overview_and_exploration.html">2023-01-09 Initial Overview and User Stories</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../projects/proposals/trust_and_safety/content_report_moderation/index.html">Sensitive Content Report Moderation Initial Practices</a><input class="toctree-checkbox" id="toctree-checkbox-59" name="toctree-checkbox-59" role="switch" type="checkbox"/><label for="toctree-checkbox-59"><div class="visually-hidden">Toggle navigation of Sensitive Content Report Moderation Initial Practices</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../projects/proposals/trust_and_safety/content_report_moderation/20230411-project_proposal_content_report_moderation.html">2023-04-11 Project Proposal: Sensitive content report moderation: initial practices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../projects/proposals/trust_and_safety/content_report_moderation/20230517-implementation_plan_mature_copy_change.html">2023-05-17 Implementation Plan: Copy updates <code class="docutils literal notranslate"><span class="pre">mature</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">sensitive</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../projects/proposals/trust_and_safety/content_report_moderation/20231208-implementation_plan_django_admin_moderator_access.html">2023-12-08 Implementation Plan: Django admin tools and access control for moderators</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../projects/proposals/trust_and_safety/detecting_sensitive_textual_content/index.html">Detecting and Blurring Sensitive Textual Content</a><input class="toctree-checkbox" id="toctree-checkbox-60" name="toctree-checkbox-60" role="switch" type="checkbox"/><label for="toctree-checkbox-60"><div class="visually-hidden">Toggle navigation of Detecting and Blurring Sensitive Textual Content</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../projects/proposals/trust_and_safety/detecting_sensitive_textual_content/20230309-implementation_plan_sensitive_terms_list.html">2023-03-09 Implementation Plan: Sensitive Terms List</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../projects/proposals/trust_and_safety/detecting_sensitive_textual_content/20230309-project_proposal_detecting_sensitive_textual_content.html">2023-03-09 Project Proposal: Detecting sensitive textual content and blurring all sensitive results</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../projects/proposals/trust_and_safety/detecting_sensitive_textual_content/20230330-implementation_plan_filtering_and_designating_results_with_sensitive_textual_content.html">2023-03-30 Implementation Plan: Filtering and designating results with sensitive textual content</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../projects/proposals/trust_and_safety/detecting_sensitive_textual_content/20230506-implementation_plan_frontend_blurring_sensitive.html">2023-05-06 Implementation Plan: Fetching, blurring sensitive results</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../projects/proposals/visual_regression_testing/index.html">Visual Regression Testing</a><input class="toctree-checkbox" id="toctree-checkbox-61" name="toctree-checkbox-61" role="switch" type="checkbox"/><label for="toctree-checkbox-61"><div class="visually-hidden">Toggle navigation of Visual Regression Testing</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../projects/proposals/visual_regression_testing/20220217-implementation_plan.html">2022-02-17 Implementation Plan: Visual regression testing</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../projects/proposals/vuex_to_pina_conversion/index.html">Pinia Conversion</a><input class="toctree-checkbox" id="toctree-checkbox-62" name="toctree-checkbox-62" role="switch" type="checkbox"/><label for="toctree-checkbox-62"><div class="visually-hidden">Toggle navigation of Pinia Conversion</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../projects/proposals/vuex_to_pina_conversion/20220223-project_proposal.html">2022-02-23 Project Proposal: Vuex to Pinia conversion</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../terms_of_service.html">Openverse Terms of Service</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">External links</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://openverse.org">Openverse</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/WordPress/openverse">GitHub</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="edit-this-page">
  <a class="muted-link" href="https://github.com/WordPress/openverse/edit/main/documentation/catalog/reference/DAGs.md" title="Edit this page">
    <svg aria-hidden="true" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <path d="M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4" />
      <line x1="13.5" y1="6.5" x2="17.5" y2="10.5" />
    </svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="dags">
<h1>DAGs<a class="headerlink" href="#dags" title="Link to this heading">#</a></h1>
<p><em>Note: this document is auto-generated and should not be manually edited</em></p>
<p>This document describes the DAGs available along with pertinent DAG information
and the DAGs documentation.</p>
<p>The DAGs are shown in two forms:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#dags-by-type">DAGs by Type</a></p></li>
<li><p><a class="reference internal" href="#dag-documentation">Individual DAG documentation</a></p></li>
</ul>
<section id="dags-by-type">
<h2>DAGs by Type<a class="headerlink" href="#dags-by-type" title="Link to this heading">#</a></h2>
<p>The following are DAGs grouped by their primary tag:</p>
<ol class="arabic simple">
<li><p><a class="reference internal" href="#data-normalization">Data Normalization</a></p></li>
<li><p><a class="reference internal" href="#data-refresh">Data Refresh</a></p></li>
<li><p><a class="reference internal" href="#database">Database</a></p></li>
<li><p><a class="reference internal" href="#elasticsearch">Elasticsearch</a></p></li>
<li><p><a class="reference internal" href="#maintenance">Maintenance</a></p></li>
<li><p><a class="reference internal" href="#oauth">Oauth</a></p></li>
<li><p><a class="reference internal" href="#other">Other</a></p></li>
<li><p><a class="reference internal" href="#popularity-refresh">Popularity Refresh</a></p></li>
<li><p><a class="reference internal" href="#provider">Provider</a></p></li>
<li><p><a class="reference internal" href="#provider-reingestion">Provider Reingestion</a></p></li>
</ol>
<section id="data-normalization">
<h3>Data Normalization<a class="headerlink" href="#data-normalization" title="Link to this heading">#</a></h3>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>DAG ID</p></th>
<th class="head"><p>Schedule Interval</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="#add-license-url"><code class="docutils literal notranslate"><span class="pre">add_license_url</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="data-refresh">
<h3>Data Refresh<a class="headerlink" href="#data-refresh" title="Link to this heading">#</a></h3>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>DAG ID</p></th>
<th class="head"><p>Schedule Interval</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="#audio-data-refresh"><code class="docutils literal notranslate"><span class="pre">audio_data_refresh</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">0</span> <span class="pre">*</span> <span class="pre">*</span> <span class="pre">1</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#create-filtered-audio-index"><code class="docutils literal notranslate"><span class="pre">create_filtered_audio_index</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#create-filtered-image-index"><code class="docutils literal notranslate"><span class="pre">create_filtered_image_index</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#image-data-refresh"><code class="docutils literal notranslate"><span class="pre">image_data_refresh</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">0</span> <span class="pre">*</span> <span class="pre">*</span> <span class="pre">1</span></code></p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="database">
<h3>Database<a class="headerlink" href="#database" title="Link to this heading">#</a></h3>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>DAG ID</p></th>
<th class="head"><p>Schedule Interval</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="#batched-update"><code class="docutils literal notranslate"><span class="pre">batched_update</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#delete-records"><code class="docutils literal notranslate"><span class="pre">delete_records</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#recreate-audio-popularity-calculation"><code class="docutils literal notranslate"><span class="pre">recreate_audio_popularity_calculation</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#recreate-full-staging-index"><code class="docutils literal notranslate"><span class="pre">recreate_full_staging_index</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#recreate-image-popularity-calculation"><code class="docutils literal notranslate"><span class="pre">recreate_image_popularity_calculation</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#report-pending-reported-media"><code class="docutils literal notranslate"><span class="pre">report_pending_reported_media</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&#64;weekly</span></code></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#staging-database-restore"><code class="docutils literal notranslate"><span class="pre">staging_database_restore</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&#64;monthly</span></code></p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="elasticsearch">
<h3>Elasticsearch<a class="headerlink" href="#elasticsearch" title="Link to this heading">#</a></h3>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>DAG ID</p></th>
<th class="head"><p>Schedule Interval</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="#create-new-production-es-index"><code class="docutils literal notranslate"><span class="pre">create_new_production_es_index</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#create-new-staging-es-index"><code class="docutils literal notranslate"><span class="pre">create_new_staging_es_index</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="maintenance">
<h3>Maintenance<a class="headerlink" href="#maintenance" title="Link to this heading">#</a></h3>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>DAG ID</p></th>
<th class="head"><p>Schedule Interval</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="#airflow-log-cleanup"><code class="docutils literal notranslate"><span class="pre">airflow_log_cleanup</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&#64;weekly</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#check-silenced-dags"><code class="docutils literal notranslate"><span class="pre">check_silenced_dags</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&#64;weekly</span></code></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#flickr-audit-sub-provider-workflow"><code class="docutils literal notranslate"><span class="pre">flickr_audit_sub_provider_workflow</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&#64;monthly</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pr-review-reminders"><code class="docutils literal notranslate"><span class="pre">pr_review_reminders</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">0</span> <span class="pre">*</span> <span class="pre">*</span> <span class="pre">1-5</span></code></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#rotate-db-snapshots"><code class="docutils literal notranslate"><span class="pre">rotate_db_snapshots</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">0</span> <span class="pre">*</span> <span class="pre">*</span> <span class="pre">6</span></code></p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="oauth">
<h3>Oauth<a class="headerlink" href="#oauth" title="Link to this heading">#</a></h3>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>DAG ID</p></th>
<th class="head"><p>Schedule Interval</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="#oauth2-authorization"><code class="docutils literal notranslate"><span class="pre">oauth2_authorization</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#oauth2-token-refresh"><code class="docutils literal notranslate"><span class="pre">oauth2_token_refresh</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">*/12</span> <span class="pre">*</span> <span class="pre">*</span> <span class="pre">*</span></code></p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="other">
<h3>Other<a class="headerlink" href="#other" title="Link to this heading">#</a></h3>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>DAG ID</p></th>
<th class="head"><p>Schedule Interval</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="#flickr-thumbnails-removal"><code class="docutils literal notranslate"><span class="pre">flickr_thumbnails_removal</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="popularity-refresh">
<h3>Popularity Refresh<a class="headerlink" href="#popularity-refresh" title="Link to this heading">#</a></h3>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>DAG ID</p></th>
<th class="head"><p>Schedule Interval</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="#audio-popularity-refresh"><code class="docutils literal notranslate"><span class="pre">audio_popularity_refresh</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&#64;monthly</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#image-popularity-refresh"><code class="docutils literal notranslate"><span class="pre">image_popularity_refresh</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&#64;monthly</span></code></p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="provider">
<h3>Provider<a class="headerlink" href="#provider" title="Link to this heading">#</a></h3>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>DAG ID</p></th>
<th class="head"><p>Schedule Interval</p></th>
<th class="head"><p>Dated</p></th>
<th class="head"><p>Media Type(s)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="#auckland-museum-workflow"><code class="docutils literal notranslate"><span class="pre">auckland_museum_workflow</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&#64;daily</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">True</span></code></p></td>
<td><p>image</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">brooklyn_museum_workflow</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&#64;monthly</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
<td><p>image</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#cc-mixter-workflow"><code class="docutils literal notranslate"><span class="pre">cc_mixter_workflow</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&#64;monthly</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
<td><p>audio</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">cleveland_museum_workflow</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&#64;monthly</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
<td><p>image</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#europeana-workflow"><code class="docutils literal notranslate"><span class="pre">europeana_workflow</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&#64;daily</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">True</span></code></p></td>
<td><p>image</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#finnish-museums-workflow"><code class="docutils literal notranslate"><span class="pre">finnish_museums_workflow</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&#64;daily</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">True</span></code></p></td>
<td><p>image</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#flickr-workflow"><code class="docutils literal notranslate"><span class="pre">flickr_workflow</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&#64;daily</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">True</span></code></p></td>
<td><p>image</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#freesound-workflow"><code class="docutils literal notranslate"><span class="pre">freesound_workflow</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&#64;quarterly</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
<td><p>audio</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#inaturalist-workflow"><code class="docutils literal notranslate"><span class="pre">inaturalist_workflow</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">0</span> <span class="pre">2</span> <span class="pre">*</span> <span class="pre">*</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
<td><p>image</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#jamendo-workflow"><code class="docutils literal notranslate"><span class="pre">jamendo_workflow</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&#64;monthly</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
<td><p>audio</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#justtakeitfree-workflow"><code class="docutils literal notranslate"><span class="pre">justtakeitfree_workflow</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&#64;monthly</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
<td><p>image</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#metropolitan-museum-workflow"><code class="docutils literal notranslate"><span class="pre">metropolitan_museum_workflow</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&#64;daily</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">True</span></code></p></td>
<td><p>image</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">museum_victoria_workflow</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&#64;monthly</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
<td><p>image</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#nappy-workflow"><code class="docutils literal notranslate"><span class="pre">nappy_workflow</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&#64;monthly</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
<td><p>image</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">nypl_workflow</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&#64;monthly</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
<td><p>image</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#phylopic-workflow"><code class="docutils literal notranslate"><span class="pre">phylopic_workflow</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&#64;weekly</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
<td><p>image</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#rawpixel-workflow"><code class="docutils literal notranslate"><span class="pre">rawpixel_workflow</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&#64;monthly</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
<td><p>image</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#science-museum-workflow"><code class="docutils literal notranslate"><span class="pre">science_museum_workflow</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&#64;monthly</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
<td><p>image</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smithsonian-workflow"><code class="docutils literal notranslate"><span class="pre">smithsonian_workflow</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&#64;weekly</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
<td><p>image</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#smk-workflow"><code class="docutils literal notranslate"><span class="pre">smk_workflow</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&#64;monthly</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
<td><p>image</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#stocksnap-workflow"><code class="docutils literal notranslate"><span class="pre">stocksnap_workflow</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&#64;monthly</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
<td><p>image</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#wikimedia-commons-workflow"><code class="docutils literal notranslate"><span class="pre">wikimedia_commons_workflow</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&#64;daily</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">True</span></code></p></td>
<td><p>image, audio</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#wordpress-workflow"><code class="docutils literal notranslate"><span class="pre">wordpress_workflow</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&#64;weekly</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
<td><p>image</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="provider-reingestion">
<h3>Provider Reingestion<a class="headerlink" href="#provider-reingestion" title="Link to this heading">#</a></h3>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>DAG ID</p></th>
<th class="head"><p>Schedule Interval</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="#flickr-reingestion-workflow"><code class="docutils literal notranslate"><span class="pre">flickr_reingestion_workflow</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&#64;weekly</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#metropolitan-museum-reingestion-workflow"><code class="docutils literal notranslate"><span class="pre">metropolitan_museum_reingestion_workflow</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&#64;weekly</span></code></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#phylopic-reingestion-workflow"><code class="docutils literal notranslate"><span class="pre">phylopic_reingestion_workflow</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&#64;weekly</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#wikimedia-reingestion-workflow"><code class="docutils literal notranslate"><span class="pre">wikimedia_reingestion_workflow</span></code></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&#64;weekly</span></code></p></td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
<section id="dag-documentation">
<h2>DAG documentation<a class="headerlink" href="#dag-documentation" title="Link to this heading">#</a></h2>
<p>The following is documentation associated with each DAG (where available):</p>
<ol class="arabic simple">
<li><p><a class="reference internal" href="#add-license-url"><code class="docutils literal notranslate"><span class="pre">add_license_url</span></code></a></p></li>
<li><p><a class="reference internal" href="#airflow-log-cleanup"><code class="docutils literal notranslate"><span class="pre">airflow_log_cleanup</span></code></a></p></li>
<li><p><a class="reference internal" href="#auckland-museum-workflow"><code class="docutils literal notranslate"><span class="pre">auckland_museum_workflow</span></code></a></p></li>
<li><p><a class="reference internal" href="#audio-data-refresh"><code class="docutils literal notranslate"><span class="pre">audio_data_refresh</span></code></a></p></li>
<li><p><a class="reference internal" href="#audio-popularity-refresh"><code class="docutils literal notranslate"><span class="pre">audio_popularity_refresh</span></code></a></p></li>
<li><p><a class="reference internal" href="#batched-update"><code class="docutils literal notranslate"><span class="pre">batched_update</span></code></a></p></li>
<li><p><a class="reference internal" href="#cc-mixter-workflow"><code class="docutils literal notranslate"><span class="pre">cc_mixter_workflow</span></code></a></p></li>
<li><p><a class="reference internal" href="#check-silenced-dags"><code class="docutils literal notranslate"><span class="pre">check_silenced_dags</span></code></a></p></li>
<li><p><a class="reference internal" href="#create-filtered-audio-index"><code class="docutils literal notranslate"><span class="pre">create_filtered_audio_index</span></code></a></p></li>
<li><p><a class="reference internal" href="#create-filtered-image-index"><code class="docutils literal notranslate"><span class="pre">create_filtered_image_index</span></code></a></p></li>
<li><p><a class="reference internal" href="#create-new-production-es-index"><code class="docutils literal notranslate"><span class="pre">create_new_production_es_index</span></code></a></p></li>
<li><p><a class="reference internal" href="#create-new-staging-es-index"><code class="docutils literal notranslate"><span class="pre">create_new_staging_es_index</span></code></a></p></li>
<li><p><a class="reference internal" href="#delete-records"><code class="docutils literal notranslate"><span class="pre">delete_records</span></code></a></p></li>
<li><p><a class="reference internal" href="#europeana-workflow"><code class="docutils literal notranslate"><span class="pre">europeana_workflow</span></code></a></p></li>
<li><p><a class="reference internal" href="#finnish-museums-workflow"><code class="docutils literal notranslate"><span class="pre">finnish_museums_workflow</span></code></a></p></li>
<li><p><a class="reference internal" href="#flickr-audit-sub-provider-workflow"><code class="docutils literal notranslate"><span class="pre">flickr_audit_sub_provider_workflow</span></code></a></p></li>
<li><p><a class="reference internal" href="#flickr-reingestion-workflow"><code class="docutils literal notranslate"><span class="pre">flickr_reingestion_workflow</span></code></a></p></li>
<li><p><a class="reference internal" href="#flickr-thumbnails-removal"><code class="docutils literal notranslate"><span class="pre">flickr_thumbnails_removal</span></code></a></p></li>
<li><p><a class="reference internal" href="#flickr-workflow"><code class="docutils literal notranslate"><span class="pre">flickr_workflow</span></code></a></p></li>
<li><p><a class="reference internal" href="#freesound-workflow"><code class="docutils literal notranslate"><span class="pre">freesound_workflow</span></code></a></p></li>
<li><p><a class="reference internal" href="#image-data-refresh"><code class="docutils literal notranslate"><span class="pre">image_data_refresh</span></code></a></p></li>
<li><p><a class="reference internal" href="#image-popularity-refresh"><code class="docutils literal notranslate"><span class="pre">image_popularity_refresh</span></code></a></p></li>
<li><p><a class="reference internal" href="#inaturalist-workflow"><code class="docutils literal notranslate"><span class="pre">inaturalist_workflow</span></code></a></p></li>
<li><p><a class="reference internal" href="#jamendo-workflow"><code class="docutils literal notranslate"><span class="pre">jamendo_workflow</span></code></a></p></li>
<li><p><a class="reference internal" href="#justtakeitfree-workflow"><code class="docutils literal notranslate"><span class="pre">justtakeitfree_workflow</span></code></a></p></li>
<li><p><a class="reference internal" href="#metropolitan-museum-reingestion-workflow"><code class="docutils literal notranslate"><span class="pre">metropolitan_museum_reingestion_workflow</span></code></a></p></li>
<li><p><a class="reference internal" href="#metropolitan-museum-workflow"><code class="docutils literal notranslate"><span class="pre">metropolitan_museum_workflow</span></code></a></p></li>
<li><p><a class="reference internal" href="#nappy-workflow"><code class="docutils literal notranslate"><span class="pre">nappy_workflow</span></code></a></p></li>
<li><p><a class="reference internal" href="#oauth2-authorization"><code class="docutils literal notranslate"><span class="pre">oauth2_authorization</span></code></a></p></li>
<li><p><a class="reference internal" href="#oauth2-token-refresh"><code class="docutils literal notranslate"><span class="pre">oauth2_token_refresh</span></code></a></p></li>
<li><p><a class="reference internal" href="#phylopic-reingestion-workflow"><code class="docutils literal notranslate"><span class="pre">phylopic_reingestion_workflow</span></code></a></p></li>
<li><p><a class="reference internal" href="#phylopic-workflow"><code class="docutils literal notranslate"><span class="pre">phylopic_workflow</span></code></a></p></li>
<li><p><a class="reference internal" href="#pr-review-reminders"><code class="docutils literal notranslate"><span class="pre">pr_review_reminders</span></code></a></p></li>
<li><p><a class="reference internal" href="#rawpixel-workflow"><code class="docutils literal notranslate"><span class="pre">rawpixel_workflow</span></code></a></p></li>
<li><p><a class="reference internal" href="#recreate-audio-popularity-calculation"><code class="docutils literal notranslate"><span class="pre">recreate_audio_popularity_calculation</span></code></a></p></li>
<li><p><a class="reference internal" href="#recreate-full-staging-index"><code class="docutils literal notranslate"><span class="pre">recreate_full_staging_index</span></code></a></p></li>
<li><p><a class="reference internal" href="#recreate-image-popularity-calculation"><code class="docutils literal notranslate"><span class="pre">recreate_image_popularity_calculation</span></code></a></p></li>
<li><p><a class="reference internal" href="#report-pending-reported-media"><code class="docutils literal notranslate"><span class="pre">report_pending_reported_media</span></code></a></p></li>
<li><p><a class="reference internal" href="#rotate-db-snapshots"><code class="docutils literal notranslate"><span class="pre">rotate_db_snapshots</span></code></a></p></li>
<li><p><a class="reference internal" href="#science-museum-workflow"><code class="docutils literal notranslate"><span class="pre">science_museum_workflow</span></code></a></p></li>
<li><p><a class="reference internal" href="#smithsonian-workflow"><code class="docutils literal notranslate"><span class="pre">smithsonian_workflow</span></code></a></p></li>
<li><p><a class="reference internal" href="#smk-workflow"><code class="docutils literal notranslate"><span class="pre">smk_workflow</span></code></a></p></li>
<li><p><a class="reference internal" href="#staging-database-restore"><code class="docutils literal notranslate"><span class="pre">staging_database_restore</span></code></a></p></li>
<li><p><a class="reference internal" href="#stocksnap-workflow"><code class="docutils literal notranslate"><span class="pre">stocksnap_workflow</span></code></a></p></li>
<li><p><a class="reference internal" href="#wikimedia-commons-workflow"><code class="docutils literal notranslate"><span class="pre">wikimedia_commons_workflow</span></code></a></p></li>
<li><p><a class="reference internal" href="#wikimedia-reingestion-workflow"><code class="docutils literal notranslate"><span class="pre">wikimedia_reingestion_workflow</span></code></a></p></li>
<li><p><a class="reference internal" href="#wordpress-workflow"><code class="docutils literal notranslate"><span class="pre">wordpress_workflow</span></code></a></p></li>
</ol>
<section id="add-license-url">
<h3><code class="docutils literal notranslate"><span class="pre">add_license_url</span></code><a class="headerlink" href="#add-license-url" title="Link to this heading">#</a></h3>
<section id="id1">
<h4>Add license URL<a class="headerlink" href="#id1" title="Link to this heading">#</a></h4>
<p>Add <code class="docutils literal notranslate"><span class="pre">license_url</span></code> to all rows that have <code class="docutils literal notranslate"><span class="pre">NULL</span></code> in their <code class="docutils literal notranslate"><span class="pre">meta_data</span></code> fields. This
PR sets the meta_data value to {license_url: https:// }, where the url is
constructed from the <code class="docutils literal notranslate"><span class="pre">license</span></code> and <code class="docutils literal notranslate"><span class="pre">license_version</span></code> columns.</p>
<p>This is a maintenance DAG that should be run once. If all the null values in the
<code class="docutils literal notranslate"><span class="pre">meta_data</span></code> column are updated, the DAG will only run the first and the last
step, logging the statistics.</p>
</section>
</section>
<section id="airflow-log-cleanup">
<h3><code class="docutils literal notranslate"><span class="pre">airflow_log_cleanup</span></code><a class="headerlink" href="#airflow-log-cleanup" title="Link to this heading">#</a></h3>
<section id="clean-up-airflow-logs">
<h4>Clean up airflow logs<a class="headerlink" href="#clean-up-airflow-logs" title="Link to this heading">#</a></h4>
<p>A maintenance workflow that you can deploy into Airflow to periodically clean
out the task logs to avoid those getting too big. By default, this will also
clean child process logs from the scheduler directory.</p>
<p>Can remove all log files by setting maxLogAgeInDays to -1. If you want to test
the DAG in the Airflow Web UI, you can also set enableDelete to <code class="docutils literal notranslate"><span class="pre">false</span></code>, and
then you will see a list of log folders that can be deleted, but will not
actually delete them.</p>
<p>This should all go on one line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">airflow</span> <span class="n">dags</span> <span class="n">trigger</span> <span class="o">--</span><span class="n">conf</span>
<span class="s1">&#39;{&quot;maxLogAgeInDays&quot;:-1, &quot;enableDelete&quot;: &quot;false&quot;}&#39;</span> <span class="n">airflow_log_cleanup</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">--conf</span></code> options:</p>
<ul class="simple">
<li><p>maxLogAgeInDays:<INT> - Optional</p></li>
<li><p>enableDelete:<BOOLEAN> - Optional</p></li>
</ul>
</section>
</section>
<section id="auckland-museum-workflow">
<h3><code class="docutils literal notranslate"><span class="pre">auckland_museum_workflow</span></code><a class="headerlink" href="#auckland-museum-workflow" title="Link to this heading">#</a></h3>
<p>Content Provider: Auckland War Memorial Museum Tmaki Paenga Hira</p>
<p>ETL Process: Use the API to identify all CC licensed media.</p>
<p>Output: TSV file containing the media and the respective meta-data.</p>
<p>Notes: https://api.aucklandmuseum.com/</p>
<p>Resource: https://api.aucklandmuseum.com/
https://github.com/AucklandMuseum/API/wiki/Tutorial</p>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Resource</p></th>
<th class="head"><p>Requests per second</p></th>
<th class="head"><p>Requests per day</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>/search, /id</p></td>
<td><p>10</p></td>
<td><p>1000</p></td>
</tr>
<tr class="row-odd"><td><p>/id/media</p></td>
<td><p>10</p></td>
<td><p>1000</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="audio-data-refresh">
<h3><code class="docutils literal notranslate"><span class="pre">audio_data_refresh</span></code><a class="headerlink" href="#audio-data-refresh" title="Link to this heading">#</a></h3>
<section id="data-refresh-dag-factory">
<h4>Data Refresh DAG Factory<a class="headerlink" href="#data-refresh-dag-factory" title="Link to this heading">#</a></h4>
<p>This file generates our data refresh DAGs using a factory function. For the
given media type these DAGs will initiate a data refresh on the ingestion server
and await the success or failure of that task.</p>
<p>A data refresh occurs on the Ingestion server in the Openverse project. This is
a task which imports data from the upstream Catalog database into the API,
copies contents to a new Elasticsearch index, and finally makes the index
live. This process is necessary to make new content added to the Catalog by
our provider DAGs available to the API. You can read more in the
<a class="reference external" href="https://github.com/WordPress/openverse/blob/main/ingestion_server/README.md">README</a>
Importantly, the data refresh TaskGroup is also configured to handle concurrency
requirements of the Ingestion server. Finally, once the origin indexes have been
refreshed, the corresponding filtered index creation DAG is triggered.</p>
<p>You can find more background information on this process in the following issues
and related PRs:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/WordPress/openverse-catalog/issues/353">[Feature] Data refresh orchestration DAG</a></p></li>
<li><p><a class="reference external" href="https://github.com/WordPress/openverse-catalog/issues/453">[Feature] Merge popularity calculations and data refresh into a single DAG</a></p></li>
</ul>
</section>
</section>
<section id="audio-popularity-refresh">
<h3><code class="docutils literal notranslate"><span class="pre">audio_popularity_refresh</span></code><a class="headerlink" href="#audio-popularity-refresh" title="Link to this heading">#</a></h3>
<section id="popularity-refresh-dag-factory">
<h4>Popularity Refresh DAG Factory<a class="headerlink" href="#popularity-refresh-dag-factory" title="Link to this heading">#</a></h4>
<p>This file generates our popularity refresh DAGs using a factory function.</p>
<p>For the given media type these DAGs will first update the popularity metrics
table, adding any new metrics and updating the percentile that is used in
calculating the popularity constants. It then refreshes the popularity constants
view, which recalculates the popularity constant for each provider.</p>
<p>Once the constants have been updated, the DAG will trigger a <code class="docutils literal notranslate"><span class="pre">batched_update</span></code>
DagRun for each provider of this media_type that is configured to support
popularity data. The batched update recalculates standardized popularity scores
for all records, using the new constant. When the updates are complete, all
records have up-to-date popularity data. This DAG can be run concurrently with
data refreshes and regular ingestion.</p>
<p>You can find more background information on this process in the following
implementation plan:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.openverse.org/projects/proposals/popularity_optimizations/20230420-implementation_plan_popularity_optimizations.html">[Implementation Plan] Decoupling Popularity Calculations from the Data Refresh</a></p></li>
</ul>
</section>
</section>
<section id="batched-update">
<h3><code class="docutils literal notranslate"><span class="pre">batched_update</span></code><a class="headerlink" href="#batched-update" title="Link to this heading">#</a></h3>
<p>Batched Update DAG</p>
<p>This DAG is used to run a batched SQL update on a media table in the Catalog
database. It is automatically triggered by the <code class="docutils literal notranslate"><span class="pre">popularity_refresh</span></code> DAGs to
refresh popularity data using newly calculated constants, but can also be
triggered manually with custom SQL operations.</p>
<p>The DAG must be run with a valid dag_run configuration specifying the SQL
commands to be run. The DAG will then split the rows to be updated into batches,
and report to Slack when all batches have been updated. It handles all
deadlocking and timeout concerns, ensuring that the provided SQL is run without
interfering with ingestion. For more information, see the implementation plan:
https://docs.openverse.org/projects/proposals/popularity_optimizations/20230420-implementation_plan_popularity_optimizations.html#special-considerations-avoiding-deadlocks-and-timeouts</p>
<p>By default the DAG will run as a dry_run, logging the generated SQL but not
actually running it. To actually perform the update, the <code class="docutils literal notranslate"><span class="pre">dry_run</span></code> parameter
must be explicitly set to <code class="docutils literal notranslate"><span class="pre">false</span></code> in the configuration.</p>
<p>Required Dagrun Configuration parameters:</p>
<ul class="simple">
<li><p>query_id: a string identifier which will be appended to temporary table used
in the update</p></li>
<li><p>table_name: the name of the table to update. Must be a valid media table</p></li>
<li><p>select_query: a SQL <code class="docutils literal notranslate"><span class="pre">WHERE</span></code> clause used to select the rows that will be
updated</p></li>
<li><p>update_query: the SQL <code class="docutils literal notranslate"><span class="pre">UPDATE</span></code> expression to be run on all selected rows</p></li>
</ul>
<p>Optional params:</p>
<ul class="simple">
<li><p>dry_run: bool, whether to actually run the generated SQL. True by default.</p></li>
<li><p>batch_size: int number of records to process in each batch. By default, 10_000</p></li>
<li><p>update_timeout: int number of seconds to run an individual batch update before
timing out. By default, 3600 (or one hour)</p></li>
<li><p>resume_update: boolean indicating whether to attempt to resume an update using
an existing temp table matching the <code class="docutils literal notranslate"><span class="pre">query_id</span></code>. When True, a new temp table is
not created.</p></li>
</ul>
<p>An example dag_run configuration used to set the thumbnails of all Flickr images
to null would look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;query_id&quot;</span><span class="p">:</span> <span class="s2">&quot;my_flickr_query&quot;</span><span class="p">,</span>
    <span class="s2">&quot;table_name&quot;</span><span class="p">:</span> <span class="s2">&quot;image&quot;</span><span class="p">,</span>
    <span class="s2">&quot;select_query&quot;</span><span class="p">:</span> <span class="s2">&quot;WHERE provider=&#39;flickr&#39;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;update_query&quot;</span><span class="p">:</span> <span class="s2">&quot;SET thumbnail=null&quot;</span><span class="p">,</span>
    <span class="s2">&quot;batch_size&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="s2">&quot;dry_run&quot;</span><span class="p">:</span> <span class="n">false</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">update_batches</span></code> task automatically keeps track of its progress in an
Airflow variable suffixed with the <code class="docutils literal notranslate"><span class="pre">query_id</span></code>. If the task fails, when it
resumes (either through a retry or by being manually cleared), it will pick up
from where it left off. Manually managing this Airflow variable should not be
necessary.</p>
<p>It is also possible to start an entirely new DagRun using an existing temp
table, by setting the <code class="docutils literal notranslate"><span class="pre">resume_update</span></code> param to True. With this option enabled,
the DAG will skip creating the temp table and instead attempt to run an update
with an existing temp table matching the <code class="docutils literal notranslate"><span class="pre">query_id</span></code>. This option should only be
used when the DagRun configuration needs to be changed after the table was
already created: for example, if there was a problem with the <code class="docutils literal notranslate"><span class="pre">update_query</span></code>
which caused DAG failures during the <code class="docutils literal notranslate"><span class="pre">update_batches</span></code> step.</p>
</section>
<section id="cc-mixter-workflow">
<h3><code class="docutils literal notranslate"><span class="pre">cc_mixter_workflow</span></code><a class="headerlink" href="#cc-mixter-workflow" title="Link to this heading">#</a></h3>
<p>Content Provider: ccMixter</p>
<p>ETL Process: Use the API to identify all CC licensed media.</p>
<p>Output: TSV file containing the media and the respective meta-data.</p>
<p>Notes: Documentation: https://ccmixter.org/query-api ccMixter sends bad JSON and
extremely huge headers, both of which need workarounds that are handled by this
DAG.</p>
</section>
<section id="check-silenced-dags">
<h3><code class="docutils literal notranslate"><span class="pre">check_silenced_dags</span></code><a class="headerlink" href="#check-silenced-dags" title="Link to this heading">#</a></h3>
<section id="silenced-dags-check">
<h4>Silenced DAGs check<a class="headerlink" href="#silenced-dags-check" title="Link to this heading">#</a></h4>
<p>Check for DAGs that have silenced Slack alerts or skipped errors which may need
to be turned back on.</p>
<p>When a DAG has known failures, it can be omitted from Slack error reporting by
adding an entry to the <code class="docutils literal notranslate"><span class="pre">SILENCED_SLACK_NOTIFICATIONS</span></code> Airflow variable.
Similarly, errors that occur during the <code class="docutils literal notranslate"><span class="pre">pull_data</span></code> step may be configured to
skip and allow ingestion to continue, using the <code class="docutils literal notranslate"><span class="pre">SKIPPED_INGESTION_ERRORS</span></code>
Airflow variable. These variables are dictionaries where the key is the <code class="docutils literal notranslate"><span class="pre">dag_id</span></code>
of the affected DAG, and the value is a list of configuration dictionaries
mapping an error <code class="docutils literal notranslate"><span class="pre">predicate</span></code> to be skipped/silenced to an open GitHub issue.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">check_silenced_dags</span></code> DAG iterates over the entries in the
<code class="docutils literal notranslate"><span class="pre">SILENCED_SLACK_NOTIFICATIONS</span></code> and <code class="docutils literal notranslate"><span class="pre">SKIPPED_INGESTION_ERRORS</span></code> configurations and
verifies that the associated GitHub issues are still open. If an issue has been
closed, it is assumed that the entry should be removed, and an alert is sent to
prompt manual update of the configuration. This prevents developers from
forgetting to re-enable Slack reporting or turnoff error skipping after the
issue has been resolved.</p>
<p>The DAG runs weekly.</p>
</section>
</section>
<section id="create-filtered-audio-index">
<h3><code class="docutils literal notranslate"><span class="pre">create_filtered_audio_index</span></code><a class="headerlink" href="#create-filtered-audio-index" title="Link to this heading">#</a></h3>
<section id="create-filtered-index-dag-factory">
<h4>Create filtered index DAG factory<a class="headerlink" href="#create-filtered-index-dag-factory" title="Link to this heading">#</a></h4>
<p>This module creates the filtered index creation DAGs for each media type using a
factory function.</p>
<p>Filtered index creation is handled by the ingestion server. The DAGs generated
by the <code class="docutils literal notranslate"><span class="pre">create_filtered_index_creation_dag</span></code> function in this module are
responsible for triggering the ingestion server action to create and populate
the filtered index for a given media type. The DAG awaits the completion of the
filtered index creation and then points the filtered index alias for the media
type to the newly created index. They make use of the
<code class="docutils literal notranslate"><span class="pre">create_filtered_index_creation_task_groups</span></code> factory, which is also used by the
data refreshes to perform the same functions. The purpose of these DAGs is to
allow the filtered index creation steps to be run in isolation from the data
refresh.</p>
<section id="when-this-dag-runs">
<h5>When this DAG runs<a class="headerlink" href="#when-this-dag-runs" title="Link to this heading">#</a></h5>
<p>The DAGs generated by the <code class="docutils literal notranslate"><span class="pre">create_filtered_index_creation_dag</span></code> can be used to
manually run the filtered index creation and promotion steps described above in
isolation from the rest of the data refresh. These DAGs also include checks to
ensure that race conditions with the data refresh DAGs are not encountered (see
<code class="docutils literal notranslate"><span class="pre">Race</span> <span class="pre">conditions</span></code> section below).</p>
<p>The DAGs generated in this module are on a <code class="docutils literal notranslate"><span class="pre">None</span></code> schedule and are only
triggered manually. This is primarily useful in two cases: for testing changes
to the filtered index creation; and for re-running filtered index creation if an
urgent change to the sensitive terms calls for an immediate recreation of the
filtered indexes.</p>
</section>
<section id="race-conditions">
<h5>Race conditions<a class="headerlink" href="#race-conditions" title="Link to this heading">#</a></h5>
<p>Because filtered index creation employs the <code class="docutils literal notranslate"><span class="pre">reindex</span></code> Elasticsearch API to
derive the filtered index from an existing index, we need to be mindful of the
race condition that potentially exists between the data refresh DAG and this
DAG. The race condition is caused by the fact that the data refresh DAG always
deletes the previous index once the new index for the media type is finished
being created. Consider the situation where filtered index creation is triggered
to run during a data refresh. The filtered index is being derived from the
previous index for the media type. Once the data refresh is finished, it will
delete that index, causing the reindex to halt because suddenly it has no data
source from which to pull documents.</p>
<p>There are two mechanisms that prevent this from happening:</p>
<ol class="arabic simple">
<li><p>The filtered index creation DAGs are not allowed to run if a data refresh for
the media type is already running.</p></li>
<li><p>The data refresh DAGs will wait for any pre-existing filtered index creation
DAG runs for the media type to finish before continuing.</p></li>
</ol>
<p>This ensures that neither are depending on or modifying the origin indexes
critical for the creation of the filtered indexes.</p>
</section>
</section>
</section>
<section id="create-filtered-image-index">
<h3><code class="docutils literal notranslate"><span class="pre">create_filtered_image_index</span></code><a class="headerlink" href="#create-filtered-image-index" title="Link to this heading">#</a></h3>
<section id="id2">
<h4>Create filtered index DAG factory<a class="headerlink" href="#id2" title="Link to this heading">#</a></h4>
<p>This module creates the filtered index creation DAGs for each media type using a
factory function.</p>
<p>Filtered index creation is handled by the ingestion server. The DAGs generated
by the <code class="docutils literal notranslate"><span class="pre">create_filtered_index_creation_dag</span></code> function in this module are
responsible for triggering the ingestion server action to create and populate
the filtered index for a given media type. The DAG awaits the completion of the
filtered index creation and then points the filtered index alias for the media
type to the newly created index. They make use of the
<code class="docutils literal notranslate"><span class="pre">create_filtered_index_creation_task_groups</span></code> factory, which is also used by the
data refreshes to perform the same functions. The purpose of these DAGs is to
allow the filtered index creation steps to be run in isolation from the data
refresh.</p>
<section id="id3">
<h5>When this DAG runs<a class="headerlink" href="#id3" title="Link to this heading">#</a></h5>
<p>The DAGs generated by the <code class="docutils literal notranslate"><span class="pre">create_filtered_index_creation_dag</span></code> can be used to
manually run the filtered index creation and promotion steps described above in
isolation from the rest of the data refresh. These DAGs also include checks to
ensure that race conditions with the data refresh DAGs are not encountered (see
<code class="docutils literal notranslate"><span class="pre">Race</span> <span class="pre">conditions</span></code> section below).</p>
<p>The DAGs generated in this module are on a <code class="docutils literal notranslate"><span class="pre">None</span></code> schedule and are only
triggered manually. This is primarily useful in two cases: for testing changes
to the filtered index creation; and for re-running filtered index creation if an
urgent change to the sensitive terms calls for an immediate recreation of the
filtered indexes.</p>
</section>
<section id="id4">
<h5>Race conditions<a class="headerlink" href="#id4" title="Link to this heading">#</a></h5>
<p>Because filtered index creation employs the <code class="docutils literal notranslate"><span class="pre">reindex</span></code> Elasticsearch API to
derive the filtered index from an existing index, we need to be mindful of the
race condition that potentially exists between the data refresh DAG and this
DAG. The race condition is caused by the fact that the data refresh DAG always
deletes the previous index once the new index for the media type is finished
being created. Consider the situation where filtered index creation is triggered
to run during a data refresh. The filtered index is being derived from the
previous index for the media type. Once the data refresh is finished, it will
delete that index, causing the reindex to halt because suddenly it has no data
source from which to pull documents.</p>
<p>There are two mechanisms that prevent this from happening:</p>
<ol class="arabic simple">
<li><p>The filtered index creation DAGs are not allowed to run if a data refresh for
the media type is already running.</p></li>
<li><p>The data refresh DAGs will wait for any pre-existing filtered index creation
DAG runs for the media type to finish before continuing.</p></li>
</ol>
<p>This ensures that neither are depending on or modifying the origin indexes
critical for the creation of the filtered indexes.</p>
</section>
</section>
</section>
<section id="create-new-production-es-index">
<h3><code class="docutils literal notranslate"><span class="pre">create_new_production_es_index</span></code><a class="headerlink" href="#create-new-production-es-index" title="Link to this heading">#</a></h3>
<section id="create-new-es-index-dag">
<h4>Create New ES Index DAG<a class="headerlink" href="#create-new-es-index-dag" title="Link to this heading">#</a></h4>
<p>This file generates our Create New ES Index DAGs using a factory function. A
separate DAG is generated for the staging and production environments.</p>
<p>Each DAG can be used to create new Elasticsearch indices in their respective
environment, based on an existing index. The following configuration options are
available:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">media_type</span></code> : media type for which to create the new index</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">index_suffix</span></code> : optional suffix to be added to the new index name. If not
supplied, a creation timestamp is used.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">source_index</span></code> : the existing index on which to base the new index, and from
which to copy records</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">index_config</span></code> : a JSON object containing the configuration for the new index.
By default, this will be merged into the configuration of the source index
according to the merging policy documented below.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">query</span></code> : an optional Elasticsearch query, used to filter the documents copied
from the source index into the new index. If not supplied, all records are
copied.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">override_config</span></code>: boolean override; when True, the <code class="docutils literal notranslate"><span class="pre">index_config</span></code> will be
used for the new index configuration <em>without</em> merging any values from the
source index config.</p></li>
</ul>
<section id="merging-policy">
<h5>Merging policy<a class="headerlink" href="#merging-policy" title="Link to this heading">#</a></h5>
<p>The configuration will be merged such that a leaf key in the <code class="docutils literal notranslate"><span class="pre">index_config</span></code>
overwrites the entire value present in the source configuration at that key. The
leaf values are merged naively, so a list for instance is replaced entirely
(rather than appending values). For example, if the base configuration is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;index&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;number_of_shards&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">&quot;number_of_replicas&quot;</span><span class="p">:</span> <span class="mi">1</span>
        <span class="p">},</span>
        <span class="s2">&quot;analysis&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;filter&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;stem_overrides&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;stemmer_override&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;rules&quot;</span><span class="p">:</span> <span class="p">[</span>
                        <span class="s2">&quot;animals =&gt; animal&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;animal =&gt; animal&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;anime =&gt; anime&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;animate =&gt; animate&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;animated =&gt; animate&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;universe =&gt; universe&quot;</span>
                    <span class="p">]</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>And the <code class="docutils literal notranslate"><span class="pre">index_config</span></code> passed in is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;index&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;number_of_shards&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="s2">&quot;analysis&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;filter&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;stem_overrides&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;rules&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;crim =&gt; cribble&quot;</span><span class="p">]</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The resulting, merged configuration will be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;index&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;number_of_shards&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="s2">&quot;number_of_replicas&quot;</span><span class="p">:</span> <span class="mi">1</span>
        <span class="p">},</span>
        <span class="s2">&quot;analysis&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;filter&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;stem_overrides&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;stemmer_override&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;rules&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;crim =&gt; cribble&quot;</span><span class="p">]</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="create-new-staging-es-index">
<h3><code class="docutils literal notranslate"><span class="pre">create_new_staging_es_index</span></code><a class="headerlink" href="#create-new-staging-es-index" title="Link to this heading">#</a></h3>
<section id="id5">
<h4>Create New ES Index DAG<a class="headerlink" href="#id5" title="Link to this heading">#</a></h4>
<p>This file generates our Create New ES Index DAGs using a factory function. A
separate DAG is generated for the staging and production environments.</p>
<p>Each DAG can be used to create new Elasticsearch indices in their respective
environment, based on an existing index. The following configuration options are
available:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">media_type</span></code> : media type for which to create the new index</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">index_suffix</span></code> : optional suffix to be added to the new index name. If not
supplied, a creation timestamp is used.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">source_index</span></code> : the existing index on which to base the new index, and from
which to copy records</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">index_config</span></code> : a JSON object containing the configuration for the new index.
By default, this will be merged into the configuration of the source index
according to the merging policy documented below.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">query</span></code> : an optional Elasticsearch query, used to filter the documents copied
from the source index into the new index. If not supplied, all records are
copied.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">override_config</span></code>: boolean override; when True, the <code class="docutils literal notranslate"><span class="pre">index_config</span></code> will be
used for the new index configuration <em>without</em> merging any values from the
source index config.</p></li>
</ul>
<section id="id6">
<h5>Merging policy<a class="headerlink" href="#id6" title="Link to this heading">#</a></h5>
<p>The configuration will be merged such that a leaf key in the <code class="docutils literal notranslate"><span class="pre">index_config</span></code>
overwrites the entire value present in the source configuration at that key. The
leaf values are merged naively, so a list for instance is replaced entirely
(rather than appending values). For example, if the base configuration is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;index&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;number_of_shards&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">&quot;number_of_replicas&quot;</span><span class="p">:</span> <span class="mi">1</span>
        <span class="p">},</span>
        <span class="s2">&quot;analysis&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;filter&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;stem_overrides&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;stemmer_override&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;rules&quot;</span><span class="p">:</span> <span class="p">[</span>
                        <span class="s2">&quot;animals =&gt; animal&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;animal =&gt; animal&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;anime =&gt; anime&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;animate =&gt; animate&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;animated =&gt; animate&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;universe =&gt; universe&quot;</span>
                    <span class="p">]</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>And the <code class="docutils literal notranslate"><span class="pre">index_config</span></code> passed in is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;index&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;number_of_shards&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="s2">&quot;analysis&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;filter&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;stem_overrides&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;rules&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;crim =&gt; cribble&quot;</span><span class="p">]</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The resulting, merged configuration will be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;index&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;number_of_shards&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="s2">&quot;number_of_replicas&quot;</span><span class="p">:</span> <span class="mi">1</span>
        <span class="p">},</span>
        <span class="s2">&quot;analysis&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;filter&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;stem_overrides&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;stemmer_override&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;rules&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;crim =&gt; cribble&quot;</span><span class="p">]</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="delete-records">
<h3><code class="docutils literal notranslate"><span class="pre">delete_records</span></code><a class="headerlink" href="#delete-records" title="Link to this heading">#</a></h3>
<section id="delete-records-dag">
<h4>Delete Records DAG<a class="headerlink" href="#delete-records-dag" title="Link to this heading">#</a></h4>
<p>This DAG is used to delete records from the Catalog media tables, after creating
a corresponding record in the associated <code class="docutils literal notranslate"><span class="pre">deleted_&lt;media_type&gt;</span></code> table for each
record to be deleted. It is important to note that records deleted by this DAG
will still be available in the API until the next data refresh runs.</p>
<p>Required Dagrun Configuration parameters:</p>
<ul class="simple">
<li><p>table_name: the name of the table to delete from. Must be a valid media table</p></li>
<li><p>select_query: a SQL <code class="docutils literal notranslate"><span class="pre">WHERE</span></code> clause used to select the rows that will be
deleted</p></li>
<li><p>reason: a string explaining the reason for deleting the records. Ex
(deadlink)</p></li>
</ul>
<p>An example dag_run configuration used to delete all records for the foo image
provider due to deadlinks would look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;table_name&quot;</span><span class="p">:</span> <span class="s2">&quot;image&quot;</span><span class="p">,</span>
    <span class="s2">&quot;select_query&quot;</span><span class="p">:</span> <span class="s2">&quot;WHERE provider=&#39;foo&#39;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;reason&quot;</span><span class="p">:</span> <span class="s2">&quot;deadlink&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<section id="multiple-deletions">
<h5>Multiple deletions<a class="headerlink" href="#multiple-deletions" title="Link to this heading">#</a></h5>
<p>When a record is deleted, it is added to the corresponding Deleted Media table.
If the record is reingested back into the media table, the delete<em>records DAG
may be run additional times to delete the same record. When this occurs, only
one row will be kept in the Deleted Media table for the record (as uniquely
identified by the provider and foreign identifier pair). This row is not
updated, so the <code class="docutils literal notranslate"><span class="pre">deleted_on</span></code> time will reflect the _first</em> time the record was
deleted.</p>
<p>When restoring records from the Deleted Media table, it is important to note
that these records have not been updated through reingestion, so fields such as
popularity data may be out of date.</p>
</section>
<section id="warnings">
<h5>Warnings<a class="headerlink" href="#warnings" title="Link to this heading">#</a></h5>
<p>Presently, there is no logic to prevent records that have an entry in a Deleted
Media table from simply being reingested during provider ingestion. Therefore in
its current state, the DAG should <em>only</em> be used to delete records that we can
guarantee will not be reingested (for example, because the provider is
archived).</p>
<p>This DAG does not have automated handling for deadlocks, so you must be certain
that records selected for deletion in this DAG are not also being written to by
a provider DAG, for instance. The simplest way to do this is to ensure that any
affected provider DAGs are not currently running.</p>
</section>
</section>
</section>
<section id="europeana-workflow">
<h3><code class="docutils literal notranslate"><span class="pre">europeana_workflow</span></code><a class="headerlink" href="#europeana-workflow" title="Link to this heading">#</a></h3>
<p>Content Provider: Europeana</p>
<p>ETL Process: Use the API to identify all CC licensed images.</p>
<p>Output: TSV file containing the images and the respective meta-data.</p>
<p>Notes: https://pro.europeana.eu/page/search</p>
</section>
<section id="finnish-museums-workflow">
<h3><code class="docutils literal notranslate"><span class="pre">finnish_museums_workflow</span></code><a class="headerlink" href="#finnish-museums-workflow" title="Link to this heading">#</a></h3>
<p>Content Provider: Finnish Museums</p>
<p>ETL Process: Use the API to identify all CC licensed images.</p>
<p>Output: TSV file containing the images and the respective meta-data.</p>
<p>Notes: https://api.finna.fi/swagger-ui/
https://www.finna.fi/Content/help-syntax?lng=en-gb The Finnish Museums provider
script is a dated DAG that ingests all records that were last updated in the
previous day. Because of this, it is not necessary to run a separate reingestion
DAG, as updated data will be processed during regular ingestion.</p>
</section>
<section id="flickr-audit-sub-provider-workflow">
<h3><code class="docutils literal notranslate"><span class="pre">flickr_audit_sub_provider_workflow</span></code><a class="headerlink" href="#flickr-audit-sub-provider-workflow" title="Link to this heading">#</a></h3>
<section id="flickr-sub-provider-audit">
<h4>Flickr Sub Provider Audit<a class="headerlink" href="#flickr-sub-provider-audit" title="Link to this heading">#</a></h4>
<p>Check the list of member institutions of the Flickr Commons for institutions
that have cc-licensed images and are not already configured as sub-providers for
the Flickr DAG. Report suggestions for new sub-providers to Slack.</p>
</section>
</section>
<section id="flickr-reingestion-workflow">
<h3><code class="docutils literal notranslate"><span class="pre">flickr_reingestion_workflow</span></code><a class="headerlink" href="#flickr-reingestion-workflow" title="Link to this heading">#</a></h3>
<p>Content Provider: Flickr</p>
<p>ETL Process: Use the API to identify all CC licensed images.</p>
<p>Output: TSV file containing the images and the respective meta-data.</p>
<p>Notes: https://www.flickr.com/help/terms/api Rate limit: 3600 requests per hour.</p>
</section>
<section id="flickr-thumbnails-removal">
<h3><code class="docutils literal notranslate"><span class="pre">flickr_thumbnails_removal</span></code><a class="headerlink" href="#flickr-thumbnails-removal" title="Link to this heading">#</a></h3>
<p>One-time run DAG to remove progressively all the old Flickr thumbnails, as they
were determined to be unsuitable for the Openverse UI requirements.</p>
</section>
<section id="flickr-workflow">
<h3><code class="docutils literal notranslate"><span class="pre">flickr_workflow</span></code><a class="headerlink" href="#flickr-workflow" title="Link to this heading">#</a></h3>
<p>Content Provider: Flickr</p>
<p>ETL Process: Use the API to identify all CC licensed images.</p>
<p>Output: TSV file containing the images and the respective meta-data.</p>
<p>Notes: https://www.flickr.com/help/terms/api Rate limit: 3600 requests per hour.</p>
</section>
<section id="freesound-workflow">
<h3><code class="docutils literal notranslate"><span class="pre">freesound_workflow</span></code><a class="headerlink" href="#freesound-workflow" title="Link to this heading">#</a></h3>
<p>Content Provider: Freesound</p>
<p>ETL Process: Use the API to identify all CC-licensed images.</p>
<p>Output: TSV file containing the image, the respective meta-data.</p>
<p>Notes: https://freesound.org/docs/api/ Rate limit: No limit for our API key.
This script can be run either to ingest the full dataset or as a dated DAG.</p>
</section>
<section id="image-data-refresh">
<h3><code class="docutils literal notranslate"><span class="pre">image_data_refresh</span></code><a class="headerlink" href="#image-data-refresh" title="Link to this heading">#</a></h3>
<section id="id7">
<h4>Data Refresh DAG Factory<a class="headerlink" href="#id7" title="Link to this heading">#</a></h4>
<p>This file generates our data refresh DAGs using a factory function. For the
given media type these DAGs will initiate a data refresh on the ingestion server
and await the success or failure of that task.</p>
<p>A data refresh occurs on the Ingestion server in the Openverse project. This is
a task which imports data from the upstream Catalog database into the API,
copies contents to a new Elasticsearch index, and finally makes the index
live. This process is necessary to make new content added to the Catalog by
our provider DAGs available to the API. You can read more in the
<a class="reference external" href="https://github.com/WordPress/openverse/blob/main/ingestion_server/README.md">README</a>
Importantly, the data refresh TaskGroup is also configured to handle concurrency
requirements of the Ingestion server. Finally, once the origin indexes have been
refreshed, the corresponding filtered index creation DAG is triggered.</p>
<p>You can find more background information on this process in the following issues
and related PRs:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/WordPress/openverse-catalog/issues/353">[Feature] Data refresh orchestration DAG</a></p></li>
<li><p><a class="reference external" href="https://github.com/WordPress/openverse-catalog/issues/453">[Feature] Merge popularity calculations and data refresh into a single DAG</a></p></li>
</ul>
</section>
</section>
<section id="image-popularity-refresh">
<h3><code class="docutils literal notranslate"><span class="pre">image_popularity_refresh</span></code><a class="headerlink" href="#image-popularity-refresh" title="Link to this heading">#</a></h3>
<section id="id8">
<h4>Popularity Refresh DAG Factory<a class="headerlink" href="#id8" title="Link to this heading">#</a></h4>
<p>This file generates our popularity refresh DAGs using a factory function.</p>
<p>For the given media type these DAGs will first update the popularity metrics
table, adding any new metrics and updating the percentile that is used in
calculating the popularity constants. It then refreshes the popularity constants
view, which recalculates the popularity constant for each provider.</p>
<p>Once the constants have been updated, the DAG will trigger a <code class="docutils literal notranslate"><span class="pre">batched_update</span></code>
DagRun for each provider of this media_type that is configured to support
popularity data. The batched update recalculates standardized popularity scores
for all records, using the new constant. When the updates are complete, all
records have up-to-date popularity data. This DAG can be run concurrently with
data refreshes and regular ingestion.</p>
<p>You can find more background information on this process in the following
implementation plan:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.openverse.org/projects/proposals/popularity_optimizations/20230420-implementation_plan_popularity_optimizations.html">[Implementation Plan] Decoupling Popularity Calculations from the Data Refresh</a></p></li>
</ul>
</section>
</section>
<section id="inaturalist-workflow">
<h3><code class="docutils literal notranslate"><span class="pre">inaturalist_workflow</span></code><a class="headerlink" href="#inaturalist-workflow" title="Link to this heading">#</a></h3>
<p>Provider: iNaturalist</p>
<p>Output: Records loaded to the image catalog table.</p>
<p>Notes: The iNaturalist API is not intended for data scraping.
https://api.inaturalist.org/v1/docs/ But there is a full dump intended for
sharing on S3.
https://github.com/inaturalist/inaturalist-open-data/tree/documentation/Metadata
Because these are very large normalized tables, as opposed to more document
oriented API responses, we found that bringing the data into postgres first was
the most effective approach. More detail in slack here:
https://wordpress.slack.com/archives/C02012JB00N/p1653145643080479?thread_ts=1653082292.714469&amp;cid=C02012JB00N
We use the table structure defined here,
https://github.com/inaturalist/inaturalist-open-data/blob/main/Metadata/structure.sql
except for adding ancestry tags to the taxa table.</p>
</section>
<section id="jamendo-workflow">
<h3><code class="docutils literal notranslate"><span class="pre">jamendo_workflow</span></code><a class="headerlink" href="#jamendo-workflow" title="Link to this heading">#</a></h3>
<p>Content Provider: Jamendo</p>
<p>ETL Process: Use the API to identify all CC-licensed audio.</p>
<p>Output: TSV file containing the audio meta-data.</p>
<p>Notes: https://api.jamendo.com/v3.0/tracks/ 35,000 requests per month for
non-commercial apps Jamendo Music has more than 500,000 tracks shared by 40,000
artists from over 150 countries all over the world. Audio quality: uploaded as
WAV/ FLAC/ AIFF bit depth: 16/24 sample rate: 44.1 or 48 kHz channels: 1/2</p>
</section>
<section id="justtakeitfree-workflow">
<h3><code class="docutils literal notranslate"><span class="pre">justtakeitfree_workflow</span></code><a class="headerlink" href="#justtakeitfree-workflow" title="Link to this heading">#</a></h3>
<p>Content Provider: Justtakeitfree</p>
<p>ETL Process: Use the API to identify all CC licensed media.</p>
<p>Output: TSV file containing the media and the respective meta-data.</p>
<p>Notes: https://justtakeitfree.com/api/api.php This API requires an API key. For
more details, see https://github.com/WordPress/openverse/pull/2793</p>
</section>
<section id="metropolitan-museum-reingestion-workflow">
<h3><code class="docutils literal notranslate"><span class="pre">metropolitan_museum_reingestion_workflow</span></code><a class="headerlink" href="#metropolitan-museum-reingestion-workflow" title="Link to this heading">#</a></h3>
<p>Content Provider: Metropolitan Museum of Art</p>
<p>ETL Process: Use the API to identify all CC0 artworks.</p>
<p>Output: TSV file containing the image, their respective meta-data.</p>
<p>Notes: https://metmuseum.github.io/#search Please limit requests to 80 requests
per second. May need to bump up the delay (e.g. to 3 seconds), to avoid of
blocking during local development testing.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>                    Some analysis to improve data quality was conducted using a
                    separate csv file here: https://github.com/metmuseum/openaccess

                    Get a list of object IDs:
                    https://collectionapi.metmuseum.org/public/collection/v1/objects?metadataDate=2022-08-10
                    Get a specific object:
                    https://collectionapi.metmuseum.org/public/collection/v1/objects/1027
                    The search functionality requires a specific query (term search)
                    in addition to date and public domain. It seems like it won&#39;t
                    connect with just date and license.
                    https://collectionapi.metmuseum.org/public/collection/v1/search?isPublicDomain=true&amp;metadataDate=2022-08-07
</pre></div>
</div>
</section>
<section id="metropolitan-museum-workflow">
<h3><code class="docutils literal notranslate"><span class="pre">metropolitan_museum_workflow</span></code><a class="headerlink" href="#metropolitan-museum-workflow" title="Link to this heading">#</a></h3>
<p>Content Provider: Metropolitan Museum of Art</p>
<p>ETL Process: Use the API to identify all CC0 artworks.</p>
<p>Output: TSV file containing the image, their respective meta-data.</p>
<p>Notes: https://metmuseum.github.io/#search Please limit requests to 80 requests
per second. May need to bump up the delay (e.g. to 3 seconds), to avoid of
blocking during local development testing.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>                    Some analysis to improve data quality was conducted using a
                    separate csv file here: https://github.com/metmuseum/openaccess

                    Get a list of object IDs:
                    https://collectionapi.metmuseum.org/public/collection/v1/objects?metadataDate=2022-08-10
                    Get a specific object:
                    https://collectionapi.metmuseum.org/public/collection/v1/objects/1027
                    The search functionality requires a specific query (term search)
                    in addition to date and public domain. It seems like it won&#39;t
                    connect with just date and license.
                    https://collectionapi.metmuseum.org/public/collection/v1/search?isPublicDomain=true&amp;metadataDate=2022-08-07
</pre></div>
</div>
</section>
<section id="nappy-workflow">
<h3><code class="docutils literal notranslate"><span class="pre">nappy_workflow</span></code><a class="headerlink" href="#nappy-workflow" title="Link to this heading">#</a></h3>
<p>Content Provider: Nappy</p>
<p>ETL Process: Use the API to identify all CC0-licensed images.</p>
<p>Output: TSV file containing the image meta-data.</p>
<p>Notes: This api was written specially for Openverse. There are no known limits
or restrictions. https://nappy.co/</p>
</section>
<section id="oauth2-authorization">
<h3><code class="docutils literal notranslate"><span class="pre">oauth2_authorization</span></code><a class="headerlink" href="#oauth2-authorization" title="Link to this heading">#</a></h3>
<section id="oauth-provider-authorization">
<h4>OAuth Provider Authorization<a class="headerlink" href="#oauth-provider-authorization" title="Link to this heading">#</a></h4>
<p>Iterates through all the OAuth2 providers and attempts to authorize them using
tokens found in the in the <code class="docutils literal notranslate"><span class="pre">OAUTH2_AUTH_KEYS</span></code> Variable. Once authorization has
been completed successfully, the auth token is removed from that Variable. The
authorization will create an access/refresh token pair in the
<code class="docutils literal notranslate"><span class="pre">OAUTH2_ACCESS_TOKENS</span></code> Variable.</p>
<p><strong>Current Providers</strong>:</p>
<ul class="simple">
<li><p>Freesound</p></li>
</ul>
</section>
</section>
<section id="oauth2-token-refresh">
<h3><code class="docutils literal notranslate"><span class="pre">oauth2_token_refresh</span></code><a class="headerlink" href="#oauth2-token-refresh" title="Link to this heading">#</a></h3>
<section id="oauth-provider-token-refresh">
<h4>OAuth Provider Token Refresh<a class="headerlink" href="#oauth-provider-token-refresh" title="Link to this heading">#</a></h4>
<p>Iterates through all OAuth2 providers and attempts to refresh the access token
using the refresh token stored in the <code class="docutils literal notranslate"><span class="pre">OAUTH2_ACCESS_TOKENS</span></code> Variable. This DAG
will update the tokens stored in the Variable upon successful refresh.</p>
<p><strong>Current Providers</strong>:</p>
<ul class="simple">
<li><p>Freesound</p></li>
</ul>
</section>
</section>
<section id="phylopic-reingestion-workflow">
<h3><code class="docutils literal notranslate"><span class="pre">phylopic_reingestion_workflow</span></code><a class="headerlink" href="#phylopic-reingestion-workflow" title="Link to this heading">#</a></h3>
<p>Content Provider: PhyloPic</p>
<p>ETL Process: Use the API to identify all CC licensed images.</p>
<p>Output: TSV file containing the image, their respective meta-data.</p>
<p>Notes: http://api-docs.phylopic.org/v2/ No rate limit specified.</p>
</section>
<section id="phylopic-workflow">
<h3><code class="docutils literal notranslate"><span class="pre">phylopic_workflow</span></code><a class="headerlink" href="#phylopic-workflow" title="Link to this heading">#</a></h3>
<p>Content Provider: PhyloPic</p>
<p>ETL Process: Use the API to identify all CC licensed images.</p>
<p>Output: TSV file containing the image, their respective meta-data.</p>
<p>Notes: http://api-docs.phylopic.org/v2/ No rate limit specified.</p>
</section>
<section id="pr-review-reminders">
<h3><code class="docutils literal notranslate"><span class="pre">pr_review_reminders</span></code><a class="headerlink" href="#pr-review-reminders" title="Link to this heading">#</a></h3>
<section id="id9">
<h4>PR Review Reminders<a class="headerlink" href="#id9" title="Link to this heading">#</a></h4>
<p>Iterates through open PRs in our repositories and pings assigned reviewers who
have not yet approved the PR or explicitly requested changes.</p>
<p>This DAG runs daily and pings on the following schedule based on priority label:</p>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>priority</p></th>
<th class="head"><p>days</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>critical</p></td>
<td><p>1 day</p></td>
</tr>
<tr class="row-odd"><td><p>high</p></td>
<td><p>&gt;2 days</p></td>
</tr>
<tr class="row-even"><td><p>medium</p></td>
<td><p>&gt;4 days</p></td>
</tr>
<tr class="row-odd"><td><p>low</p></td>
<td><p>&gt;7 days</p></td>
</tr>
</tbody>
</table>
</div>
<p>The DAG does not ping on Saturday and Sunday and accounts for weekend days when
determining how much time has passed since the review.</p>
<p>Unfortunately the DAG does not know when someone is on vacation. It is up to the
author of the PR to re-assign review if one of the randomly selected reviewers
is unavailable for the time period during which the PR should be reviewed.</p>
</section>
</section>
<section id="rawpixel-workflow">
<h3><code class="docutils literal notranslate"><span class="pre">rawpixel_workflow</span></code><a class="headerlink" href="#rawpixel-workflow" title="Link to this heading">#</a></h3>
<p>Content Provider: Rawpixel</p>
<p>ETL Process: Use the API to identify all CC-licensed images.</p>
<p>Output: TSV file containing the image meta-data.</p>
<p>Notes: Rawpixel has given Openverse beta access to their API. This API is
undocumented, and we will need to contact Rawpixel directly if we run into any
issues. The public API max results range is limited to 100,000 results, although
the API key weve been given can circumvent this limit.
https://www.rawpixel.com/api/v1/search?tags=$publicdomain&amp;page=1&amp;pagesize=100</p>
</section>
<section id="recreate-audio-popularity-calculation">
<h3><code class="docutils literal notranslate"><span class="pre">recreate_audio_popularity_calculation</span></code><a class="headerlink" href="#recreate-audio-popularity-calculation" title="Link to this heading">#</a></h3>
<p>This file generates Apache Airflow DAGs that, for the given media type,
completely wipes out and recreates the PostgreSQL functions involved in
calculating our standardized popularity metric.</p>
<p>Note that they do not drop any tables or views related to popularity, and they
do not perform any popularity calculations. Once this DAG has been run, the
associated popularity refresh DAG must be run in order to actually recalculate
popularity constants and standardized popularity scores using the new functions.</p>
<p>These DAGs are not on a schedule, and should only be run manually when new SQL
code is deployed for the calculation.</p>
</section>
<section id="recreate-full-staging-index">
<h3><code class="docutils literal notranslate"><span class="pre">recreate_full_staging_index</span></code><a class="headerlink" href="#recreate-full-staging-index" title="Link to this heading">#</a></h3>
<section id="recreate-full-staging-index-dag">
<h4>Recreate Full Staging Index DAG<a class="headerlink" href="#recreate-full-staging-index-dag" title="Link to this heading">#</a></h4>
<p>This DAG is used to fully recreate a new staging Elasticsearch index for a given
<code class="docutils literal notranslate"><span class="pre">media_type</span></code>, using records pulled from the staging API database. It is used to
decouple the steps of creating a new index from the rest of the data refresh
process.</p>
<p>Staging index creation is handled by the <em>staging</em> ingestion server. The DAG
triggers the ingestion server <code class="docutils literal notranslate"><span class="pre">REINDEX</span></code> action to create a new index in the
staging elasticsearch cluster for the given media type, suffixed by the current
timestamp. The DAG awaits the completion of the index creation and then points
the <code class="docutils literal notranslate"><span class="pre">&lt;media_type&gt;-full</span></code> alias to the newly created index.</p>
<p>Required Dagrun Configuration parameters:</p>
<ul class="simple">
<li><p>media_type: the media type for which to create a new index.</p></li>
</ul>
<p>Optional params:</p>
<ul class="simple">
<li><p>target_alias_override: Override the alias that is pointed to the new index. By
default this is <code class="docutils literal notranslate"><span class="pre">&lt;media_type&gt;-full</span></code>.</p></li>
<li><p>delete_old_index: Whether to delete the index previously pointed to by the
target alias, if applicable. Defaults to False.</p></li>
</ul>
<section id="id10">
<h5>When this DAG runs<a class="headerlink" href="#id10" title="Link to this heading">#</a></h5>
<p>This DAG is on a <code class="docutils literal notranslate"><span class="pre">None</span></code> schedule and is run manually.</p>
</section>
<section id="id11">
<h5>Race conditions<a class="headerlink" href="#id11" title="Link to this heading">#</a></h5>
<p>Because this DAG runs on the staging ingestion server and staging elasticsearch
cluster, it does <em>not</em> interfere with the <code class="docutils literal notranslate"><span class="pre">data_refresh</span></code> or
<code class="docutils literal notranslate"><span class="pre">create_filtered_index</span></code> DAGs.</p>
<p>However, the DAG will exit immediately if the <code class="docutils literal notranslate"><span class="pre">staging_database_restore</span></code> DAG is
running, as it operates on the staging API database.</p>
</section>
</section>
</section>
<section id="recreate-image-popularity-calculation">
<h3><code class="docutils literal notranslate"><span class="pre">recreate_image_popularity_calculation</span></code><a class="headerlink" href="#recreate-image-popularity-calculation" title="Link to this heading">#</a></h3>
<p>This file generates Apache Airflow DAGs that, for the given media type,
completely wipes out and recreates the PostgreSQL functions involved in
calculating our standardized popularity metric.</p>
<p>Note that they do not drop any tables or views related to popularity, and they
do not perform any popularity calculations. Once this DAG has been run, the
associated popularity refresh DAG must be run in order to actually recalculate
popularity constants and standardized popularity scores using the new functions.</p>
<p>These DAGs are not on a schedule, and should only be run manually when new SQL
code is deployed for the calculation.</p>
</section>
<section id="report-pending-reported-media">
<h3><code class="docutils literal notranslate"><span class="pre">report_pending_reported_media</span></code><a class="headerlink" href="#report-pending-reported-media" title="Link to this heading">#</a></h3>
<section id="report-pending-reported-media-dag">
<h4>Report Pending Reported Media DAG<a class="headerlink" href="#report-pending-reported-media-dag" title="Link to this heading">#</a></h4>
<p>This DAG checks for any user-reported media pending manual review, and alerts
via Slack.</p>
<p>Media may be reported for mature content or copyright infringement, for example.
Once reported, these require manual review through the Django Admin to determine
whether further action (such as deindexing the record) needs to be taken. If a
record has been reported multiple times, it only needs to be reviewed once and
so is only counted once in the reporting by this DAG.</p>
</section>
</section>
<section id="rotate-db-snapshots">
<h3><code class="docutils literal notranslate"><span class="pre">rotate_db_snapshots</span></code><a class="headerlink" href="#rotate-db-snapshots" title="Link to this heading">#</a></h3>
<p>Manages weekly database snapshots.</p>
<p>RDS does not support weekly snapshots schedules on its own, so we need a DAG to
manage this for us.</p>
<p>It runs on Saturdays at 00:00 UTC in order to happen before the data refresh.</p>
<p>The DAG will automatically delete the oldest snapshots when more snapshots exist
than it is configured to retain.</p>
<p>Requires two variables:</p>
<p><code class="docutils literal notranslate"><span class="pre">CATALOG_RDS_DB_IDENTIFIER</span></code>: The DBIdentifier of the RDS DB instance.
<code class="docutils literal notranslate"><span class="pre">CATALOG_RDS_SNAPSHOTS_TO_RETAIN</span></code>: How many historical snapshots to retain.</p>
</section>
<section id="science-museum-workflow">
<h3><code class="docutils literal notranslate"><span class="pre">science_museum_workflow</span></code><a class="headerlink" href="#science-museum-workflow" title="Link to this heading">#</a></h3>
<p>Content Provider: Science Museum</p>
<p>ETL Process: Use the API to identify all CC-licensed images.</p>
<p>Output: TSV file containing the image, the respective meta-data.</p>
<p>Notes:
https://github.com/TheScienceMuseum/collectionsonline/wiki/Collections-Online-API
Rate limited, no specific rate given.</p>
</section>
<section id="smithsonian-workflow">
<h3><code class="docutils literal notranslate"><span class="pre">smithsonian_workflow</span></code><a class="headerlink" href="#smithsonian-workflow" title="Link to this heading">#</a></h3>
<p>Content Provider: Smithsonian</p>
<p>ETL Process: Use the API to identify all CC licensed images.</p>
<p>Output: TSV file containing the images and the respective meta-data.</p>
<p>Notes: https://api.si.edu/openaccess/api/v1.0/search</p>
</section>
<section id="smk-workflow">
<h3><code class="docutils literal notranslate"><span class="pre">smk_workflow</span></code><a class="headerlink" href="#smk-workflow" title="Link to this heading">#</a></h3>
<p>Content Provider: Statens Museum for Kunst (National Gallery of Denmark)</p>
<p>ETL Process: Use the API to identify all openly licensed media.</p>
<p>Output: TSV file containing the media metadata.</p>
<p>Notes: https://www.smk.dk/en/article/smk-api/</p>
</section>
<section id="staging-database-restore">
<h3><code class="docutils literal notranslate"><span class="pre">staging_database_restore</span></code><a class="headerlink" href="#staging-database-restore" title="Link to this heading">#</a></h3>
<section id="update-the-staging-database">
<h4>Update the staging database<a class="headerlink" href="#update-the-staging-database" title="Link to this heading">#</a></h4>
<p>This DAG is responsible for updating the staging database using the most recent
snapshot of the production database.</p>
<p>For a full explanation of the DAG, see the implementation plan description:
https://docs.openverse.org/projects/proposals/search_relevancy_sandbox/20230406-implementation_plan_update_staging_database.html#dag</p>
<p>This DAG can be skipped by setting the <code class="docutils literal notranslate"><span class="pre">SKIP_STAGING_DATABASE_RESTORE</span></code> Airflow
Variable to <code class="docutils literal notranslate"><span class="pre">true</span></code>. To change this variable, navigate to Admin &gt; Variables in
the Airflow UI, then click the edit button next to the variable and set the
value to either <code class="docutils literal notranslate"><span class="pre">true</span></code> or <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
<p>This DAG will default to using the standard AWS connection ID for the RDS
operations. For local testing, you can set up two environment variables to have
the RDS operations run using a different hook:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">AWS_RDS_CONN_ID</span></code>: The Airflow connection ID to use for RDS operations (e.g.
<code class="docutils literal notranslate"><span class="pre">aws_rds</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">AIRFLOW_CONN_&lt;ID&gt;</span></code>: The connection string to use for RDS operations (per the
above example, it might be <code class="docutils literal notranslate"><span class="pre">AIRFLOW_CONN_AWS_RDS</span></code>)</p></li>
</ul>
</section>
</section>
<section id="stocksnap-workflow">
<h3><code class="docutils literal notranslate"><span class="pre">stocksnap_workflow</span></code><a class="headerlink" href="#stocksnap-workflow" title="Link to this heading">#</a></h3>
<p>Content Provider: StockSnap</p>
<p>ETL Process: Use the API to identify all CC-licensed images.</p>
<p>Output: TSV file containing the image, the respective meta-data.</p>
<p>Notes: https://stocksnap.io/api/load-photos/date/desc/1 https://stocksnap.io/faq
All images are licensed under CC0. No rate limits or authorization required. API
is undocumented.</p>
</section>
<section id="wikimedia-commons-workflow">
<h3><code class="docutils literal notranslate"><span class="pre">wikimedia_commons_workflow</span></code><a class="headerlink" href="#wikimedia-commons-workflow" title="Link to this heading">#</a></h3>
<p><strong>Content Provider:</strong> Wikimedia Commons</p>
<p><strong>ETL Process:</strong> Use the API to identify all CC-licensed images.</p>
<p><strong>Output:</strong> TSV file containing the image, the respective meta-data.</p>
<section id="notes">
<h4>Notes<a class="headerlink" href="#notes" title="Link to this heading">#</a></h4>
<p>Rate limit of no more than 200 requests/second, and we are required to set a
unique User-Agent field
(<a class="reference external" href="https://www.mediawiki.org/wiki/Wikimedia_REST_API#Terms_and_conditions">docs</a>).</p>
<p>Wikimedia Commons uses an implementation of the
<a class="reference external" href="https://www.mediawiki.org/wiki/API:Main_page">MediaWiki API</a>. This API is
incredibly complex in the level of configuration you can provide when querying,
and as such it can also be quite abstruse. The most straightforward docs can be
found on the
<a class="reference external" href="https://commons.wikimedia.org/w/api.php?action=help&amp;amp;modules=query">Wikimedia website directly</a>,
as these show all the parameters available. Specifications on queries can also
be found on the <a class="reference external" href="https://www.mediawiki.org/wiki/API:Query">query page</a>.</p>
<p>Different kinds of queries can be made against the API using modules, we use
the <a class="reference external" href="https://www.mediawiki.org/wiki/API:Allimages">allimages module</a>, which lets
us search for images in a given time range (see <code class="docutils literal notranslate"><span class="pre">&quot;generator&quot;:</span> <span class="pre">&quot;allimages&quot;</span></code> in
the query params).</p>
<p>Many queries will return results in batches, with the API supplying a continue
token. This token is used on subsequent calls to tell the API where to start the
next set of results from; it functions as a page offset
(<a class="reference external" href="https://www.mediawiki.org/wiki/API:Query#Continuing_queries">docs</a>).</p>
<p>We can also specify what kinds of information we want for the query. Wikimedia
has a massive amount of data on it, so it only returns what we ask for. The
fields that are returned are defined by the
<a class="reference external" href="https://www.mediawiki.org/wiki/API:Properties">properties</a> or props
parameter. Sub-properties can also be defined, with the parameter name of the
sub-property determined by an abbreviation of the higher-level property. For
instance, if our property is imageinfo and we want to set sub-property values,
we would define those in iiprops.</p>
<p>The data within a property is paginated as well, Wikimedia will handle iteration
through the property sub-pages using the continue token
(<a class="reference external" href="https://www.mediawiki.org/wiki/API:Properties#Additional_notes">see here for more details</a>).</p>
<p>Depending on the kind of property data thats being returned, its possible for
the API to iterate extensively on a specific media item. What Wikimedia is
iterating over in these cases can be gleaned from the continue token. Those
tokens take the form of, as I understand it,
<primary-iterator>||<next-iteration-prop>, paired with an <XX>continue value
for the property being iterated over. For example, if were were iterating over
a set of image properties, the token might look like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;iicontinue&quot;</span><span class="p">:</span> <span class="s2">&quot;The_Railway_Chronicle_1844.pdf|20221209222801&quot;</span><span class="p">,</span>
    <span class="s2">&quot;gaicontinue&quot;</span><span class="p">:</span> <span class="s2">&quot;20221209222614|NTUL-0527100_.pdf&quot;</span><span class="p">,</span>
    <span class="s2">&quot;continue&quot;</span><span class="p">:</span> <span class="s2">&quot;gaicontinue||globalusage&quot;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In this case, were iterating over the global all images generator
(gaicontinue) as our primary iterator, with the image properties (iicontinue)
as the secondary continue iterator. The globalusage property would be the next
property to iterate over. Its also possible for multiple sub-properties to be
iterated over simultaneously, in which case the continue token would not have
a secondary value (e.g. <code class="docutils literal notranslate"><span class="pre">gaicontinue||</span></code>).</p>
<p>In most runs, the continue key will be <code class="docutils literal notranslate"><span class="pre">gaicontinue||</span></code> after the first
request, which means that we have more than one batch to iterate over for the
primary iterator. Some days will have fewer images than the batch limit but
still have multiple batches of content on the secondary iterator, which means
the continue key may not have a primary iteration component (e.g.
<code class="docutils literal notranslate"><span class="pre">||globalusage</span></code>). This token can also be seen when the first request has more
data in the secondary iterator, before weve processed any data on the primary
iterator.</p>
<p>Occasionally, the ingester will come across a piece of media that has many
results for the property its iterating over. An example of this can include an
item being on many pages, this it would have many global usage results. In
order to process the entire batch, we have to iterate over <em>all</em> of the returned
results; Wikimedia does not provide a mechanism to skip to the end of a batch.
On numerous occasions, this iteration has been so extensive that the pull media
task has hit the tasks timeout. To avoid this, we limit the number of
iterations we make for parsing through a sub-propertys data. If we hit the
limit, we re-issue the original query <em>without</em> requesting properties that
returned large amounts of data. Unfortunately, this means that we will <strong>not</strong>
have that propertys data for these items the second time around (e.g.
popularity data if we needed to skip global usage). In the case of popularity,
especially since the problem with these images is that theyre so popular, we
want to preserve that information where possible! So we cache the popularity
data from previous iterations and use it in subsequent ones if we come across
the same item again.</p>
<p>Below are some specific references to various properties, with examples for
cases where they might exceed the limit. Technically, its feasible for almost
any property to exceed the limit, but these are the ones that weve seen in
practice.</p>
<section id="imageinfo">
<h5><code class="docutils literal notranslate"><span class="pre">imageinfo</span></code><a class="headerlink" href="#imageinfo" title="Link to this heading">#</a></h5>
<p><a class="reference external" href="https://commons.wikimedia.org/w/api.php?action=help&amp;amp;modules=query%2Bimageinfo">Docs</a></p>
<p><a class="reference external" href="https://commons.wikimedia.org/wiki/File:The_Railway_Chronicle_1844.pdf#metadata">Example where metadata has hundreds of data points</a>
(see Metadata table, which may need to be expanded).</p>
<p>For these requests, we can remove the <code class="docutils literal notranslate"><span class="pre">metadata</span></code> property from the <code class="docutils literal notranslate"><span class="pre">iiprops</span></code>
parameter to avoid this issue on subsequent iterations.</p>
</section>
<section id="globalusage">
<h5><code class="docutils literal notranslate"><span class="pre">globalusage</span></code><a class="headerlink" href="#globalusage" title="Link to this heading">#</a></h5>
<p><a class="reference external" href="https://commons.wikimedia.org/w/api.php?action=help&amp;amp;modules=query%2Bglobalusage">Docs</a></p>
<p><a class="reference external" href="https://commons.wikimedia.org/w/index.php?curid=4298234">Example where an image is used on almost every wiki</a>.</p>
<p>For these requests, we can remove the <code class="docutils literal notranslate"><span class="pre">globalusage</span></code> property from the <code class="docutils literal notranslate"><span class="pre">prop</span></code>
parameter entirely and eschew the popularity data for these items.</p>
</section>
</section>
</section>
<section id="wikimedia-reingestion-workflow">
<h3><code class="docutils literal notranslate"><span class="pre">wikimedia_reingestion_workflow</span></code><a class="headerlink" href="#wikimedia-reingestion-workflow" title="Link to this heading">#</a></h3>
<p><strong>Content Provider:</strong> Wikimedia Commons</p>
<p><strong>ETL Process:</strong> Use the API to identify all CC-licensed images.</p>
<p><strong>Output:</strong> TSV file containing the image, the respective meta-data.</p>
<section id="id12">
<h4>Notes<a class="headerlink" href="#id12" title="Link to this heading">#</a></h4>
<p>Rate limit of no more than 200 requests/second, and we are required to set a
unique User-Agent field
(<a class="reference external" href="https://www.mediawiki.org/wiki/Wikimedia_REST_API#Terms_and_conditions">docs</a>).</p>
<p>Wikimedia Commons uses an implementation of the
<a class="reference external" href="https://www.mediawiki.org/wiki/API:Main_page">MediaWiki API</a>. This API is
incredibly complex in the level of configuration you can provide when querying,
and as such it can also be quite abstruse. The most straightforward docs can be
found on the
<a class="reference external" href="https://commons.wikimedia.org/w/api.php?action=help&amp;amp;modules=query">Wikimedia website directly</a>,
as these show all the parameters available. Specifications on queries can also
be found on the <a class="reference external" href="https://www.mediawiki.org/wiki/API:Query">query page</a>.</p>
<p>Different kinds of queries can be made against the API using modules, we use
the <a class="reference external" href="https://www.mediawiki.org/wiki/API:Allimages">allimages module</a>, which lets
us search for images in a given time range (see <code class="docutils literal notranslate"><span class="pre">&quot;generator&quot;:</span> <span class="pre">&quot;allimages&quot;</span></code> in
the query params).</p>
<p>Many queries will return results in batches, with the API supplying a continue
token. This token is used on subsequent calls to tell the API where to start the
next set of results from; it functions as a page offset
(<a class="reference external" href="https://www.mediawiki.org/wiki/API:Query#Continuing_queries">docs</a>).</p>
<p>We can also specify what kinds of information we want for the query. Wikimedia
has a massive amount of data on it, so it only returns what we ask for. The
fields that are returned are defined by the
<a class="reference external" href="https://www.mediawiki.org/wiki/API:Properties">properties</a> or props
parameter. Sub-properties can also be defined, with the parameter name of the
sub-property determined by an abbreviation of the higher-level property. For
instance, if our property is imageinfo and we want to set sub-property values,
we would define those in iiprops.</p>
<p>The data within a property is paginated as well, Wikimedia will handle iteration
through the property sub-pages using the continue token
(<a class="reference external" href="https://www.mediawiki.org/wiki/API:Properties#Additional_notes">see here for more details</a>).</p>
<p>Depending on the kind of property data thats being returned, its possible for
the API to iterate extensively on a specific media item. What Wikimedia is
iterating over in these cases can be gleaned from the continue token. Those
tokens take the form of, as I understand it,
<primary-iterator>||<next-iteration-prop>, paired with an <XX>continue value
for the property being iterated over. For example, if were were iterating over
a set of image properties, the token might look like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;iicontinue&quot;</span><span class="p">:</span> <span class="s2">&quot;The_Railway_Chronicle_1844.pdf|20221209222801&quot;</span><span class="p">,</span>
    <span class="s2">&quot;gaicontinue&quot;</span><span class="p">:</span> <span class="s2">&quot;20221209222614|NTUL-0527100_.pdf&quot;</span><span class="p">,</span>
    <span class="s2">&quot;continue&quot;</span><span class="p">:</span> <span class="s2">&quot;gaicontinue||globalusage&quot;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In this case, were iterating over the global all images generator
(gaicontinue) as our primary iterator, with the image properties (iicontinue)
as the secondary continue iterator. The globalusage property would be the next
property to iterate over. Its also possible for multiple sub-properties to be
iterated over simultaneously, in which case the continue token would not have
a secondary value (e.g. <code class="docutils literal notranslate"><span class="pre">gaicontinue||</span></code>).</p>
<p>In most runs, the continue key will be <code class="docutils literal notranslate"><span class="pre">gaicontinue||</span></code> after the first
request, which means that we have more than one batch to iterate over for the
primary iterator. Some days will have fewer images than the batch limit but
still have multiple batches of content on the secondary iterator, which means
the continue key may not have a primary iteration component (e.g.
<code class="docutils literal notranslate"><span class="pre">||globalusage</span></code>). This token can also be seen when the first request has more
data in the secondary iterator, before weve processed any data on the primary
iterator.</p>
<p>Occasionally, the ingester will come across a piece of media that has many
results for the property its iterating over. An example of this can include an
item being on many pages, this it would have many global usage results. In
order to process the entire batch, we have to iterate over <em>all</em> of the returned
results; Wikimedia does not provide a mechanism to skip to the end of a batch.
On numerous occasions, this iteration has been so extensive that the pull media
task has hit the tasks timeout. To avoid this, we limit the number of
iterations we make for parsing through a sub-propertys data. If we hit the
limit, we re-issue the original query <em>without</em> requesting properties that
returned large amounts of data. Unfortunately, this means that we will <strong>not</strong>
have that propertys data for these items the second time around (e.g.
popularity data if we needed to skip global usage). In the case of popularity,
especially since the problem with these images is that theyre so popular, we
want to preserve that information where possible! So we cache the popularity
data from previous iterations and use it in subsequent ones if we come across
the same item again.</p>
<p>Below are some specific references to various properties, with examples for
cases where they might exceed the limit. Technically, its feasible for almost
any property to exceed the limit, but these are the ones that weve seen in
practice.</p>
<section id="id13">
<h5><code class="docutils literal notranslate"><span class="pre">imageinfo</span></code><a class="headerlink" href="#id13" title="Link to this heading">#</a></h5>
<p><a class="reference external" href="https://commons.wikimedia.org/w/api.php?action=help&amp;amp;modules=query%2Bimageinfo">Docs</a></p>
<p><a class="reference external" href="https://commons.wikimedia.org/wiki/File:The_Railway_Chronicle_1844.pdf#metadata">Example where metadata has hundreds of data points</a>
(see Metadata table, which may need to be expanded).</p>
<p>For these requests, we can remove the <code class="docutils literal notranslate"><span class="pre">metadata</span></code> property from the <code class="docutils literal notranslate"><span class="pre">iiprops</span></code>
parameter to avoid this issue on subsequent iterations.</p>
</section>
<section id="id14">
<h5><code class="docutils literal notranslate"><span class="pre">globalusage</span></code><a class="headerlink" href="#id14" title="Link to this heading">#</a></h5>
<p><a class="reference external" href="https://commons.wikimedia.org/w/api.php?action=help&amp;amp;modules=query%2Bglobalusage">Docs</a></p>
<p><a class="reference external" href="https://commons.wikimedia.org/w/index.php?curid=4298234">Example where an image is used on almost every wiki</a>.</p>
<p>For these requests, we can remove the <code class="docutils literal notranslate"><span class="pre">globalusage</span></code> property from the <code class="docutils literal notranslate"><span class="pre">prop</span></code>
parameter entirely and eschew the popularity data for these items.</p>
</section>
</section>
</section>
<section id="wordpress-workflow">
<h3><code class="docutils literal notranslate"><span class="pre">wordpress_workflow</span></code><a class="headerlink" href="#wordpress-workflow" title="Link to this heading">#</a></h3>
<p>Content Provider: WordPress Photo Directory</p>
<p>ETL Process: Use the API to identify all openly licensed media.</p>
<p>Output: TSV file containing the media metadata.</p>
<p>Notes: https://wordpress.org/photos/wp-json/wp/v2 Provide photos, media, users
and more related resources. No rate limit specified.</p>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="retired.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Retired</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="index.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Reference</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              <a class="muted-link " href="https://github.com/WordPress/openverse" aria-label="GitHub"><svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a>
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">DAGs</a><ul>
<li><a class="reference internal" href="#dags-by-type">DAGs by Type</a><ul>
<li><a class="reference internal" href="#data-normalization">Data Normalization</a></li>
<li><a class="reference internal" href="#data-refresh">Data Refresh</a></li>
<li><a class="reference internal" href="#database">Database</a></li>
<li><a class="reference internal" href="#elasticsearch">Elasticsearch</a></li>
<li><a class="reference internal" href="#maintenance">Maintenance</a></li>
<li><a class="reference internal" href="#oauth">Oauth</a></li>
<li><a class="reference internal" href="#other">Other</a></li>
<li><a class="reference internal" href="#popularity-refresh">Popularity Refresh</a></li>
<li><a class="reference internal" href="#provider">Provider</a></li>
<li><a class="reference internal" href="#provider-reingestion">Provider Reingestion</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dag-documentation">DAG documentation</a><ul>
<li><a class="reference internal" href="#add-license-url"><code class="docutils literal notranslate"><span class="pre">add_license_url</span></code></a><ul>
<li><a class="reference internal" href="#id1">Add license URL</a></li>
</ul>
</li>
<li><a class="reference internal" href="#airflow-log-cleanup"><code class="docutils literal notranslate"><span class="pre">airflow_log_cleanup</span></code></a><ul>
<li><a class="reference internal" href="#clean-up-airflow-logs">Clean up airflow logs</a></li>
</ul>
</li>
<li><a class="reference internal" href="#auckland-museum-workflow"><code class="docutils literal notranslate"><span class="pre">auckland_museum_workflow</span></code></a></li>
<li><a class="reference internal" href="#audio-data-refresh"><code class="docutils literal notranslate"><span class="pre">audio_data_refresh</span></code></a><ul>
<li><a class="reference internal" href="#data-refresh-dag-factory">Data Refresh DAG Factory</a></li>
</ul>
</li>
<li><a class="reference internal" href="#audio-popularity-refresh"><code class="docutils literal notranslate"><span class="pre">audio_popularity_refresh</span></code></a><ul>
<li><a class="reference internal" href="#popularity-refresh-dag-factory">Popularity Refresh DAG Factory</a></li>
</ul>
</li>
<li><a class="reference internal" href="#batched-update"><code class="docutils literal notranslate"><span class="pre">batched_update</span></code></a></li>
<li><a class="reference internal" href="#cc-mixter-workflow"><code class="docutils literal notranslate"><span class="pre">cc_mixter_workflow</span></code></a></li>
<li><a class="reference internal" href="#check-silenced-dags"><code class="docutils literal notranslate"><span class="pre">check_silenced_dags</span></code></a><ul>
<li><a class="reference internal" href="#silenced-dags-check">Silenced DAGs check</a></li>
</ul>
</li>
<li><a class="reference internal" href="#create-filtered-audio-index"><code class="docutils literal notranslate"><span class="pre">create_filtered_audio_index</span></code></a><ul>
<li><a class="reference internal" href="#create-filtered-index-dag-factory">Create filtered index DAG factory</a><ul>
<li><a class="reference internal" href="#when-this-dag-runs">When this DAG runs</a></li>
<li><a class="reference internal" href="#race-conditions">Race conditions</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#create-filtered-image-index"><code class="docutils literal notranslate"><span class="pre">create_filtered_image_index</span></code></a><ul>
<li><a class="reference internal" href="#id2">Create filtered index DAG factory</a><ul>
<li><a class="reference internal" href="#id3">When this DAG runs</a></li>
<li><a class="reference internal" href="#id4">Race conditions</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#create-new-production-es-index"><code class="docutils literal notranslate"><span class="pre">create_new_production_es_index</span></code></a><ul>
<li><a class="reference internal" href="#create-new-es-index-dag">Create New ES Index DAG</a><ul>
<li><a class="reference internal" href="#merging-policy">Merging policy</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#create-new-staging-es-index"><code class="docutils literal notranslate"><span class="pre">create_new_staging_es_index</span></code></a><ul>
<li><a class="reference internal" href="#id5">Create New ES Index DAG</a><ul>
<li><a class="reference internal" href="#id6">Merging policy</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#delete-records"><code class="docutils literal notranslate"><span class="pre">delete_records</span></code></a><ul>
<li><a class="reference internal" href="#delete-records-dag">Delete Records DAG</a><ul>
<li><a class="reference internal" href="#multiple-deletions">Multiple deletions</a></li>
<li><a class="reference internal" href="#warnings">Warnings</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#europeana-workflow"><code class="docutils literal notranslate"><span class="pre">europeana_workflow</span></code></a></li>
<li><a class="reference internal" href="#finnish-museums-workflow"><code class="docutils literal notranslate"><span class="pre">finnish_museums_workflow</span></code></a></li>
<li><a class="reference internal" href="#flickr-audit-sub-provider-workflow"><code class="docutils literal notranslate"><span class="pre">flickr_audit_sub_provider_workflow</span></code></a><ul>
<li><a class="reference internal" href="#flickr-sub-provider-audit">Flickr Sub Provider Audit</a></li>
</ul>
</li>
<li><a class="reference internal" href="#flickr-reingestion-workflow"><code class="docutils literal notranslate"><span class="pre">flickr_reingestion_workflow</span></code></a></li>
<li><a class="reference internal" href="#flickr-thumbnails-removal"><code class="docutils literal notranslate"><span class="pre">flickr_thumbnails_removal</span></code></a></li>
<li><a class="reference internal" href="#flickr-workflow"><code class="docutils literal notranslate"><span class="pre">flickr_workflow</span></code></a></li>
<li><a class="reference internal" href="#freesound-workflow"><code class="docutils literal notranslate"><span class="pre">freesound_workflow</span></code></a></li>
<li><a class="reference internal" href="#image-data-refresh"><code class="docutils literal notranslate"><span class="pre">image_data_refresh</span></code></a><ul>
<li><a class="reference internal" href="#id7">Data Refresh DAG Factory</a></li>
</ul>
</li>
<li><a class="reference internal" href="#image-popularity-refresh"><code class="docutils literal notranslate"><span class="pre">image_popularity_refresh</span></code></a><ul>
<li><a class="reference internal" href="#id8">Popularity Refresh DAG Factory</a></li>
</ul>
</li>
<li><a class="reference internal" href="#inaturalist-workflow"><code class="docutils literal notranslate"><span class="pre">inaturalist_workflow</span></code></a></li>
<li><a class="reference internal" href="#jamendo-workflow"><code class="docutils literal notranslate"><span class="pre">jamendo_workflow</span></code></a></li>
<li><a class="reference internal" href="#justtakeitfree-workflow"><code class="docutils literal notranslate"><span class="pre">justtakeitfree_workflow</span></code></a></li>
<li><a class="reference internal" href="#metropolitan-museum-reingestion-workflow"><code class="docutils literal notranslate"><span class="pre">metropolitan_museum_reingestion_workflow</span></code></a></li>
<li><a class="reference internal" href="#metropolitan-museum-workflow"><code class="docutils literal notranslate"><span class="pre">metropolitan_museum_workflow</span></code></a></li>
<li><a class="reference internal" href="#nappy-workflow"><code class="docutils literal notranslate"><span class="pre">nappy_workflow</span></code></a></li>
<li><a class="reference internal" href="#oauth2-authorization"><code class="docutils literal notranslate"><span class="pre">oauth2_authorization</span></code></a><ul>
<li><a class="reference internal" href="#oauth-provider-authorization">OAuth Provider Authorization</a></li>
</ul>
</li>
<li><a class="reference internal" href="#oauth2-token-refresh"><code class="docutils literal notranslate"><span class="pre">oauth2_token_refresh</span></code></a><ul>
<li><a class="reference internal" href="#oauth-provider-token-refresh">OAuth Provider Token Refresh</a></li>
</ul>
</li>
<li><a class="reference internal" href="#phylopic-reingestion-workflow"><code class="docutils literal notranslate"><span class="pre">phylopic_reingestion_workflow</span></code></a></li>
<li><a class="reference internal" href="#phylopic-workflow"><code class="docutils literal notranslate"><span class="pre">phylopic_workflow</span></code></a></li>
<li><a class="reference internal" href="#pr-review-reminders"><code class="docutils literal notranslate"><span class="pre">pr_review_reminders</span></code></a><ul>
<li><a class="reference internal" href="#id9">PR Review Reminders</a></li>
</ul>
</li>
<li><a class="reference internal" href="#rawpixel-workflow"><code class="docutils literal notranslate"><span class="pre">rawpixel_workflow</span></code></a></li>
<li><a class="reference internal" href="#recreate-audio-popularity-calculation"><code class="docutils literal notranslate"><span class="pre">recreate_audio_popularity_calculation</span></code></a></li>
<li><a class="reference internal" href="#recreate-full-staging-index"><code class="docutils literal notranslate"><span class="pre">recreate_full_staging_index</span></code></a><ul>
<li><a class="reference internal" href="#recreate-full-staging-index-dag">Recreate Full Staging Index DAG</a><ul>
<li><a class="reference internal" href="#id10">When this DAG runs</a></li>
<li><a class="reference internal" href="#id11">Race conditions</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#recreate-image-popularity-calculation"><code class="docutils literal notranslate"><span class="pre">recreate_image_popularity_calculation</span></code></a></li>
<li><a class="reference internal" href="#report-pending-reported-media"><code class="docutils literal notranslate"><span class="pre">report_pending_reported_media</span></code></a><ul>
<li><a class="reference internal" href="#report-pending-reported-media-dag">Report Pending Reported Media DAG</a></li>
</ul>
</li>
<li><a class="reference internal" href="#rotate-db-snapshots"><code class="docutils literal notranslate"><span class="pre">rotate_db_snapshots</span></code></a></li>
<li><a class="reference internal" href="#science-museum-workflow"><code class="docutils literal notranslate"><span class="pre">science_museum_workflow</span></code></a></li>
<li><a class="reference internal" href="#smithsonian-workflow"><code class="docutils literal notranslate"><span class="pre">smithsonian_workflow</span></code></a></li>
<li><a class="reference internal" href="#smk-workflow"><code class="docutils literal notranslate"><span class="pre">smk_workflow</span></code></a></li>
<li><a class="reference internal" href="#staging-database-restore"><code class="docutils literal notranslate"><span class="pre">staging_database_restore</span></code></a><ul>
<li><a class="reference internal" href="#update-the-staging-database">Update the staging database</a></li>
</ul>
</li>
<li><a class="reference internal" href="#stocksnap-workflow"><code class="docutils literal notranslate"><span class="pre">stocksnap_workflow</span></code></a></li>
<li><a class="reference internal" href="#wikimedia-commons-workflow"><code class="docutils literal notranslate"><span class="pre">wikimedia_commons_workflow</span></code></a><ul>
<li><a class="reference internal" href="#notes">Notes</a><ul>
<li><a class="reference internal" href="#imageinfo"><code class="docutils literal notranslate"><span class="pre">imageinfo</span></code></a></li>
<li><a class="reference internal" href="#globalusage"><code class="docutils literal notranslate"><span class="pre">globalusage</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#wikimedia-reingestion-workflow"><code class="docutils literal notranslate"><span class="pre">wikimedia_reingestion_workflow</span></code></a><ul>
<li><a class="reference internal" href="#id12">Notes</a><ul>
<li><a class="reference internal" href="#id13"><code class="docutils literal notranslate"><span class="pre">imageinfo</span></code></a></li>
<li><a class="reference internal" href="#id14"><code class="docutils literal notranslate"><span class="pre">globalusage</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#wordpress-workflow"><code class="docutils literal notranslate"><span class="pre">wordpress_workflow</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/scripts/furo.js?v=32e29ea5"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    </body>
</html>