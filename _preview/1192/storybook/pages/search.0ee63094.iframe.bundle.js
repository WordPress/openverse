(window.webpackJsonp=window.webpackJsonp||[]).push([[194,21],{"./src/components/VScrollButton.vue":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var vue=__webpack_require__("../node_modules/.pnpm/vue@2.7.14/node_modules/vue/dist/vue.js"),emits=__webpack_require__("./src/types/emits.ts"),components_VScrollButtonvue_type_script_lang_ts_=Object(vue.defineComponent)({name:"VScrollButton",props:{isFilterSidebarVisible:{type:Boolean,default:!0}},emits:{tab:Object(emits.a)()},setup:function setup(props){return{hClass:Object(vue.computed)((function(){return props.isFilterSidebarVisible?"ltr:right-[21rem] rtl:left-[21rem]":"ltr:right-4 rtl:left-4"})),scrollToTop:function scrollToTop(){window.scrollTo({top:0,left:0,behavior:"smooth"})}}}}),componentNormalizer=__webpack_require__("../node_modules/.pnpm/vue-loader@15.10.0_uhs2gfg5l6piymj36axgkhxosy/node_modules/vue-loader/lib/runtime/componentNormalizer.js");const __vuedocgen_export_0=Object(componentNormalizer.a)(components_VScrollButtonvue_type_script_lang_ts_,(function render(){var _vm=this,_c=_vm._self._c;_vm._self._setupProxy;return _c("button",{staticClass:"scroll sticky bottom-4 mb-4 ms-auto h-14 w-14 rounded-full bg-pink text-center text-white transition-all duration-100 ease-linear hover:bg-dark-pink hover:shadow-md",class:_vm.hClass,attrs:{"aria-label":_vm.$t("browse-page.aria.scroll"),type:"button"},on:{click:_vm.scrollToTop,keydown:function keydown($event){return!$event.type.indexOf("key")&&_vm._k($event.keyCode,"tab",9,$event.key,"Tab")||$event.ctrlKey||$event.shiftKey||$event.altKey||$event.metaKey?null:_vm.$emit("tab",$event)}}},[_c("svg",{staticClass:"h-full w-full fill-curr",attrs:{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false"}},[_c("path",{attrs:{d:"M6.5 12.4L12 8l5.5 4.4-.9 1.2L12 10l-4.5 3.6-1-1.2z"}})])])}),[],!1,null,null,null).exports;__webpack_exports__.default=__vuedocgen_export_0;__vuedocgen_export_0.__docgenInfo={displayName:"VScrollButton",exportName:"default",description:"",tags:{},props:[{name:"isFilterSidebarVisible",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}}],events:[{name:"tab"}]}},"./src/pages/search.vue":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var asyncToGenerator=__webpack_require__("../node_modules/.pnpm/@babel+runtime@7.18.9/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");__webpack_require__("../node_modules/.pnpm/regenerator-runtime@0.13.11/node_modules/regenerator-runtime/runtime.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.27.2/node_modules/core-js/modules/es.string.trim.js");function isShallowEqualObjects(a,b){if(a===b)return!0;const aKeys=Object.keys(a),bKeys=Object.keys(b);if(aKeys.length!==bKeys.length)return!1;let i=0;for(;i<aKeys.length;){const key=aKeys[i],aValue=a[key];if(void 0===aValue&&!b.hasOwnProperty(key)||aValue!==b[key])return!1;i++}return!0}var vue=__webpack_require__("../node_modules/.pnpm/vue@2.7.14/node_modules/vue/dist/vue.js"),dist_runtime=__webpack_require__("../node_modules/.pnpm/@nuxtjs+composition-api@0.33.1_vy7xpffix5pmcjc7tpwmoxm2hq/node_modules/@nuxtjs/composition-api/dist/runtime/index.mjs"),media=__webpack_require__("./src/stores/media/index.ts"),search=__webpack_require__("./src/stores/search.ts"),provides=__webpack_require__("./src/types/provides.ts"),VSearchGrid=__webpack_require__("./src/components/VSearchGrid.vue"),VSkipToContentContainer=__webpack_require__("./src/components/VSkipToContentContainer.vue"),VScrollButton=__webpack_require__("./src/components/VScrollButton.vue"),searchvue_type_script_lang_ts_=Object(dist_runtime.b)({name:"BrowsePage",components:{VScrollButton:VScrollButton.default,VSearchGrid:VSearchGrid.default,VSkipToContentContainer:VSkipToContentContainer.default},beforeRouteEnter:function beforeRouteEnter(to,from,next){var searchStore=Object(search.b)();to.query.q&&to.query.q!==searchStore.searchTerm&&searchStore.setSearchTerm(to.query.q),next()},layout:"content-layout",middleware:function middleware(_ref){var route=_ref.route,redirect=_ref.redirect;if(!route.query.q&&!route.query.searchBy)return redirect("/")},scrollToTop:!1,setup:function setup(){var searchGridRef=Object(vue.ref)(null),showScrollButton=Object(vue.inject)("showScrollButton"),isSidebarVisible=Object(vue.inject)(provides.b),mediaStore=Object(media.a)(),searchStore=Object(search.b)();searchStore.refreshRecentSearches();var searchTerm=Object(vue.computed)((function(){return searchStore.searchTerm})),searchType=Object(vue.computed)((function(){return searchStore.searchType})),query=Object(vue.computed)((function(){return searchStore.searchQueryParams})),supported=Object(vue.computed)((function(){return searchStore.searchTypeIsSupported})),resultCount=Object(vue.computed)((function(){return mediaStore.resultCount})),fetchState=Object(vue.computed)((function(){return mediaStore.fetchState})),resultItems=Object(vue.computed)((function(){return mediaStore.resultItems})),needsFetching=Object(vue.computed)((function(){return Boolean(searchStore.searchTypeIsSupported&&!mediaStore.resultCount&&""!==searchStore.searchTerm.trim())}));return Object(dist_runtime.i)({title:"".concat(searchTerm.value," | Openverse"),meta:[{hid:"robots",name:"robots",content:"all"}]}),{searchGridRef:searchGridRef,showScrollButton:showScrollButton,searchTerm:searchTerm,searchType:searchType,supported:supported,query:query,resultCount:resultCount,fetchState:fetchState,resultItems:resultItems,needsFetching:needsFetching,isSidebarVisible:isSidebarVisible}},asyncData:function asyncData(_ref2){return Object(asyncToGenerator.a)(regeneratorRuntime.mark((function _callee(){var route,$pinia,searchStore;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return route=_ref2.route,$pinia=_ref2.$pinia,searchStore=Object(search.b)($pinia),_context.next=4,searchStore.initProviderFilters();case 4:searchStore.setSearchStateFromUrl({path:route.path,urlQuery:route.query});case 5:case"end":return _context.stop()}}),_callee)})))()},fetch:function fetch(){var _this=this;return Object(asyncToGenerator.a)(regeneratorRuntime.mark((function _callee2(){return regeneratorRuntime.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(!_this.needsFetching){_context2.next=3;break}return _context2.next=3,_this.fetchMedia();case 3:case"end":return _context2.stop()}}),_callee2)})))()},head:{},watch:{$route:function $route(newRoute,oldRoute){var _this2=this;return Object(asyncToGenerator.a)(regeneratorRuntime.mark((function _callee3(){var query,path;return regeneratorRuntime.wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(newRoute.path===oldRoute.path&&isShallowEqualObjects(newRoute.query,oldRoute.query)){_context3.next=6;break}return query=newRoute.query,path=newRoute.path,Object(search.b)(_this2.$nuxt.$pinia).setSearchStateFromUrl({urlQuery:query,path:path}),_context3.next=6,_this2.fetchMedia();case 6:case"end":return _context3.stop()}}),_callee3)})))()}},methods:{fetchMedia:function fetchMedia(){var payload=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},mediaStore=Object(media.a)(this.$pinia);return mediaStore.fetchMedia(payload)}}}),pages_searchvue_type_script_lang_ts_=searchvue_type_script_lang_ts_,componentNormalizer=__webpack_require__("../node_modules/.pnpm/vue-loader@15.10.0_uhs2gfg5l6piymj36axgkhxosy/node_modules/vue-loader/lib/runtime/componentNormalizer.js"),component=Object(componentNormalizer.a)(pages_searchvue_type_script_lang_ts_,(function render(){var _vm=this,_c=_vm._self._c;_vm._self._setupProxy;return _c("VSkipToContentContainer",{staticClass:"browse-page flex w-full flex-col px-6 lg:px-10"},[_c("VSearchGrid",{ref:"searchGridRef",attrs:{"fetch-state":_vm.fetchState,query:_vm.query,supported:_vm.supported,"search-type":_vm.searchType,"results-count":_vm.resultCount,"data-testid":"search-grid"},scopedSlots:_vm._u([{key:"media",fn:function fn(){return[_c("NuxtChild",{key:_vm.$route.path,attrs:{"result-items":_vm.resultItems,"fetch-state":_vm.fetchState,"search-term":_vm.query.q,supported:_vm.supported,"data-testid":"search-results"}})]},proxy:!0}])}),_vm._v(" "),_c("VScrollButton",{directives:[{name:"show",rawName:"v-show",value:_vm.showScrollButton,expression:"showScrollButton"}],attrs:{"is-filter-sidebar-visible":_vm.isSidebarVisible,"data-testid":"scroll-button"}})],1)}),[],!1,null,null,null);const __vuedocgen_export_0=component.exports;__webpack_exports__.default=__vuedocgen_export_0;installComponents(component,{VSearchGrid:__webpack_require__("./src/components/VSearchGrid.vue").default,VScrollButton:__webpack_require__("./src/components/VScrollButton.vue").default,VSkipToContentContainer:__webpack_require__("./src/components/VSkipToContentContainer.vue").default}),__vuedocgen_export_0.__docgenInfo={displayName:"BrowsePage",exportName:"default",description:"",tags:{}}}}]);